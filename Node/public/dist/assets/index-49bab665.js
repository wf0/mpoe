import{a as b,f as y}from"./index-ec82be82.js";import{_ as C,l as k,m as x,y as f,a as s,o as S,c as N,d as i,e as c,u as E,b as a,n as r,t as I,C as $,f as F}from"./index-88b77b73.js";import{c as A}from"./shear-29e30aa9.js";import"./index-e172cf3e.js";const B={class:"file"},M={class:"fileName"},O={class:"fileName-title"},z=["onClick"],J={class:"opt"},P=["onClick"],T=["onClick"],V=["onClick"],j={__name:"index",setup(q){let d=k([]);const p={txt:"icon-wenben",excel:"icon-excel",word:"icon-Word",markdown:"icon-file-markdown1",pdf:"icon-pdf1"},u=()=>{},m=e=>F.push({path:`/edit/${e.fileid}`,query:e}),h=e=>{let{username:o}=JSON.parse(sessionStorage.getItem("user")),n=A(o,e.fileid,e.filename+"."+e.filesuffix);v(n)},v=e=>{if(navigator.clipboard)navigator.clipboard.writeText(e);else{var o=document.createElement("textarea");document.body.appendChild(o),o.style.position="fixed",o.style.clip="rect(0 0 0 0)",o.style.top="10px",o.value=e,o.select(),document.execCommand("copy",!0),document.body.removeChild(o)}f.success("分享链接已经复制到粘贴板")},_=async(e,o)=>{o==="top"&&(e.top=!e.top),o==="favor"&&(e.favor=!e.favor),await y()};return x(async()=>{let{userid:e}=JSON.parse(sessionStorage.getItem("user")),o=await b(e);if(o.code!==200)return f.error(o.msg);o.data.forEach(n=>d.push(n))}),(e,o)=>{const n=s("el-table-column"),g=s("el-table"),w=s("el-pagination");return S(),N("div",B,[i(g,{data:E(d).filter(t=>t.favor),onSelectionChange:u},{default:c(()=>[i(n,{type:"selection",width:"55"}),i(n,{label:"文件名"},{default:c(t=>[a("div",M,[a("div",O,[a("i",{class:r(["iconfont",p[t.row.filetype]])},null,2),a("span",{onClick:l=>m(t.row)},I(t.row.filename+"."+t.row.filesuffix),9,z)])])]),_:1}),i(n,{prop:"owner",label:"拥有者"}),i(n,{prop:"createtime",label:"日期"}),i(n,{fixed:"right",align:"right"},{default:c(t=>[a("div",J,[a("i",{class:"iconfont icon-lianjie",onClick:l=>h(t.row)},null,8,P),a("i",{class:r(["iconfont",t.row.favor?"icon-shoucang1":"icon-shoucang"]),onClick:l=>_(t.row,"favor")},null,10,T),a("i",{style:$({display:t.row.top?"block":""}),class:r(["iconfont",t.row.top?"icon-tuding":"icon-tuding1"]),onClick:l=>_(t.row,"top")},null,14,V)])]),_:1})]),_:1},8,["data"]),i(w,{background:"",layout:"prev, pager, next",total:30})])}}},H=C(j,[["__scopeId","data-v-4bdc44b4"]]);export{H as default};
