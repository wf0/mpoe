import{_ as D,l as C,m as $,x as z,B as b,a as y,o as w,c as _,b as u,F as A,j as E,n as O,C as v,t as X,u as s,q as F,d as m,e as f,z as V,y as i,f as M}from"./index-d4b0ab62.js";import{f as Y}from"./index-18d70a0d.js";import{c as J}from"./index-80b5c0d1.js";const L=[{icon:"icon-24gf-folderOpen",name:"新建文件夹",color:"#FFD153",command:"folder"},{icon:"icon-Word",name:"新建在线文档",color:"#2A8CFF",command:"word"},{icon:"icon-excel",name:"新建在线表格",color:"#00C476",command:"excel"},{icon:"icon-wenben1",name:"新建在线文本",color:"",command:"txt"},{icon:"icon-file-markdown1",name:"新建markdown",color:"#1296db",command:"markdown"},{name:"导入本地文件",command:"inputfile"},{name:"更多类型",command:"more"},{name:"批量管理",command:"manage"}],P=g=>Y({url:"/folder/createFolder",method:"post",data:g});const R=["onClick"],T=["onClick"],U={class:"dialog-footer"},j={__name:"index",emits:["create","close"],setup(g,{expose:S,emit:c}){let e=C({show:!1,title:"",input:"",warning:"",placeholder:""});const a=C({x:0,y:0,display:"none"});function I(o){switch(o){case"folder":e.type=o,e.show=!0,e.title="创建文件夹",e.warning="请输入文件夹名称",e.placeholder="请输入文件夹名称";break;case"word":break;case"excel":e.type=o,e.show=!0,e.title="新建Excel",e.warning="文件名称不能为空",e.placeholder="请输入文件名称";break;case"txt":e.type=o,e.show=!0,e.title="新建文本文档",e.warning="文件名称不能为空",e.placeholder="请输入文件名称";break;case"markdown":e.type=o,e.show=!0,e.title="新建markdown文档",e.warning="文件名称不能为空",e.placeholder="请输入文件名称";break}}function N(o,t){if(t){a.x=o.pageX-o.offsetX,a.y=o.pageY-o.offsetY,a.display="block";return}let l=o.pageX,n=o.pageY;a.x=l,a.y=n,a.display="block"}function k(){a.display="none",c("close")}async function q(o,t){let{folderid:l}=M.currentRoute.value.query,n=await P({userid:o,foldername:t,parentfolderid:l});return n.code!==200?i.error(n.msg):(i.success(n.msg),n.data)}async function B(){if(!e.input)return i.warning(e.warning);let{userid:o}=JSON.parse(sessionStorage.getItem("user")),t={type:e.type};if(e.type==="folder"){let l=e.input,n=await q(o,l);t.id=n,t.name=l}else{let{userid:l}=JSON.parse(sessionStorage.getItem("user")),n=e.input,x=e.type,d={txt:"txt",markdown:"md",word:"dox",excel:"xlsx"}[e.type],h=M.currentRoute.value.query.folderid,p=await J({userid:l,filename:n,filetype:x,filesuffix:d,fileownerfolderid:h});if(p.code!==200)return i.error(p.msg);i.success(p.msg),t.id=p.data,t.name=n,t.suffix=d}e.show=!1,e.input="",c("create",t),c("close")}return $(()=>{z(()=>{const o=document.querySelector("body");o.append?o.append(b().ctx.$el):o.appendChild(b().ctx.$el)})}),S({showContentMenu:N,hiddenContentMenu:k}),(o,t)=>{const l=y("el-input"),n=y("el-button"),x=y("el-dialog");return w(),_("div",{class:"box",onClick:F(k,["stop","self"])},[u("div",{onContextmenu:t[0]||(t[0]=F(()=>{},["stop"])),class:"contentmenu",style:v({left:a.x+"px",top:a.y+"px",display:a.display})},[(w(!0),_(A,null,E(s(L),(r,d)=>(w(),_("div",{key:d,onClick:h=>I(r.command)},[u("i",{class:O(["iconfont",r.icon]),style:v({color:r.color})},null,6),u("span",null,X(r.name),1)],8,T))),128))],36),m(x,{modelValue:s(e).show,"onUpdate:modelValue":t[3]||(t[3]=r=>s(e).show=r),title:s(e).title,width:"30%"},{footer:f(()=>[u("span",U,[m(n,{onClick:t[2]||(t[2]=r=>(s(e).show=!1,c("close"),s(e).input=""))},{default:f(()=>[V(" 取消 ")]),_:1}),m(n,{type:"primary",onClick:B},{default:f(()=>[V(" 确定 ")]),_:1})])]),default:f(()=>[m(l,{modelValue:s(e).input,"onUpdate:modelValue":t[1]||(t[1]=r=>s(e).input=r),placeholder:s(e).placeholder},null,8,["modelValue","placeholder"])]),_:1},8,["modelValue","title"])],8,R)}}},K=D(j,[["__scopeId","data-v-aab582ce"]]);export{K as C};
