import{a as S,f as N}from"./index-07e7c9f0.js";import{_ as z,l as I,m as $,y as p,a as c,o as B,c as A,b as n,d as t,e as s,u as E,z as d,n as _,B as m,t as F,f as h}from"./index-fba27cff.js";import{c as M}from"./shear-cff25d24.js";import{e as O}from"./execcontent-0635da60.js";import"./index-57c8a304.js";const J={class:"file"},V={class:"file-menu"},q={class:"fileName"},D={class:"fileName-title"},P=["onClick"],T={class:"opt"},j=["onClick"],U=["onClick"],W=["onClick"],G={__name:"index",setup(H){let f=I([]);const g={txt:"icon-wenben",excel:"icon-excel",word:"icon-Word",markdown:"icon-file-markdown1",pdf:"icon-pdf1"},b={word:"#0f90e3",excel:"#01a408",pdf:"#ea5454",txt:"rgba(0, 0, 0, 0.6)",markdown:"#5A96DB",folder:"#ffd153"},x=()=>{},w=e=>{if(e.filesuffix==="xlsx")return h.push({path:`/excel/${e.fileid}`,query:e});h.push({path:`/edit/${e.fileid}`,query:e})},v=e=>{let{username:a}=JSON.parse(sessionStorage.getItem("user")),l=M(a,e.fileid,e.filename+"."+e.filesuffix);O(l),p.success("分享链接已复制到粘贴板")},u=async(e,a)=>{let{userid:l}=JSON.parse(sessionStorage.getItem("user"));a==="top"&&(e.top=!e.top),a==="favor"&&(e.favor=!e.favor),await N({userid:l,fileid:e.fileid})};return $(async()=>{let{userid:e}=JSON.parse(sessionStorage.getItem("user")),a=await S(e);if(a.code!==200)return p.error(a.msg);a.data.forEach(l=>f.push(l))}),(e,a)=>{const l=c("el-button"),k=c("el-button-group"),i=c("el-table-column"),y=c("el-table"),C=c("el-pagination");return B(),A("div",J,[n("div",V,[t(k,null,{default:s(()=>[t(l,{size:"small",disabled:!0},{default:s(()=>[d(" 删除 ")]),_:1}),t(l,{size:"small",disabled:!0},{default:s(()=>[d(" 分享 ")]),_:1}),t(l,{size:"small",disabled:!0},{default:s(()=>[d(" 添加到 ")]),_:1})]),_:1})]),t(y,{data:E(f).sort((o,r)=>r.top-o.top),onSelectionChange:x},{default:s(()=>[t(i,{type:"selection",width:"55"}),t(i,{label:"文件名"},{default:s(o=>[n("div",q,[n("div",D,[n("i",{class:_(["iconfont",g[o.row.filetype]]),style:m({color:b[o.row.filetype]})},null,6),n("span",{onClick:r=>w(o.row)},F(o.row.filename+"."+o.row.filesuffix),9,P)])])]),_:1}),t(i,{prop:"owner",label:"拥有者"}),t(i,{prop:"createtime",label:"日期"}),t(i,{fixed:"right",label:"操作",align:"right"},{default:s(o=>[n("div",T,[n("i",{class:"iconfont icon-lianjie",title:"分享",onClick:r=>v(o.row)},null,8,j),n("i",{title:"收藏",class:_(["iconfont",o.row.favor?"icon-shoucang1":"icon-shoucang"]),onClick:r=>u(o.row,"favor")},null,10,U),n("i",{title:"置顶",style:m({display:o.row.top?"block":""}),class:_(["iconfont",o.row.top?"icon-tuding":"icon-tuding1"]),onClick:r=>u(o.row,"top")},null,14,W)])]),_:1})]),_:1},8,["data"]),t(C,{background:"",layout:"prev, pager, next",total:30})])}}},Y=z(G,[["__scopeId","data-v-bfbc2911"]]);export{Y as default};
