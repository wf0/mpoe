import{a as k,f as C}from"./index-7f64c7dc.js";import{_ as y,j as S,k as N,E as p,a as c,o as z,c as E,b as a,d as t,w as l,u as I,v as d,n as _,t as $,y as F,e as A}from"./index-a4037c0a.js";import{c as B}from"./shear-fd4281e8.js";import{e as M}from"./execcontent-0635da60.js";import"./index-2cf621ea.js";const O={class:"file"},V={class:"file-menu"},j={class:"fileName"},J={class:"fileName-title"},P=["onClick"],T={class:"opt"},q=["onClick"],D=["onClick"],U=["onClick"],W={__name:"index",setup(G){let u=S([]);const m={txt:"icon-wenben",excel:"icon-excel",word:"icon-Word",markdown:"icon-file-markdown1",pdf:"icon-pdf1"},h=()=>{},g=e=>A.push({path:`/edit/${e.fileid}`,query:e}),v=e=>{let{username:n}=JSON.parse(sessionStorage.getItem("user")),s=B(n,e.fileid,e.filename+"."+e.filesuffix);M(s),p.success("分享链接已复制到粘贴板")},f=async(e,n)=>{n==="top"&&(e.top=!e.top),n==="favor"&&(e.favor=!e.favor),await C()};return N(async()=>{let{userid:e}=JSON.parse(sessionStorage.getItem("user")),n=await k(e);if(n.code!==200)return p.error(n.msg);n.data.forEach(s=>u.push(s))}),(e,n)=>{const s=c("el-button"),w=c("el-button-group"),i=c("el-table-column"),b=c("el-table"),x=c("el-pagination");return z(),E("div",O,[a("div",V,[t(w,null,{default:l(()=>[t(s,{size:"small",disabled:!0},{default:l(()=>[d(" 删除 ")]),_:1}),t(s,{size:"small",disabled:!0},{default:l(()=>[d(" 分享 ")]),_:1}),t(s,{size:"small",disabled:!0},{default:l(()=>[d(" 添加到 ")]),_:1})]),_:1})]),t(b,{data:I(u).sort((o,r)=>r.top-o.top),onSelectionChange:h},{default:l(()=>[t(i,{type:"selection",width:"55"}),t(i,{label:"文件名"},{default:l(o=>[a("div",j,[a("div",J,[a("i",{class:_(["iconfont",m[o.row.filetype]])},null,2),a("span",{onClick:r=>g(o.row)},$(o.row.filename+"."+o.row.filesuffix),9,P)])])]),_:1}),t(i,{prop:"owner",label:"拥有者"}),t(i,{prop:"createtime",label:"日期"}),t(i,{fixed:"right",align:"right"},{default:l(o=>[a("div",T,[a("i",{class:"iconfont icon-lianjie",onClick:r=>v(o.row)},null,8,q),a("i",{class:_(["iconfont",o.row.favor?"icon-shoucang1":"icon-shoucang"]),onClick:r=>f(o.row,"favor")},null,10,D),a("i",{style:F({display:o.row.top?"block":""}),class:_(["iconfont",o.row.top?"icon-tuding":"icon-tuding1"]),onClick:r=>f(o.row,"top")},null,14,U)])]),_:1})]),_:1},8,["data"]),t(x,{background:"",layout:"prev, pager, next",total:30})])}}},X=y(W,[["__scopeId","data-v-d16ed346"]]);export{X as default};
