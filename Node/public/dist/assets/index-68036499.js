import{a as y,f as C}from"./index-9723cf2a.js";import{_ as S,j as N,k as $,E as p,a as c,o as z,c as E,b as a,d as t,w as l,u as I,v as d,n as _,t as F,y as A,e as h}from"./index-9dd2b97d.js";import{c as B}from"./shear-fd4281e8.js";import{e as M}from"./execcontent-0635da60.js";import"./index-fe62cbc8.js";const O={class:"file"},V={class:"file-menu"},j={class:"fileName"},q={class:"fileName-title"},J=["onClick"],P={class:"opt"},T=["onClick"],D=["onClick"],U=["onClick"],W={__name:"index",setup(G){let u=N([]);const m={txt:"icon-wenben",excel:"icon-excel",word:"icon-Word",markdown:"icon-file-markdown1",pdf:"icon-pdf1"},g=()=>{},v=e=>{if(e.filesuffix==="xlsx")return h.push({path:`/excel/${e.fileid}`,query:e});h.push({path:`/edit/${e.fileid}`,query:e})},x=e=>{let{username:n}=JSON.parse(sessionStorage.getItem("user")),s=B(n,e.fileid,e.filename+"."+e.filesuffix);M(s),p.success("分享链接已复制到粘贴板")},f=async(e,n)=>{n==="top"&&(e.top=!e.top),n==="favor"&&(e.favor=!e.favor),await C()};return $(async()=>{let{userid:e}=JSON.parse(sessionStorage.getItem("user")),n=await y(e);if(n.code!==200)return p.error(n.msg);n.data.forEach(s=>u.push(s))}),(e,n)=>{const s=c("el-button"),w=c("el-button-group"),i=c("el-table-column"),b=c("el-table"),k=c("el-pagination");return z(),E("div",O,[a("div",V,[t(w,null,{default:l(()=>[t(s,{size:"small",disabled:!0},{default:l(()=>[d(" 删除 ")]),_:1}),t(s,{size:"small",disabled:!0},{default:l(()=>[d(" 分享 ")]),_:1}),t(s,{size:"small",disabled:!0},{default:l(()=>[d(" 添加到 ")]),_:1})]),_:1})]),t(b,{data:I(u).sort((o,r)=>r.top-o.top),onSelectionChange:g},{default:l(()=>[t(i,{type:"selection",width:"55"}),t(i,{label:"文件名"},{default:l(o=>[a("div",j,[a("div",q,[a("i",{class:_(["iconfont",m[o.row.filetype]])},null,2),a("span",{onClick:r=>v(o.row)},F(o.row.filename+"."+o.row.filesuffix),9,J)])])]),_:1}),t(i,{prop:"owner",label:"拥有者"}),t(i,{prop:"createtime",label:"日期"}),t(i,{fixed:"right",align:"right"},{default:l(o=>[a("div",P,[a("i",{class:"iconfont icon-lianjie",onClick:r=>x(o.row)},null,8,T),a("i",{class:_(["iconfont",o.row.favor?"icon-shoucang1":"icon-shoucang"]),onClick:r=>f(o.row,"favor")},null,10,D),a("i",{style:A({display:o.row.top?"block":""}),class:_(["iconfont",o.row.top?"icon-tuding":"icon-tuding1"]),onClick:r=>f(o.row,"top")},null,14,U)])]),_:1})]),_:1},8,["data"]),t(k,{background:"",layout:"prev, pager, next",total:30})])}}},X=S(W,[["__scopeId","data-v-a40378df"]]);export{X as default};
