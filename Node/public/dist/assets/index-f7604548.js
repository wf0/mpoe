import{a as C,f as y}from"./index-c0bfc84b.js";import{_ as S,l as N,m as z,y as p,a as c,o as $,c as I,b as a,d as t,e as s,u as E,z as d,n as _,t as F,C as A,f as h}from"./index-8a376891.js";import{c as B}from"./shear-b6104ecc.js";import{e as M}from"./execcontent-0635da60.js";import"./index-091ed95d.js";const O={class:"file"},V={class:"file-menu"},q={class:"fileName"},J={class:"fileName-title"},P=["onClick"],T={class:"opt"},j=["onClick"],D=["onClick"],U=["onClick"],W={__name:"index",setup(G){let f=N([]);const m={txt:"icon-wenben",excel:"icon-excel",word:"icon-Word",markdown:"icon-file-markdown1",pdf:"icon-pdf1"},g=()=>{},v=e=>{if(e.filesuffix==="xlsx")return h.push({path:`/excel/${e.fileid}`,query:e});h.push({path:`/edit/${e.fileid}`,query:e})},x=e=>{let{username:n}=JSON.parse(sessionStorage.getItem("user")),l=B(n,e.fileid,e.filename+"."+e.filesuffix);M(l),p.success("分享链接已复制到粘贴板")},u=async(e,n)=>{n==="top"&&(e.top=!e.top),n==="favor"&&(e.favor=!e.favor),await y()};return z(async()=>{let{userid:e}=JSON.parse(sessionStorage.getItem("user")),n=await C(e);if(n.code!==200)return p.error(n.msg);n.data.forEach(l=>f.push(l))}),(e,n)=>{const l=c("el-button"),w=c("el-button-group"),i=c("el-table-column"),b=c("el-table"),k=c("el-pagination");return $(),I("div",O,[a("div",V,[t(w,null,{default:s(()=>[t(l,{size:"small",disabled:!0},{default:s(()=>[d(" 删除 ")]),_:1}),t(l,{size:"small",disabled:!0},{default:s(()=>[d(" 分享 ")]),_:1}),t(l,{size:"small",disabled:!0},{default:s(()=>[d(" 添加到 ")]),_:1})]),_:1})]),t(b,{data:E(f).sort((o,r)=>r.top-o.top),onSelectionChange:g},{default:s(()=>[t(i,{type:"selection",width:"55"}),t(i,{label:"文件名"},{default:s(o=>[a("div",q,[a("div",J,[a("i",{class:_(["iconfont",m[o.row.filetype]])},null,2),a("span",{onClick:r=>v(o.row)},F(o.row.filename+"."+o.row.filesuffix),9,P)])])]),_:1}),t(i,{prop:"owner",label:"拥有者"}),t(i,{prop:"createtime",label:"日期"}),t(i,{fixed:"right",align:"right"},{default:s(o=>[a("div",T,[a("i",{class:"iconfont icon-lianjie",onClick:r=>x(o.row)},null,8,j),a("i",{class:_(["iconfont",o.row.favor?"icon-shoucang1":"icon-shoucang"]),onClick:r=>u(o.row,"favor")},null,10,D),a("i",{style:A({display:o.row.top?"block":""}),class:_(["iconfont",o.row.top?"icon-tuding":"icon-tuding1"]),onClick:r=>u(o.row,"top")},null,14,U)])]),_:1})]),_:1},8,["data"]),t(k,{background:"",layout:"prev, pager, next",total:30})])}}},X=S(W,[["__scopeId","data-v-a40378df"]]);export{X as default};
