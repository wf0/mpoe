import{_ as Un,a as be,o as Bt,g as er,w as me,d as _e,c as Wt,F as fn,h as hn,b as Ot,t as gn,i as ga,y as fo,v as Lr,m as ya,r as on,j as nr,k as Ni,e as Dn,u as ne,E as Xn,p as Li,f as Di,D as ve,G as Mi,H as Vo,q as va,n as Dr,I as $o,J as ma,B as Ko,K as ba,L as _a,M as wa,N as Ea,A as Sa}from"./index-9dd2b97d.js";import{c as Tr}from"./_commonjs-dynamic-modules-302442b1.js";import{s as Oa,e as ka,b as Aa}from"./index-9723cf2a.js";import"./index-fe62cbc8.js";const Ta={style:{width:"100%",height:"100%"}},Ca={class:"dropdownItem"},xa=["innerHTML"],Ra=["title"],Na={__name:"index",props:{trigger:{type:String,default:"click"},list:{type:Array,default:()=>[]}},emits:["handleCommand","handleOpen","handleClose"],setup(i,{emit:t}){const e=p=>t("handleCommand",p),n=()=>t("handleOpen"),a=()=>t("handleClose");return(p,w)=>{const g=be("el-dropdown-item"),h=be("el-dropdown-menu"),m=be("el-scrollbar"),_=be("el-dropdown");return Bt(),er(_,{trigger:i.trigger,onHandleOpen:n,onHandleClose:a,onCommand:e},{dropdown:me(()=>[_e(m,{height:"200px"},{default:me(()=>[_e(h,null,{default:me(()=>[(Bt(!0),Wt(fn,null,hn(i.list,o=>(Bt(),er(g,{key:o.command,command:o.command},{default:me(()=>[Ot("div",Ca,[Ot("div",{innerHTML:o.userimg,class:"userimg_svg"},null,8,xa),Ot("span",{title:o.username},gn(o.username),9,Ra)])]),_:2},1032,["command"]))),128))]),_:1})]),_:1})]),default:me(()=>[Ot("div",Ta,[ga(p.$slots,"content",{},void 0,!0)])]),_:3},8,["trigger"])}}},La=Un(Na,[["__scopeId","data-v-1d0c1e4d"]]);const Da={class:"list"},Ma=["innerHTML"],Ia={__name:"userList",props:{userList:{type:Array,default:()=>[]}},emits:["command"],setup(i,{emit:t}){const e=a=>t("command",a),n=a=>-10*a;return(a,p)=>{const w=be("el-avatar");return Bt(),er(La,{list:i.userList,onCommand:e},{content:me(()=>[Ot("div",Da,[(Bt(!0),Wt(fn,null,hn(i.userList.slice(0,3),(g,h)=>(Bt(),Wt("div",{style:fo({transform:`translateX(${n(h)}px)`}),key:h,class:"userimg_svg",innerHTML:g.userimg},null,12,Ma))),128)),i.userList.length>3?(Bt(),er(w,{key:0,class:"allUser",shape:"square",style:fo({transform:`translateX(${i.userList.length>3?-30:i.userList.length*-10}px)`})},{default:me(()=>[Lr(gn(i.userList.length),1)]),_:1},8,["style"])):ya("",!0)])]),_:1},8,["list"])}}},ja=Un(Ia,[["__scopeId","data-v-66f08092"]]);const fr=i=>(Li("data-v-5bd2ffaf"),i=i(),Di(),i),Pa={class:"header"},qa={class:"header-left"},Ba=fr(()=>Ot("i",{class:"iconfont icon-shouye1",style:{color:"var(--main-color)"}},null,-1)),Fa=[Ba],Ua=["title"],Ha={key:0,class:"iconfont icon-shoucang"},za={key:1,class:"iconfont icon-shoucang1"},Va=fr(()=>Ot("i",{class:"iconfont icon-oko"},null,-1)),$a={class:"header-right"},Ka={class:"header-right-userlist",title:"正在编辑的人"},Wa=fr(()=>Ot("div",{class:"header-right-markdown",title:"切换模式"},[Ot("i",{class:"iconfont icon-markdown1"})],-1)),Ga=fr(()=>Ot("div",{class:"header-right-history",title:"历史记录"},[Ot("i",{class:"iconfont icon-lishi"})],-1)),Ya=fr(()=>Ot("i",{class:"iconfont icon-xiaoxizhongxin"},null,-1)),Za={class:"header-right-shear",title:"分享"},Ja={class:"header-right-userimg",title:"我的信息"},Xa=["innerHTML"],Qa="追风少年",tl={__name:"top",props:{socketuserlist:{type:Array},unread:{type:Number,default:0}},emits:["open"],setup(i,{emit:t}){const e=()=>t("open");let n=on(""),a=nr({usersvg:"",userimg:"",username:""});const p=on(!1);on("text");const w=h=>{console.log("点击了",h)},g=()=>{p.value=!p.value,p.value?Xn.success("已收藏"):Xn.success("已取消")};return Ni(()=>{let h=Dn.currentRoute.value.query;n.value=`${h.filename}.${h.suffix||h.filesuffix}`;let{userimg:m}=JSON.parse(sessionStorage.getItem("user"));m.toString().includes("<svg")?a.usersvg=m:a.userimg=m}),(h,m)=>{const _=be("el-badge"),o=be("el-button"),r=be("el-avatar");return Bt(),Wt("div",Pa,[Ot("div",qa,[Ot("div",{class:"header-left-home",title:"返回首页",onClick:m[0]||(m[0]=s=>ne(Dn).push("/home/pages"))},Fa),Ot("div",{class:"header-left-filename",title:ne(n)},gn(ne(n)),9,Ua),Ot("div",{class:"header-left-favor",onClick:g,title:"收藏"},[p.value?(Bt(),Wt("i",za)):(Bt(),Wt("i",Ha))]),Ot("div",{class:"header-left-news"},[Va,Ot("span",null,[Lr(" 上次修改是 "),Ot("span",{class:"newUserName"},gn(Qa)),Lr(" 在15分钟前进行的 ")])])]),Ot("div",$a,[Ot("div",Ka,[_e(ja,{userList:i.socketuserlist,onCommand:w},null,8,["userList"])]),Wa,Ga,Ot("div",{class:"header-right-setting",title:"消息",onClick:e},[_e(_,{value:i.unread||"",class:"item"},{default:me(()=>[Ya]),_:1},8,["value"])]),Ot("div",Za,[_e(o,{type:"primary",size:"small"},{default:me(()=>[Lr("分享")]),_:1})]),Ot("div",Ja,[ne(a).usersvg?(Bt(),Wt("div",{key:0,class:"userimg_svg",innerHTML:ne(a).usersvg},null,8,Xa)):(Bt(),er(r,{key:1,shape:"square",src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}))])])])}}},el=Un(tl,[["__scopeId","data-v-5bd2ffaf"]]),nl=["😀","😁","😂","😃","😄","😅","😆","😇","😈","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😛","😜","😝","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨","😩","😪","😫","😬","😭","😮","😯","😰","😱","😲","😳","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙁","🙂","🙃","🙄","🙅🏻‍♀️","🙅🏻‍♂️","🙅🏻","🙅🏼‍♀️","🙅🏼‍♂️","🙅🏼","🙅🏽‍♀️","🙅🏽‍♂️","🙅🏽","🙅🏾‍♀️","🙅🏾‍♂️","🙅🏾","🙅🏿‍♀️","🙅🏿‍♂️","🙅🏿","🙅‍♀️","🙅‍♂️","🙅","🙆🏻‍♀️","🙆🏻‍♂️","🙆🏻","🙆🏼‍♀️","🙆🏼‍♂️","🙆🏼","🙆🏽‍♀️","🙆🏽‍♂️","🙆🏽","🙆🏾‍♀️","🙆🏾‍♂️","🙆🏾","🙆🏿‍♀️","🙆🏿‍♂️","🙆🏿","🙆‍♀️","🙆‍♂️","🙆","🙇🏻‍♀️","🙇🏻‍♂️","🙇🏻","🙇🏼‍♀️","🙇🏼‍♂️","🙇🏼","🙇🏽‍♀️","🙇🏽‍♂️","🙇🏽","🙇🏾‍♀️","🙇🏾‍♂️","🙇🏾","🙇🏿‍♀️","🙇🏿‍♂️","🙇🏿","🙇‍♀️","🙇‍♂️","🙇","🙈","🙉","🙊","🙋🏻‍♀️","🙋🏻‍♂️","🙋🏻","🙋🏼‍♀️","🙋🏼‍♂️","🙋🏼","🙋🏽‍♀️","🙋🏽‍♂️","🙋🏽","🙋🏾‍♀️","🙋🏾‍♂️","🙋🏾","🙋🏿‍♀️","🙋🏿‍♂️","🙋🏿","🙋‍♀️","🙋‍♂️","🙋","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿","🙌","🙍🏻‍♀️","🙍🏻‍♂️","🙍🏻","🙍🏼‍♀️","🙍🏼‍♂️","🙍🏼","🙍🏽‍♀️","🙍🏽‍♂️","🙍🏽","🙍🏾‍♀️","🙍🏾‍♂️","🙍🏾","🙍🏿‍♀️","🙍🏿‍♂️","🙍🏿","🙍‍♀️","🙍‍♂️","🙍","🙎🏻‍♀️","🙎🏻‍♂️","🙎🏻","🙎🏼‍♀️","🙎🏼‍♂️","🙎🏼","🙎🏽‍♀️","🙎🏽‍♂️","🙎🏽","🙎🏾‍♀️","🙎🏾‍♂️","🙎🏾","🙎🏿‍♀️","🙎🏿‍♂️","🙎🏿","🙎‍♀️","🙎‍♂️","🙎","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿","🙏","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚋","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚢","🚣🏻‍♀️","🚣🏻‍♂️","🚣🏻","🚣🏼‍♀️","🚣🏼‍♂️","🚣🏼","🚣🏽‍♀️","🚣🏽‍♂️","🚣🏽","🚣🏾‍♀️","🚣🏾‍♂️","🚣🏾","🚣🏿‍♀️","🚣🏿‍♂️","🚣🏿","🚣‍♀️","🚣‍♂️","🚣","🚤","🚥","🚦","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚮","🚯","🚰","🚱","🚲","🚳","🚴🏻‍♀️","🚴🏻‍♂️","🚴🏻","🚴🏼‍♀️","🚴🏼‍♂️","🚴🏼","🚴🏽‍♀️","🚴🏽‍♂️","🚴🏽","🚴🏾‍♀️","🚴🏾‍♂️","🚴🏾","🚴🏿‍♀️","🚴🏿‍♂️","🚴🏿","🚴‍♀️","🚴‍♂️","🚴","🚵🏻‍♀️","🚵🏻‍♂️","🚵🏻","🚵🏼‍♀️","🚵🏼‍♂️","🚵🏼","🚵🏽‍♀️","🚵🏽‍♂️","🚵🏽","🚵🏾‍♀️","🚵🏾‍♂️","🚵🏾","🚵🏿‍♀️","🚵🏿‍♂️","🚵🏿","🚵‍♀️","🚵‍♂️","🚵","🚶🏻‍♀️","🚶🏻‍♂️","🚶🏻","🚶🏼‍♀️","🚶🏼‍♂️","🚶🏼","🚶🏽‍♀️","🚶🏽‍♂️","🚶🏽","🚶🏾‍♀️","🚶🏾‍♂️","🚶🏾","🚶🏿‍♀️","🚶🏿‍♂️","🚶🏿","🚶‍♀️","🚶‍♂️","🚶","🚷","🚸","🚹","🚺","🚻","🚼","🚽","🚾","🚿","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🛀","🛁","🛂","🛃","🛄","🛅","🛋️","🛌🏻","🛌🏼","🛌🏽","🛌🏾","🛌🏿","🛌","🛍️","🛎️","🛏️","🛐","🛑","🛒","🛕","🛠️","🛡️","🛢️","🛣️","🛤️","🛥️","🛩️","🛫","🛬","🛰️","🛳️","🛴","🛵","🛶","🛷","🛸","🛹","🛺","🟠","🟡","🟢","🟣","🟤","🟥","🟦","🟧","🟨","🟩","🟪","🟫","🤍","🤎","🤏🏻","🤏🏼","🤏🏽","🤏🏾","🤏🏿","🤏","🤐","🤑","🤒","🤓","🤔","🤕","🤖","🤗","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿","🤘","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿","🤙","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿","🤚","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿","🤛","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿","🤜","🤝","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿","🤞","🤟🏻","🤟🏼","🤟🏽","🤟🏾","🤟🏿","🤟","🤠","🤡","🤢","🤣","🤤","🤥","🤦🏻‍♀️","🤦🏻‍♂️","🤦🏻","🤦🏼‍♀️","🤦🏼‍♂️","🤦🏼","🤦🏽‍♀️","🤦🏽‍♂️","🤦🏽","🤦🏾‍♀️","🤦🏾‍♂️","🤦🏾","🤦🏿‍♀️","🤦🏿‍♂️","🤦🏿","🤦‍♀️","🤦‍♂️","🤦","🤧","🤨","🤩","🤪","🤫","🤬","🤭","🤮","🤯","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿","🤰","🤱🏻","🤱🏼","🤱🏽","🤱🏾","🤱🏿","🤱","🤲🏻","🤲🏼","🤲🏽","🤲🏾","🤲🏿","🤲","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿","🤳","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿","🤴","🤵🏻‍♀️","🤵🏻‍♂️","🤵🏻","🤵🏼‍♀️","🤵🏼‍♂️","🤵🏼","🤵🏽‍♀️","🤵🏽‍♂️","🤵🏽","🤵🏾‍♀️","🤵🏾‍♂️","🤵🏾","🤵🏿‍♀️","🤵🏿‍♂️","🤵🏿","🤵‍♀️","🤵‍♂️","🤵","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿","🤶","🤷🏻‍♀️","🤷🏻‍♂️","🤷🏻","🤷🏼‍♀️","🤷🏼‍♂️","🤷🏼","🤷🏽‍♀️","🤷🏽‍♂️","🤷🏽","🤷🏾‍♀️","🤷🏾‍♂️","🤷🏾","🤷🏿‍♀️","🤷🏿‍♂️","🤷🏿","🤷‍♀️","🤷‍♂️","🤷","🤸🏻‍♀️","🤸🏻‍♂️","🤸🏻","🤸🏼‍♀️","🤸🏼‍♂️","🤸🏼","🤸🏽‍♀️","🤸🏽‍♂️","🤸🏽","🤸🏾‍♀️","🤸🏾‍♂️","🤸🏾","🤸🏿‍♀️","🤸🏿‍♂️","🤸🏿","🤸‍♀️","🤸‍♂️","🤸","🤹🏻‍♀️","🤹🏻‍♂️","🤹🏻","🤹🏼‍♀️","🤹🏼‍♂️","🤹🏼","🤹🏽‍♀️","🤹🏽‍♂️","🤹🏽","🤹🏾‍♀️","🤹🏾‍♂️","🤹🏾","🤹🏿‍♀️","🤹🏿‍♂️","🤹🏿","🤹‍♀️","🤹‍♂️","🤹","🤺","🤼‍♀️","🤼‍♂️","🤼","🤽🏻‍♀️","🤽🏻‍♂️","🤽🏻","🤽🏼‍♀️","🤽🏼‍♂️","🤽🏼","🤽🏽‍♀️","🤽🏽‍♂️","🤽🏽","🤽🏾‍♀️","🤽🏾‍♂️","🤽🏾","🤽🏿‍♀️","🤽🏿‍♂️","🤽🏿","🤽‍♀️","🤽‍♂️","🤽","🤾🏻‍♀️","🤾🏻‍♂️","🤾🏻","🤾🏼‍♀️","🤾🏼‍♂️","🤾🏼","🤾🏽‍♀️","🤾🏽‍♂️","🤾🏽","🤾🏾‍♀️","🤾🏾‍♂️","🤾🏾","🤾🏿‍♀️","🤾🏿‍♂️","🤾🏿","🤾‍♀️","🤾‍♂️","🤾","🤿","🥀","🥁","🥂","🥃","🥄","🥅","🥇","🥈","🥉","🥊","🥋","🥌","🥍","🥎","🥏","🥐","🥑","🥒","🥓","🥔","🥕","🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥞","🥟","🥠","🥡","🥢","🥣","🥤","🥥","🥦","🥧","🥨","🥩","🥪","🥫","🥬","🥭","🥮","🥯","🥰","🥱","🥳","🥴","🥵","🥶","🥺"];var Wo={exports:{}};/*!
 * Quill Editor v1.3.4
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(i,t){(function(n,a){i.exports=a()})(ve,function(){return function(e){var n={};function a(p){if(n[p])return n[p].exports;var w=n[p]={i:p,l:!1,exports:{}};return e[p].call(w.exports,w,w.exports,a),w.l=!0,w.exports}return a.m=e,a.c=n,a.d=function(p,w,g){a.o(p,w)||Object.defineProperty(p,w,{configurable:!1,enumerable:!0,get:g})},a.n=function(p){var w=p&&p.__esModule?function(){return p.default}:function(){return p};return a.d(w,"a",w),w},a.o=function(p,w){return Object.prototype.hasOwnProperty.call(p,w)},a.p="",a(a.s=109)}([function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(17),w=a(18),g=a(19),h=a(45),m=a(46),_=a(47),o=a(48),r=a(49),s=a(12),c=a(32),d=a(33),E=a(31),v=a(1),y={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:p.default,Format:w.default,Leaf:g.default,Embed:o.default,Scroll:h.default,Block:_.default,Inline:m.default,Text:r.default,Attributor:{Attribute:s.default,Class:c.default,Style:d.default,Store:E.default}};n.default=y},function(e,n,a){var p=this&&this.__extends||function(){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,y){v.__proto__=y}||function(v,y){for(var u in y)y.hasOwnProperty(u)&&(v[u]=y[u])};return function(v,y){E(v,y);function u(){this.constructor=v}v.prototype=y===null?Object.create(y):(u.prototype=y.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=function(E){p(v,E);function v(y){var u=this;return y="[Parchment] "+y,u=E.call(this,y)||this,u.message=y,u.name=u.constructor.name,u}return v}(Error);n.ParchmentError=w;var g={},h={},m={},_={};n.DATA_KEY="__blot";var o;(function(E){E[E.TYPE=3]="TYPE",E[E.LEVEL=12]="LEVEL",E[E.ATTRIBUTE=13]="ATTRIBUTE",E[E.BLOT=14]="BLOT",E[E.INLINE=7]="INLINE",E[E.BLOCK=11]="BLOCK",E[E.BLOCK_BLOT=10]="BLOCK_BLOT",E[E.INLINE_BLOT=6]="INLINE_BLOT",E[E.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",E[E.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",E[E.ANY=15]="ANY"})(o=n.Scope||(n.Scope={}));function r(E,v){var y=c(E);if(y==null)throw new w("Unable to create "+E+" blot");var u=y,l=E instanceof Node||E.nodeType===Node.TEXT_NODE?E:u.create(v);return new u(l,v)}n.create=r;function s(E,v){return v===void 0&&(v=!1),E==null?null:E[n.DATA_KEY]!=null?E[n.DATA_KEY].blot:v?s(E.parentNode,v):null}n.find=s;function c(E,v){v===void 0&&(v=o.ANY);var y;if(typeof E=="string")y=_[E]||g[E];else if(E instanceof Text||E.nodeType===Node.TEXT_NODE)y=_.text;else if(typeof E=="number")E&o.LEVEL&o.BLOCK?y=_.block:E&o.LEVEL&o.INLINE&&(y=_.inline);else if(E instanceof HTMLElement){var u=(E.getAttribute("class")||"").split(/\s+/);for(var l in u)if(y=h[u[l]],y)break;y=y||m[E.tagName]}return y==null?null:v&o.LEVEL&y.scope&&v&o.TYPE&y.scope?y:null}n.query=c;function d(){for(var E=[],v=0;v<arguments.length;v++)E[v]=arguments[v];if(E.length>1)return E.map(function(l){return d(l)});var y=E[0];if(typeof y.blotName!="string"&&typeof y.attrName!="string")throw new w("Invalid definition");if(y.blotName==="abstract")throw new w("Cannot register abstract class");if(_[y.blotName||y.attrName]=y,typeof y.keyName=="string")g[y.keyName]=y;else if(y.className!=null&&(h[y.className]=y),y.tagName!=null){Array.isArray(y.tagName)?y.tagName=y.tagName.map(function(l){return l.toUpperCase()}):y.tagName=y.tagName.toUpperCase();var u=Array.isArray(y.tagName)?y.tagName:[y.tagName];u.forEach(function(l){(m[l]==null||y.className==null)&&(m[l]=y)})}return y}n.register=d},function(e,n,a){var p=a(51),w=a(11),g=a(3),h=a(20),m=String.fromCharCode(0),_=function(o){Array.isArray(o)?this.ops=o:o!=null&&Array.isArray(o.ops)?this.ops=o.ops:this.ops=[]};_.prototype.insert=function(o,r){var s={};return o.length===0?this:(s.insert=o,r!=null&&typeof r=="object"&&Object.keys(r).length>0&&(s.attributes=r),this.push(s))},_.prototype.delete=function(o){return o<=0?this:this.push({delete:o})},_.prototype.retain=function(o,r){if(o<=0)return this;var s={retain:o};return r!=null&&typeof r=="object"&&Object.keys(r).length>0&&(s.attributes=r),this.push(s)},_.prototype.push=function(o){var r=this.ops.length,s=this.ops[r-1];if(o=g(!0,{},o),typeof s=="object"){if(typeof o.delete=="number"&&typeof s.delete=="number")return this.ops[r-1]={delete:s.delete+o.delete},this;if(typeof s.delete=="number"&&o.insert!=null&&(r-=1,s=this.ops[r-1],typeof s!="object"))return this.ops.unshift(o),this;if(w(o.attributes,s.attributes)){if(typeof o.insert=="string"&&typeof s.insert=="string")return this.ops[r-1]={insert:s.insert+o.insert},typeof o.attributes=="object"&&(this.ops[r-1].attributes=o.attributes),this;if(typeof o.retain=="number"&&typeof s.retain=="number")return this.ops[r-1]={retain:s.retain+o.retain},typeof o.attributes=="object"&&(this.ops[r-1].attributes=o.attributes),this}}return r===this.ops.length?this.ops.push(o):this.ops.splice(r,0,o),this},_.prototype.chop=function(){var o=this.ops[this.ops.length-1];return o&&o.retain&&!o.attributes&&this.ops.pop(),this},_.prototype.filter=function(o){return this.ops.filter(o)},_.prototype.forEach=function(o){this.ops.forEach(o)},_.prototype.map=function(o){return this.ops.map(o)},_.prototype.partition=function(o){var r=[],s=[];return this.forEach(function(c){var d=o(c)?r:s;d.push(c)}),[r,s]},_.prototype.reduce=function(o,r){return this.ops.reduce(o,r)},_.prototype.changeLength=function(){return this.reduce(function(o,r){return r.insert?o+h.length(r):r.delete?o-r.delete:o},0)},_.prototype.length=function(){return this.reduce(function(o,r){return o+h.length(r)},0)},_.prototype.slice=function(o,r){o=o||0,typeof r!="number"&&(r=1/0);for(var s=[],c=h.iterator(this.ops),d=0;d<r&&c.hasNext();){var E;d<o?E=c.next(o-d):(E=c.next(r-d),s.push(E)),d+=h.length(E)}return new _(s)},_.prototype.compose=function(o){for(var r=h.iterator(this.ops),s=h.iterator(o.ops),c=new _;r.hasNext()||s.hasNext();)if(s.peekType()==="insert")c.push(s.next());else if(r.peekType()==="delete")c.push(r.next());else{var d=Math.min(r.peekLength(),s.peekLength()),E=r.next(d),v=s.next(d);if(typeof v.retain=="number"){var y={};typeof E.retain=="number"?y.retain=d:y.insert=E.insert;var u=h.attributes.compose(E.attributes,v.attributes,typeof E.retain=="number");u&&(y.attributes=u),c.push(y)}else typeof v.delete=="number"&&typeof E.retain=="number"&&c.push(v)}return c.chop()},_.prototype.concat=function(o){var r=new _(this.ops.slice());return o.ops.length>0&&(r.push(o.ops[0]),r.ops=r.ops.concat(o.ops.slice(1))),r},_.prototype.diff=function(o,r){if(this.ops===o.ops)return new _;var s=[this,o].map(function(y){return y.map(function(u){if(u.insert!=null)return typeof u.insert=="string"?u.insert:m;var l=y===o?"on":"with";throw new Error("diff() called "+l+" non-document")}).join("")}),c=new _,d=p(s[0],s[1],r),E=h.iterator(this.ops),v=h.iterator(o.ops);return d.forEach(function(y){for(var u=y[1].length;u>0;){var l=0;switch(y[0]){case p.INSERT:l=Math.min(v.peekLength(),u),c.push(v.next(l));break;case p.DELETE:l=Math.min(u,E.peekLength()),E.next(l),c.delete(l);break;case p.EQUAL:l=Math.min(E.peekLength(),v.peekLength(),u);var b=E.next(l),O=v.next(l);w(b.insert,O.insert)?c.retain(l,h.attributes.diff(b.attributes,O.attributes)):c.push(O).delete(l);break}u-=l}}),c.chop()},_.prototype.eachLine=function(o,r){r=r||`
`;for(var s=h.iterator(this.ops),c=new _,d=0;s.hasNext();){if(s.peekType()!=="insert")return;var E=s.peek(),v=h.length(E)-s.peekLength(),y=typeof E.insert=="string"?E.insert.indexOf(r,v)-v:-1;if(y<0)c.push(s.next());else if(y>0)c.push(s.next(y));else{if(o(c,s.next(1).attributes||{},d)===!1)return;d+=1,c=new _}}c.length()>0&&o(c,{},d)},_.prototype.transform=function(o,r){if(r=!!r,typeof o=="number")return this.transformPosition(o,r);for(var s=h.iterator(this.ops),c=h.iterator(o.ops),d=new _;s.hasNext()||c.hasNext();)if(s.peekType()==="insert"&&(r||c.peekType()!=="insert"))d.retain(h.length(s.next()));else if(c.peekType()==="insert")d.push(c.next());else{var E=Math.min(s.peekLength(),c.peekLength()),v=s.next(E),y=c.next(E);if(v.delete)continue;y.delete?d.push(y):d.retain(E,h.attributes.transform(v.attributes,y.attributes,r))}return d.chop()},_.prototype.transformPosition=function(o,r){r=!!r;for(var s=h.iterator(this.ops),c=0;s.hasNext()&&c<=o;){var d=s.peekLength(),E=s.peekType();if(s.next(),E==="delete"){o-=Math.min(d,o-c);continue}else E==="insert"&&(c<o||!r)&&(o+=d);c+=d}return o},e.exports=_},function(e,n){var a=Object.prototype.hasOwnProperty,p=Object.prototype.toString,w=function(m){return typeof Array.isArray=="function"?Array.isArray(m):p.call(m)==="[object Array]"},g=function(m){if(!m||p.call(m)!=="[object Object]")return!1;var _=a.call(m,"constructor"),o=m.constructor&&m.constructor.prototype&&a.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!_&&!o)return!1;var r;for(r in m);return typeof r>"u"||a.call(m,r)};e.exports=function h(){var m,_,o,r,s,c,d=arguments[0],E=1,v=arguments.length,y=!1;for(typeof d=="boolean"&&(y=d,d=arguments[1]||{},E=2),(d==null||typeof d!="object"&&typeof d!="function")&&(d={});E<v;++E)if(m=arguments[E],m!=null)for(_ in m)o=d[_],r=m[_],d!==r&&(y&&r&&(g(r)||(s=w(r)))?(s?(s=!1,c=o&&w(o)?o:[]):c=o&&g(o)?o:{},d[_]=h(y,c,r)):typeof r<"u"&&(d[_]=r));return d}},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var p=function(){function k(x,N){for(var M=0;M<N.length;M++){var I=N[M];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(x,I.key,I)}}return function(x,N,M){return N&&k(x.prototype,N),M&&k(x,M),x}}(),w=function k(x,N,M){x===null&&(x=Function.prototype);var I=Object.getOwnPropertyDescriptor(x,N);if(I===void 0){var U=Object.getPrototypeOf(x);return U===null?void 0:k(U,N,M)}else{if("value"in I)return I.value;var Y=I.get;return Y===void 0?void 0:Y.call(M)}},g=a(3),h=u(g),m=a(2),_=u(m),o=a(0),r=u(o),s=a(16),c=u(s),d=a(6),E=u(d),v=a(7),y=u(v);function u(k){return k&&k.__esModule?k:{default:k}}function l(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function b(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function O(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}var S=1,C=function(k){O(x,k);function x(){return l(this,x),b(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return p(x,[{key:"attach",value:function(){w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"attach",this).call(this),this.attributes=new r.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new _.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(M,I){var U=r.default.query(M,r.default.Scope.BLOCK_ATTRIBUTE);U!=null&&this.attributes.attribute(U,I)}},{key:"formatAt",value:function(M,I,U,Y){this.format(U,Y)}},{key:"insertAt",value:function(M,I,U){if(typeof I=="string"&&I.endsWith(`
`)){var Y=r.default.create(L.blotName);this.parent.insertBefore(Y,M===0?this:this.next),Y.insertAt(0,I.slice(0,-1))}else w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,M,I,U)}}]),x}(r.default.Embed);C.scope=r.default.Scope.BLOCK_BLOT;var L=function(k){O(x,k);function x(N){l(this,x);var M=b(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,N));return M.cache={},M}return p(x,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(r.default.Leaf).reduce(function(M,I){return I.length()===0?M:M.insert(I.value(),A(I))},new _.default).insert(`
`,A(this))),this.cache.delta}},{key:"deleteAt",value:function(M,I){w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"deleteAt",this).call(this,M,I),this.cache={}}},{key:"formatAt",value:function(M,I,U,Y){I<=0||(r.default.query(U,r.default.Scope.BLOCK)?M+I===this.length()&&this.format(U,Y):w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"formatAt",this).call(this,M,Math.min(I,this.length()-M-1),U,Y),this.cache={})}},{key:"insertAt",value:function(M,I,U){if(U!=null)return w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,M,I,U);if(I.length!==0){var Y=I.split(`
`),nt=Y.shift();nt.length>0&&(M<this.length()-1||this.children.tail==null?w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertAt",this).call(this,Math.min(M,this.length()-1),nt):this.children.tail.insertAt(this.children.tail.length(),nt),this.cache={});var z=this;Y.reduce(function(V,P){return z=z.split(V,!0),z.insertAt(0,P),P.length},M+nt.length)}}},{key:"insertBefore",value:function(M,I){var U=this.children.head;w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"insertBefore",this).call(this,M,I),U instanceof c.default&&U.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"length",this).call(this)+S),this.cache.length}},{key:"moveChildren",value:function(M,I){w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"moveChildren",this).call(this,M,I),this.cache={}}},{key:"optimize",value:function(M){w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"optimize",this).call(this,M),this.cache={}}},{key:"path",value:function(M){return w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"path",this).call(this,M,!0)}},{key:"removeChild",value:function(M){w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"removeChild",this).call(this,M),this.cache={}}},{key:"split",value:function(M){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(I&&(M===0||M>=this.length()-S)){var U=this.clone();return M===0?(this.parent.insertBefore(U,this),this):(this.parent.insertBefore(U,this.next),U)}else{var Y=w(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"split",this).call(this,M,I);return this.cache={},Y}}}]),x}(r.default.Block);L.blotName="block",L.tagName="P",L.defaultChild="break",L.allowedChildren=[E.default,r.default.Embed,y.default];function A(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(x=(0,h.default)(x,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?x:A(k.parent,x)}n.bubbleFormats=A,n.BlockEmbed=C,n.default=L},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},w=function(){function z(V,P){var H=[],F=!0,J=!1,j=void 0;try{for(var q=V[Symbol.iterator](),K;!(F=(K=q.next()).done)&&(H.push(K.value),!(P&&H.length===P));F=!0);}catch(B){J=!0,j=B}finally{try{!F&&q.return&&q.return()}finally{if(J)throw j}}return H}return function(V,P){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return z(V,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function z(V,P){for(var H=0;H<P.length;H++){var F=P[H];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(V,F.key,F)}}return function(V,P,H){return P&&z(V.prototype,P),H&&z(V,H),V}}();a(50);var h=a(2),m=A(h),_=a(14),o=A(_),r=a(8),s=A(r),c=a(9),d=A(c),E=a(0),v=A(E),y=a(15),u=A(y),l=a(3),b=A(l),O=a(10),S=A(O),C=a(34),L=A(C);function A(z){return z&&z.__esModule?z:{default:z}}function k(z,V,P){return V in z?Object.defineProperty(z,V,{value:P,enumerable:!0,configurable:!0,writable:!0}):z[V]=P,z}function x(z,V){if(!(z instanceof V))throw new TypeError("Cannot call a class as a function")}var N=(0,S.default)("quill"),M=function(){g(z,null,[{key:"debug",value:function(P){P===!0&&(P="log"),S.default.level(P)}},{key:"find",value:function(P){return P.__quill||v.default.find(P)}},{key:"import",value:function(P){return this.imports[P]==null&&N.error("Cannot import "+P+". Are you sure it was registered?"),this.imports[P]}},{key:"register",value:function(P,H){var F=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof P!="string"){var j=P.attrName||P.blotName;typeof j=="string"?this.register("formats/"+j,P,H):Object.keys(P).forEach(function(q){F.register(q,P[q],H)})}else this.imports[P]!=null&&!J&&N.warn("Overwriting "+P+" with",H),this.imports[P]=H,(P.startsWith("blots/")||P.startsWith("formats/"))&&H.blotName!=="abstract"?v.default.register(H):P.startsWith("modules")&&typeof H.register=="function"&&H.register()}}]);function z(V){var P=this,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x(this,z),this.options=I(V,H),this.container=this.options.container,this.container==null)return N.error("Invalid Quill container",V);this.options.debug&&z.debug(this.options.debug);var F=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new s.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new o.default(this.scroll),this.selection=new u.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(s.default.events.EDITOR_CHANGE,function(j){j===s.default.events.TEXT_CHANGE&&P.root.classList.toggle("ql-blank",P.editor.isBlank())}),this.emitter.on(s.default.events.SCROLL_UPDATE,function(j,q){var K=P.selection.lastRange,B=K&&K.length===0?K.index:void 0;U.call(P,function(){return P.editor.update(null,q,B)},j)});var J=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+F+"<p><br></p></div>");this.setContents(J),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return g(z,[{key:"addContainer",value:function(P){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof P=="string"){var F=P;P=document.createElement("div"),P.classList.add(F)}return this.container.insertBefore(P,H),P}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(P,H,F){var J=this,j=Y(P,H,F),q=w(j,4);return P=q[0],H=q[1],F=q[3],U.call(this,function(){return J.editor.deleteText(P,H)},F,P,-1*H)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(P),this.container.classList.toggle("ql-disabled",!P)}},{key:"focus",value:function(){var P=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=P,this.scrollIntoView()}},{key:"format",value:function(P,H){var F=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.default.sources.API;return U.call(this,function(){var j=F.getSelection(!0),q=new m.default;if(j==null)return q;if(v.default.query(P,v.default.Scope.BLOCK))q=F.editor.formatLine(j.index,j.length,k({},P,H));else{if(j.length===0)return F.selection.format(P,H),q;q=F.editor.formatText(j.index,j.length,k({},P,H))}return F.setSelection(j,s.default.sources.SILENT),q},J)}},{key:"formatLine",value:function(P,H,F,J,j){var q=this,K=void 0,B=Y(P,H,F,J,j),W=w(B,4);return P=W[0],H=W[1],K=W[2],j=W[3],U.call(this,function(){return q.editor.formatLine(P,H,K)},j,P,0)}},{key:"formatText",value:function(P,H,F,J,j){var q=this,K=void 0,B=Y(P,H,F,J,j),W=w(B,4);return P=W[0],H=W[1],K=W[2],j=W[3],U.call(this,function(){return q.editor.formatText(P,H,K)},j,P,0)}},{key:"getBounds",value:function(P){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=void 0;typeof P=="number"?F=this.selection.getBounds(P,H):F=this.selection.getBounds(P.index,P.length);var J=this.container.getBoundingClientRect();return{bottom:F.bottom-J.top,height:F.height,left:F.left-J.left,right:F.right-J.left,top:F.top-J.top,width:F.width}}},{key:"getContents",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-P,F=Y(P,H),J=w(F,2);return P=J[0],H=J[1],this.editor.getContents(P,H)}},{key:"getFormat",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof P=="number"?this.editor.getFormat(P,H):this.editor.getFormat(P.index,P.length)}},{key:"getIndex",value:function(P){return P.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(P){return this.scroll.leaf(P)}},{key:"getLine",value:function(P){return this.scroll.line(P)}},{key:"getLines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof P!="number"?this.scroll.lines(P.index,P.length):this.scroll.lines(P,H)}},{key:"getModule",value:function(P){return this.theme.modules[P]}},{key:"getSelection",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return P&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-P,F=Y(P,H),J=w(F,2);return P=J[0],H=J[1],this.editor.getText(P,H)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(P,H,F){var J=this,j=arguments.length>3&&arguments[3]!==void 0?arguments[3]:z.sources.API;return U.call(this,function(){return J.editor.insertEmbed(P,H,F)},j,P)}},{key:"insertText",value:function(P,H,F,J,j){var q=this,K=void 0,B=Y(P,0,F,J,j),W=w(B,4);return P=W[0],K=W[2],j=W[3],U.call(this,function(){return q.editor.insertText(P,H,K)},j,P,H.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(P,H,F){this.clipboard.dangerouslyPasteHTML(P,H,F)}},{key:"removeFormat",value:function(P,H,F){var J=this,j=Y(P,H,F),q=w(j,4);return P=q[0],H=q[1],F=q[3],U.call(this,function(){return J.editor.removeFormat(P,H)},F,P)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(P){var H=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.default.sources.API;return U.call(this,function(){P=new m.default(P);var J=H.getLength(),j=H.editor.deleteText(0,J),q=H.editor.applyDelta(P),K=q.ops[q.ops.length-1];K!=null&&typeof K.insert=="string"&&K.insert[K.insert.length-1]===`
`&&(H.editor.deleteText(H.getLength()-1,1),q.delete(1));var B=j.compose(q);return B},F)}},{key:"setSelection",value:function(P,H,F){if(P==null)this.selection.setRange(null,H||z.sources.API);else{var J=Y(P,H,F),j=w(J,4);P=j[0],H=j[1],F=j[3],this.selection.setRange(new y.Range(P,H),F),F!==s.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(P){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.default.sources.API,F=new m.default().insert(P);return this.setContents(F,H)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.default.sources.USER,H=this.scroll.update(P);return this.selection.update(P),H}},{key:"updateContents",value:function(P){var H=this,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.default.sources.API;return U.call(this,function(){return P=new m.default(P),H.editor.applyDelta(P,F)},F,!0)}}]),z}();M.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},M.events=s.default.events,M.sources=s.default.sources,M.version="1.3.4",M.imports={delta:m.default,parchment:v.default,"core/module":d.default,"core/theme":L.default};function I(z,V){if(V=(0,b.default)(!0,{container:z,modules:{clipboard:!0,keyboard:!0,history:!0}},V),!V.theme||V.theme===M.DEFAULTS.theme)V.theme=L.default;else if(V.theme=M.import("themes/"+V.theme),V.theme==null)throw new Error("Invalid theme "+V.theme+". Did you register it?");var P=(0,b.default)(!0,{},V.theme.DEFAULTS);[P,V].forEach(function(J){J.modules=J.modules||{},Object.keys(J.modules).forEach(function(j){J.modules[j]===!0&&(J.modules[j]={})})});var H=Object.keys(P.modules).concat(Object.keys(V.modules)),F=H.reduce(function(J,j){var q=M.import("modules/"+j);return q==null?N.error("Cannot load "+j+" module. Are you sure you registered it?"):J[j]=q.DEFAULTS||{},J},{});return V.modules!=null&&V.modules.toolbar&&V.modules.toolbar.constructor!==Object&&(V.modules.toolbar={container:V.modules.toolbar}),V=(0,b.default)(!0,{},M.DEFAULTS,{modules:F},P,V),["bounds","container","scrollingContainer"].forEach(function(J){typeof V[J]=="string"&&(V[J]=document.querySelector(V[J]))}),V.modules=Object.keys(V.modules).reduce(function(J,j){return V.modules[j]&&(J[j]=V.modules[j]),J},{}),V}function U(z,V,P,H){if(this.options.strict&&!this.isEnabled()&&V===s.default.sources.USER)return new m.default;var F=P==null?null:this.getSelection(),J=this.editor.delta,j=z();if(F!=null&&(P===!0&&(P=F.index),H==null?F=nt(F,j,V):H!==0&&(F=nt(F,P,H,V)),this.setSelection(F,s.default.sources.SILENT)),j.length()>0){var q,K=[s.default.events.TEXT_CHANGE,j,J,V];if((q=this.emitter).emit.apply(q,[s.default.events.EDITOR_CHANGE].concat(K)),V!==s.default.sources.SILENT){var B;(B=this.emitter).emit.apply(B,K)}}return j}function Y(z,V,P,H,F){var J={};return typeof z.index=="number"&&typeof z.length=="number"?typeof V!="number"?(F=H,H=P,P=V,V=z.length,z=z.index):(V=z.length,z=z.index):typeof V!="number"&&(F=H,H=P,P=V,V=0),(typeof P>"u"?"undefined":p(P))==="object"?(J=P,F=H):typeof P=="string"&&(H!=null?J[P]=H:F=P),F=F||s.default.sources.API,[z,V,J,F]}function nt(z,V,P,H){if(z==null)return null;var F=void 0,J=void 0;if(V instanceof m.default){var j=[z.index,z.index+z.length].map(function(W){return V.transformPosition(W,H!==s.default.sources.USER)}),q=w(j,2);F=q[0],J=q[1]}else{var K=[z.index,z.index+z.length].map(function(W){return W<V||W===V&&H===s.default.sources.USER?W:P>=0?W+P:Math.max(V,W+P)}),B=w(K,2);F=B[0],J=B[1]}return new y.Range(F,J-F)}n.expandConfig=I,n.overload=Y,n.default=M},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function E(v,y){for(var u=0;u<y.length;u++){var l=y[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(v,l.key,l)}}return function(v,y,u){return y&&E(v.prototype,y),u&&E(v,u),v}}(),w=function E(v,y,u){v===null&&(v=Function.prototype);var l=Object.getOwnPropertyDescriptor(v,y);if(l===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:E(b,y,u)}else{if("value"in l)return l.value;var O=l.get;return O===void 0?void 0:O.call(u)}},g=a(7),h=o(g),m=a(0),_=o(m);function o(E){return E&&E.__esModule?E:{default:E}}function r(E,v){if(!(E instanceof v))throw new TypeError("Cannot call a class as a function")}function s(E,v){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:E}function c(E,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);E.prototype=Object.create(v&&v.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(E,v):E.__proto__=v)}var d=function(E){c(v,E);function v(){return r(this,v),s(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return p(v,[{key:"formatAt",value:function(u,l,b,O){if(v.compare(this.statics.blotName,b)<0&&_.default.query(b,_.default.Scope.BLOT)){var S=this.isolate(u,l);O&&S.wrap(b,O)}else w(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,u,l,b,O)}},{key:"optimize",value:function(u){if(w(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,u),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var l=this.parent.isolate(this.offset(),this.length());this.moveChildren(l),l.wrap(this)}}}],[{key:"compare",value:function(u,l){var b=v.order.indexOf(u),O=v.order.indexOf(l);return b>=0||O>=0?b-O:u===l?0:u<l?-1:1}}]),v}(_.default.Inline);d.allowedChildren=[d,_.default.Embed,h.default],d.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=d},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(0),w=g(p);function g(r){return r&&r.__esModule?r:{default:r}}function h(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function m(r,s){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:r}function _(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(r,s):r.__proto__=s)}var o=function(r){_(s,r);function s(){return h(this,s),m(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(w.default.Text);n.default=o},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function y(u,l){for(var b=0;b<l.length;b++){var O=l[b];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(u,O.key,O)}}return function(u,l,b){return l&&y(u.prototype,l),b&&y(u,b),u}}(),w=function y(u,l,b){u===null&&(u=Function.prototype);var O=Object.getOwnPropertyDescriptor(u,l);if(O===void 0){var S=Object.getPrototypeOf(u);return S===null?void 0:y(S,l,b)}else{if("value"in O)return O.value;var C=O.get;return C===void 0?void 0:C.call(b)}},g=a(54),h=o(g),m=a(10),_=o(m);function o(y){return y&&y.__esModule?y:{default:y}}function r(y,u){if(!(y instanceof u))throw new TypeError("Cannot call a class as a function")}function s(y,u){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:y}function c(y,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);y.prototype=Object.create(u&&u.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(y,u):y.__proto__=u)}var d=(0,_.default)("quill:events"),E=["selectionchange","mousedown","mouseup","click"];E.forEach(function(y){document.addEventListener(y,function(){for(var u=arguments.length,l=Array(u),b=0;b<u;b++)l[b]=arguments[b];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(O){if(O.__quill&&O.__quill.emitter){var S;(S=O.__quill.emitter).handleDOM.apply(S,l)}})})});var v=function(y){c(u,y);function u(){r(this,u);var l=s(this,(u.__proto__||Object.getPrototypeOf(u)).call(this));return l.listeners={},l.on("error",d.error),l}return p(u,[{key:"emit",value:function(){d.log.apply(d,arguments),w(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(b){for(var O=arguments.length,S=Array(O>1?O-1:0),C=1;C<O;C++)S[C-1]=arguments[C];(this.listeners[b.type]||[]).forEach(function(L){var A=L.node,k=L.handler;(b.target===A||A.contains(b.target))&&k.apply(void 0,[b].concat(S))})}},{key:"listenDOM",value:function(b,O,S){this.listeners[b]||(this.listeners[b]=[]),this.listeners[b].push({node:O,handler:S})}}]),u}(h.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},n.default=v},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});function p(g,h){if(!(g instanceof h))throw new TypeError("Cannot call a class as a function")}var w=function g(h){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};p(this,g),this.quill=h,this.options=m};w.DEFAULTS={},n.default=w},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=["error","warn","log","info"],w="warn";function g(m){if(p.indexOf(m)<=p.indexOf(w)){for(var _,o=arguments.length,r=Array(o>1?o-1:0),s=1;s<o;s++)r[s-1]=arguments[s];(_=console)[m].apply(_,r)}}function h(m){return p.reduce(function(_,o){return _[o]=g.bind(console,o,m),_},{})}g.level=h.level=function(m){w=m},n.default=h},function(e,n,a){var p=Array.prototype.slice,w=a(52),g=a(53),h=e.exports=function(r,s,c){return c||(c={}),r===s?!0:r instanceof Date&&s instanceof Date?r.getTime()===s.getTime():!r||!s||typeof r!="object"&&typeof s!="object"?c.strict?r===s:r==s:o(r,s,c)};function m(r){return r==null}function _(r){return!(!r||typeof r!="object"||typeof r.length!="number"||typeof r.copy!="function"||typeof r.slice!="function"||r.length>0&&typeof r[0]!="number")}function o(r,s,c){var d,E;if(m(r)||m(s)||r.prototype!==s.prototype)return!1;if(g(r))return g(s)?(r=p.call(r),s=p.call(s),h(r,s,c)):!1;if(_(r)){if(!_(s)||r.length!==s.length)return!1;for(d=0;d<r.length;d++)if(r[d]!==s[d])return!1;return!0}try{var v=w(r),y=w(s)}catch{return!1}if(v.length!=y.length)return!1;for(v.sort(),y.sort(),d=v.length-1;d>=0;d--)if(v[d]!=y[d])return!1;for(d=v.length-1;d>=0;d--)if(E=v[d],!h(r[E],s[E],c))return!1;return typeof r==typeof s}},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(1),w=function(){function g(h,m,_){_===void 0&&(_={}),this.attrName=h,this.keyName=m;var o=p.Scope.TYPE&p.Scope.ATTRIBUTE;_.scope!=null?this.scope=_.scope&p.Scope.LEVEL|o:this.scope=p.Scope.ATTRIBUTE,_.whitelist!=null&&(this.whitelist=_.whitelist)}return g.keys=function(h){return[].map.call(h.attributes,function(m){return m.name})},g.prototype.add=function(h,m){return this.canAdd(h,m)?(h.setAttribute(this.keyName,m),!0):!1},g.prototype.canAdd=function(h,m){var _=p.query(h,p.Scope.BLOT&(this.scope|p.Scope.TYPE));return _!=null&&(this.whitelist==null||this.whitelist.indexOf(m)>-1)},g.prototype.remove=function(h){h.removeAttribute(this.keyName)},g.prototype.value=function(h){var m=h.getAttribute(this.keyName);return this.canAdd(h,m)?m:""},g}();n.default=w},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var p=function(){function C(L,A){var k=[],x=!0,N=!1,M=void 0;try{for(var I=L[Symbol.iterator](),U;!(x=(U=I.next()).done)&&(k.push(U.value),!(A&&k.length===A));x=!0);}catch(Y){N=!0,M=Y}finally{try{!x&&I.return&&I.return()}finally{if(N)throw M}}return k}return function(L,A){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return C(L,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function C(L,A){for(var k=0;k<A.length;k++){var x=A[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(L,x.key,x)}}return function(L,A,k){return A&&C(L.prototype,A),k&&C(L,k),L}}(),g=function C(L,A,k){L===null&&(L=Function.prototype);var x=Object.getOwnPropertyDescriptor(L,A);if(x===void 0){var N=Object.getPrototypeOf(L);return N===null?void 0:C(N,A,k)}else{if("value"in x)return x.value;var M=x.get;return M===void 0?void 0:M.call(k)}},h=a(2),m=y(h),_=a(0),o=y(_),r=a(4),s=y(r),c=a(6),d=y(c),E=a(7),v=y(E);function y(C){return C&&C.__esModule?C:{default:C}}function u(C,L){if(!(C instanceof L))throw new TypeError("Cannot call a class as a function")}function l(C,L){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:C}function b(C,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);C.prototype=Object.create(L&&L.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(C,L):C.__proto__=L)}var O=function(C){b(L,C);function L(){return u(this,L),l(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return L}(d.default);O.blotName="code",O.tagName="CODE";var S=function(C){b(L,C);function L(){return u(this,L),l(this,(L.__proto__||Object.getPrototypeOf(L)).apply(this,arguments))}return w(L,[{key:"delta",value:function(){var k=this,x=this.domNode.textContent;return x.endsWith(`
`)&&(x=x.slice(0,-1)),x.split(`
`).reduce(function(N,M){return N.insert(M).insert(`
`,k.formats())},new m.default)}},{key:"format",value:function(k,x){if(!(k===this.statics.blotName&&x)){var N=this.descendant(v.default,this.length()-1),M=p(N,1),I=M[0];I!=null&&I.deleteAt(I.length()-1,1),g(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"format",this).call(this,k,x)}}},{key:"formatAt",value:function(k,x,N,M){if(x!==0&&!(o.default.query(N,o.default.Scope.BLOCK)==null||N===this.statics.blotName&&M===this.statics.formats(this.domNode))){var I=this.newlineIndex(k);if(!(I<0||I>=k+x)){var U=this.newlineIndex(k,!0)+1,Y=I-U+1,nt=this.isolate(U,Y),z=nt.next;nt.format(N,M),z instanceof L&&z.formatAt(0,k-U+x-Y,N,M)}}}},{key:"insertAt",value:function(k,x,N){if(N==null){var M=this.descendant(v.default,k),I=p(M,2),U=I[0],Y=I[1];U.insertAt(Y,x)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(x)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var N=this.domNode.textContent.slice(k).indexOf(`
`);return N>-1?k+N:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(o.default.create("text",`
`)),g(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"optimize",this).call(this,k);var x=this.next;x!=null&&x.prev===this&&x.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===x.statics.formats(x.domNode)&&(x.optimize(k),x.moveChildren(this),x.remove())}},{key:"replace",value:function(k){g(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(x){var N=o.default.find(x);N==null?x.parentNode.removeChild(x):N instanceof o.default.Embed?N.remove():N.unwrap()})}}],[{key:"create",value:function(k){var x=g(L.__proto__||Object.getPrototypeOf(L),"create",this).call(this,k);return x.setAttribute("spellcheck",!1),x}},{key:"formats",value:function(){return!0}}]),L}(s.default);S.blotName="code-block",S.tagName="PRE",S.TAB="  ",n.Code=O,n.default=S},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z},w=function(){function z(V,P){var H=[],F=!0,J=!1,j=void 0;try{for(var q=V[Symbol.iterator](),K;!(F=(K=q.next()).done)&&(H.push(K.value),!(P&&H.length===P));F=!0);}catch(B){J=!0,j=B}finally{try{!F&&q.return&&q.return()}finally{if(J)throw j}}return H}return function(V,P){if(Array.isArray(V))return V;if(Symbol.iterator in Object(V))return z(V,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function z(V,P){for(var H=0;H<P.length;H++){var F=P[H];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(V,F.key,F)}}return function(V,P,H){return P&&z(V.prototype,P),H&&z(V,H),V}}(),h=a(2),m=x(h),_=a(20),o=x(_),r=a(0),s=x(r),c=a(13),d=x(c),E=a(23),v=x(E),y=a(4),u=x(y),l=a(16),b=x(l),O=a(21),S=x(O),C=a(11),L=x(C),A=a(3),k=x(A);function x(z){return z&&z.__esModule?z:{default:z}}function N(z,V,P){return V in z?Object.defineProperty(z,V,{value:P,enumerable:!0,configurable:!0,writable:!0}):z[V]=P,z}function M(z,V){if(!(z instanceof V))throw new TypeError("Cannot call a class as a function")}var I=/^[ -~]*$/,U=function(){function z(V){M(this,z),this.scroll=V,this.delta=this.getDelta()}return g(z,[{key:"applyDelta",value:function(P){var H=this,F=!1;this.scroll.update();var J=this.scroll.length();return this.scroll.batchStart(),P=nt(P),P.reduce(function(j,q){var K=q.retain||q.delete||q.insert.length||1,B=q.attributes||{};if(q.insert!=null){if(typeof q.insert=="string"){var W=q.insert;W.endsWith(`
`)&&F&&(F=!1,W=W.slice(0,-1)),j>=J&&!W.endsWith(`
`)&&(F=!0),H.scroll.insertAt(j,W);var it=H.scroll.line(j),ot=w(it,2),st=ot[0],ct=ot[1],ht=(0,k.default)({},(0,y.bubbleFormats)(st));if(st instanceof u.default){var Z=st.descendant(s.default.Leaf,ct),et=w(Z,1),lt=et[0];ht=(0,k.default)(ht,(0,y.bubbleFormats)(lt))}B=o.default.attributes.diff(ht,B)||{}}else if(p(q.insert)==="object"){var X=Object.keys(q.insert)[0];if(X==null)return j;H.scroll.insertAt(j,X,q.insert[X])}J+=K}return Object.keys(B).forEach(function(D){H.scroll.formatAt(j,K,D,B[D])}),j+K},0),P.reduce(function(j,q){return typeof q.delete=="number"?(H.scroll.deleteAt(j,q.delete),j):j+(q.retain||q.insert.length||1)},0),this.scroll.batchEnd(),this.update(P)}},{key:"deleteText",value:function(P,H){return this.scroll.deleteAt(P,H),this.update(new m.default().retain(P).delete(H))}},{key:"formatLine",value:function(P,H){var F=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(J).forEach(function(j){if(!(F.scroll.whitelist!=null&&!F.scroll.whitelist[j])){var q=F.scroll.lines(P,Math.max(H,1)),K=H;q.forEach(function(B){var W=B.length();if(!(B instanceof d.default))B.format(j,J[j]);else{var it=P-B.offset(F.scroll),ot=B.newlineIndex(it+K)-it+1;B.formatAt(it,ot,j,J[j])}K-=W})}}),this.scroll.optimize(),this.update(new m.default().retain(P).retain(H,(0,S.default)(J)))}},{key:"formatText",value:function(P,H){var F=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(J).forEach(function(j){F.scroll.formatAt(P,H,j,J[j])}),this.update(new m.default().retain(P).retain(H,(0,S.default)(J)))}},{key:"getContents",value:function(P,H){return this.delta.slice(P,P+H)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(P,H){return P.concat(H.delta())},new m.default)}},{key:"getFormat",value:function(P){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,F=[],J=[];H===0?this.scroll.path(P).forEach(function(q){var K=w(q,1),B=K[0];B instanceof u.default?F.push(B):B instanceof s.default.Leaf&&J.push(B)}):(F=this.scroll.lines(P,H),J=this.scroll.descendants(s.default.Leaf,P,H));var j=[F,J].map(function(q){if(q.length===0)return{};for(var K=(0,y.bubbleFormats)(q.shift());Object.keys(K).length>0;){var B=q.shift();if(B==null)return K;K=Y((0,y.bubbleFormats)(B),K)}return K});return k.default.apply(k.default,j)}},{key:"getText",value:function(P,H){return this.getContents(P,H).filter(function(F){return typeof F.insert=="string"}).map(function(F){return F.insert}).join("")}},{key:"insertEmbed",value:function(P,H,F){return this.scroll.insertAt(P,H,F),this.update(new m.default().retain(P).insert(N({},H,F)))}},{key:"insertText",value:function(P,H){var F=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return H=H.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(P,H),Object.keys(J).forEach(function(j){F.scroll.formatAt(P,H.length,j,J[j])}),this.update(new m.default().retain(P).insert(H,(0,S.default)(J)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var P=this.scroll.children.head;return P.statics.blotName!==u.default.blotName||P.children.length>1?!1:P.children.head instanceof b.default}},{key:"removeFormat",value:function(P,H){var F=this.getText(P,H),J=this.scroll.line(P+H),j=w(J,2),q=j[0],K=j[1],B=0,W=new m.default;q!=null&&(q instanceof d.default?B=q.newlineIndex(K)-K+1:B=q.length()-K,W=q.delta().slice(K,K+B-1).insert(`
`));var it=this.getContents(P,H+B),ot=it.diff(new m.default().insert(F).concat(W)),st=new m.default().retain(P).concat(ot);return this.applyDelta(st)}},{key:"update",value:function(P){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,J=this.delta;if(H.length===1&&H[0].type==="characterData"&&H[0].target.data.match(I)&&s.default.find(H[0].target)){var j=s.default.find(H[0].target),q=(0,y.bubbleFormats)(j),K=j.offset(this.scroll),B=H[0].oldValue.replace(v.default.CONTENTS,""),W=new m.default().insert(B),it=new m.default().insert(j.value()),ot=new m.default().retain(K).concat(W.diff(it,F));P=ot.reduce(function(st,ct){return ct.insert?st.insert(ct.insert,q):st.push(ct)},new m.default),this.delta=J.compose(P)}else this.delta=this.getDelta(),(!P||!(0,L.default)(J.compose(P),this.delta))&&(P=J.diff(this.delta,F));return P}}]),z}();function Y(z,V){return Object.keys(V).reduce(function(P,H){return z[H]==null||(V[H]===z[H]?P[H]=V[H]:Array.isArray(V[H])?V[H].indexOf(z[H])<0&&(P[H]=V[H].concat([z[H]])):P[H]=[V[H],z[H]]),P},{})}function nt(z){return z.reduce(function(V,P){if(P.insert===1){var H=(0,S.default)(P.attributes);return delete H.image,V.insert({image:P.attributes.image},H)}if(P.attributes!=null&&(P.attributes.list===!0||P.attributes.bullet===!0)&&(P=(0,S.default)(P),P.attributes.list?P.attributes.list="ordered":(P.attributes.list="bullet",delete P.attributes.bullet)),typeof P.insert=="string"){var F=P.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return V.insert(F,P.attributes)}return V.push(P)},new m.default)}n.default=U},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var p=function(){function C(L,A){var k=[],x=!0,N=!1,M=void 0;try{for(var I=L[Symbol.iterator](),U;!(x=(U=I.next()).done)&&(k.push(U.value),!(A&&k.length===A));x=!0);}catch(Y){N=!0,M=Y}finally{try{!x&&I.return&&I.return()}finally{if(N)throw M}}return k}return function(L,A){if(Array.isArray(L))return L;if(Symbol.iterator in Object(L))return C(L,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function C(L,A){for(var k=0;k<A.length;k++){var x=A[k];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(L,x.key,x)}}return function(L,A,k){return A&&C(L.prototype,A),k&&C(L,k),L}}(),g=a(0),h=v(g),m=a(21),_=v(m),o=a(11),r=v(o),s=a(8),c=v(s),d=a(10),E=v(d);function v(C){return C&&C.__esModule?C:{default:C}}function y(C){if(Array.isArray(C)){for(var L=0,A=Array(C.length);L<C.length;L++)A[L]=C[L];return A}else return Array.from(C)}function u(C,L){if(!(C instanceof L))throw new TypeError("Cannot call a class as a function")}var l=(0,E.default)("quill:selection"),b=function C(L){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;u(this,C),this.index=L,this.length=A},O=function(){function C(L,A){var k=this;u(this,C),this.emitter=A,this.scroll=L,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new b(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,c.default.sources.USER),1)}),this.emitter.on(c.default.events.EDITOR_CHANGE,function(x,N){x===c.default.events.TEXT_CHANGE&&N.length()>0&&k.update(c.default.sources.SILENT)}),this.emitter.on(c.default.events.SCROLL_BEFORE_UPDATE,function(){if(k.hasFocus()){var x=k.getNativeRange();x!=null&&x.start.node!==k.cursor.textNode&&k.emitter.once(c.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(x.start.node,x.start.offset,x.end.node,x.end.offset)}catch{}})}}),this.emitter.on(c.default.events.SCROLL_OPTIMIZE,function(x,N){if(N.range){var M=N.range,I=M.startNode,U=M.startOffset,Y=M.endNode,nt=M.endOffset;k.setNativeRange(I,U,Y,nt)}}),this.update(c.default.sources.SILENT)}return w(C,[{key:"handleComposition",value:function(){var A=this;this.root.addEventListener("compositionstart",function(){A.composing=!0}),this.root.addEventListener("compositionend",function(){if(A.composing=!1,A.cursor.parent){var k=A.cursor.restore();if(!k)return;setTimeout(function(){A.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var A=this;this.emitter.listenDOM("mousedown",document.body,function(){A.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){A.mouseDown=!1,A.update(c.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(A,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[A])){this.scroll.update();var x=this.getNativeRange();if(!(x==null||!x.native.collapsed||h.default.query(A,h.default.Scope.BLOCK))){if(x.start.node!==this.cursor.textNode){var N=h.default.find(x.start.node,!1);if(N==null)return;if(N instanceof h.default.Leaf){var M=N.split(x.start.offset);N.parent.insertBefore(this.cursor,M)}else N.insertBefore(this.cursor,x.start.node);this.cursor.attach()}this.cursor.format(A,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(A){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,x=this.scroll.length();A=Math.min(A,x-1),k=Math.min(A+k,x-1)-A;var N=void 0,M=this.scroll.leaf(A),I=p(M,2),U=I[0],Y=I[1];if(U==null)return null;var nt=U.position(Y,!0),z=p(nt,2);N=z[0],Y=z[1];var V=document.createRange();if(k>0){V.setStart(N,Y);var P=this.scroll.leaf(A+k),H=p(P,2);if(U=H[0],Y=H[1],U==null)return null;var F=U.position(Y,!0),J=p(F,2);return N=J[0],Y=J[1],V.setEnd(N,Y),V.getBoundingClientRect()}else{var j="left",q=void 0;return N instanceof Text?(Y<N.data.length?(V.setStart(N,Y),V.setEnd(N,Y+1)):(V.setStart(N,Y-1),V.setEnd(N,Y),j="right"),q=V.getBoundingClientRect()):(q=U.domNode.getBoundingClientRect(),Y>0&&(j="right")),{bottom:q.top+q.height,height:q.height,left:q[j],right:q[j],top:q.top,width:0}}}},{key:"getNativeRange",value:function(){var A=document.getSelection();if(A==null||A.rangeCount<=0)return null;var k=A.getRangeAt(0);if(k==null)return null;var x=this.normalizeNative(k);return l.info("getNativeRange",x),x}},{key:"getRange",value:function(){var A=this.getNativeRange();if(A==null)return[null,null];var k=this.normalizedToRange(A);return[k,A]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(A){var k=this,x=[[A.start.node,A.start.offset]];A.native.collapsed||x.push([A.end.node,A.end.offset]);var N=x.map(function(U){var Y=p(U,2),nt=Y[0],z=Y[1],V=h.default.find(nt,!0),P=V.offset(k.scroll);return z===0?P:V instanceof h.default.Container?P+V.length():P+V.index(nt,z)}),M=Math.min(Math.max.apply(Math,y(N)),this.scroll.length()-1),I=Math.min.apply(Math,[M].concat(y(N)));return new b(I,M-I)}},{key:"normalizeNative",value:function(A){if(!S(this.root,A.startContainer)||!A.collapsed&&!S(this.root,A.endContainer))return null;var k={start:{node:A.startContainer,offset:A.startOffset},end:{node:A.endContainer,offset:A.endOffset},native:A};return[k.start,k.end].forEach(function(x){for(var N=x.node,M=x.offset;!(N instanceof Text)&&N.childNodes.length>0;)if(N.childNodes.length>M)N=N.childNodes[M],M=0;else if(N.childNodes.length===M)N=N.lastChild,M=N instanceof Text?N.data.length:N.childNodes.length+1;else break;x.node=N,x.offset=M}),k}},{key:"rangeToNative",value:function(A){var k=this,x=A.collapsed?[A.index]:[A.index,A.index+A.length],N=[],M=this.scroll.length();return x.forEach(function(I,U){I=Math.min(M-1,I);var Y=void 0,nt=k.scroll.leaf(I),z=p(nt,2),V=z[0],P=z[1],H=V.position(P,U!==0),F=p(H,2);Y=F[0],P=F[1],N.push(Y,P)}),N.length<2&&(N=N.concat(N)),N}},{key:"scrollIntoView",value:function(A){var k=this.lastRange;if(k!=null){var x=this.getBounds(k.index,k.length);if(x!=null){var N=this.scroll.length()-1,M=this.scroll.line(Math.min(k.index,N)),I=p(M,1),U=I[0],Y=U;if(k.length>0){var nt=this.scroll.line(Math.min(k.index+k.length,N)),z=p(nt,1);Y=z[0]}if(!(U==null||Y==null)){var V=A.getBoundingClientRect();x.top<V.top?A.scrollTop-=V.top-x.top:x.bottom>V.bottom&&(A.scrollTop+=x.bottom-V.bottom)}}}}},{key:"setNativeRange",value:function(A,k){var x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:A,N=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,M=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(l.info("setNativeRange",A,k,x,N),!(A!=null&&(this.root.parentNode==null||A.parentNode==null||x.parentNode==null))){var I=document.getSelection();if(I!=null)if(A!=null){this.hasFocus()||this.root.focus();var U=(this.getNativeRange()||{}).native;if(U==null||M||A!==U.startContainer||k!==U.startOffset||x!==U.endContainer||N!==U.endOffset){A.tagName=="BR"&&(k=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode),x.tagName=="BR"&&(N=[].indexOf.call(x.parentNode.childNodes,x),x=x.parentNode);var Y=document.createRange();Y.setStart(A,k),Y.setEnd(x,N),I.removeAllRanges(),I.addRange(Y)}}else I.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(A){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default.sources.API;if(typeof k=="string"&&(x=k,k=!1),l.info("setRange",A),A!=null){var N=this.rangeToNative(A);this.setNativeRange.apply(this,y(N).concat([k]))}else this.setNativeRange(null);this.update(x)}},{key:"update",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c.default.sources.USER,k=this.lastRange,x=this.getRange(),N=p(x,2),M=N[0],I=N[1];if(this.lastRange=M,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,r.default)(k,this.lastRange)){var U;!this.composing&&I!=null&&I.native.collapsed&&I.start.node!==this.cursor.textNode&&this.cursor.restore();var Y=[c.default.events.SELECTION_CHANGE,(0,_.default)(this.lastRange),(0,_.default)(k),A];if((U=this.emitter).emit.apply(U,[c.default.events.EDITOR_CHANGE].concat(Y)),A!==c.default.sources.SILENT){var nt;(nt=this.emitter).emit.apply(nt,Y)}}}}]),C}();function S(C,L){try{L.parentNode}catch{return!1}return L instanceof Text&&(L=L.parentNode),C.contains(L)}n.Range=b,n.default=O},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function c(d,E){for(var v=0;v<E.length;v++){var y=E[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,E,v){return E&&c(d.prototype,E),v&&c(d,v),d}}(),w=function c(d,E,v){d===null&&(d=Function.prototype);var y=Object.getOwnPropertyDescriptor(d,E);if(y===void 0){var u=Object.getPrototypeOf(d);return u===null?void 0:c(u,E,v)}else{if("value"in y)return y.value;var l=y.get;return l===void 0?void 0:l.call(v)}},g=a(0),h=m(g);function m(c){return c&&c.__esModule?c:{default:c}}function _(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function r(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var s=function(c){r(d,c);function d(){return _(this,d),o(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return p(d,[{key:"insertInto",value:function(v,y){v.children.length===0?w(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"insertInto",this).call(this,v,y):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),d}(h.default.Embed);s.blotName="break",s.tagName="BR",n.default=s},function(e,n,a){var p=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var c in s)s.hasOwnProperty(c)&&(r[c]=s[c])};return function(r,s){o(r,s);function c(){this.constructor=r}r.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(44),g=a(30),h=a(1),m=function(o){p(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.appendChild=function(s){this.insertBefore(s)},r.prototype.attach=function(){var s=this;o.prototype.attach.call(this),this.children=new w.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(c){try{var d=_(c);s.insertBefore(d,s.children.head)}catch(E){if(E instanceof h.ParchmentError)return;throw E}})},r.prototype.deleteAt=function(s,c){if(s===0&&c===this.length())return this.remove();this.children.forEachAt(s,c,function(d,E,v){d.deleteAt(E,v)})},r.prototype.descendant=function(s,c){var d=this.children.find(c),E=d[0],v=d[1];return s.blotName==null&&s(E)||s.blotName!=null&&E instanceof s?[E,v]:E instanceof r?E.descendant(s,v):[null,-1]},r.prototype.descendants=function(s,c,d){c===void 0&&(c=0),d===void 0&&(d=Number.MAX_VALUE);var E=[],v=d;return this.children.forEachAt(c,d,function(y,u,l){(s.blotName==null&&s(y)||s.blotName!=null&&y instanceof s)&&E.push(y),y instanceof r&&(E=E.concat(y.descendants(s,u,v))),v-=l}),E},r.prototype.detach=function(){this.children.forEach(function(s){s.detach()}),o.prototype.detach.call(this)},r.prototype.formatAt=function(s,c,d,E){this.children.forEachAt(s,c,function(v,y,u){v.formatAt(y,u,d,E)})},r.prototype.insertAt=function(s,c,d){var E=this.children.find(s),v=E[0],y=E[1];if(v)v.insertAt(y,c,d);else{var u=d==null?h.create("text",c):h.create(c,d);this.appendChild(u)}},r.prototype.insertBefore=function(s,c){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(d){return s instanceof d}))throw new h.ParchmentError("Cannot insert "+s.statics.blotName+" into "+this.statics.blotName);s.insertInto(this,c)},r.prototype.length=function(){return this.children.reduce(function(s,c){return s+c.length()},0)},r.prototype.moveChildren=function(s,c){this.children.forEach(function(d){s.insertBefore(d,c)})},r.prototype.optimize=function(s){if(o.prototype.optimize.call(this,s),this.children.length===0)if(this.statics.defaultChild!=null){var c=h.create(this.statics.defaultChild);this.appendChild(c),c.optimize(s)}else this.remove()},r.prototype.path=function(s,c){c===void 0&&(c=!1);var d=this.children.find(s,c),E=d[0],v=d[1],y=[[this,s]];return E instanceof r?y.concat(E.path(v,c)):(E!=null&&y.push([E,v]),y)},r.prototype.removeChild=function(s){this.children.remove(s)},r.prototype.replace=function(s){s instanceof r&&s.moveChildren(this),o.prototype.replace.call(this,s)},r.prototype.split=function(s,c){if(c===void 0&&(c=!1),!c){if(s===0)return this;if(s===this.length())return this.next}var d=this.clone();return this.parent.insertBefore(d,this.next),this.children.forEachAt(s,this.length(),function(E,v,y){E=E.split(v,c),d.appendChild(E)}),d},r.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},r.prototype.update=function(s,c){var d=this,E=[],v=[];s.forEach(function(y){y.target===d.domNode&&y.type==="childList"&&(E.push.apply(E,y.addedNodes),v.push.apply(v,y.removedNodes))}),v.forEach(function(y){if(!(y.parentNode!=null&&y.tagName!=="IFRAME"&&document.body.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var u=h.find(y);u!=null&&(u.domNode.parentNode==null||u.domNode.parentNode===d.domNode)&&u.detach()}}),E.filter(function(y){return y.parentNode==d.domNode}).sort(function(y,u){return y===u?0:y.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(y){var u=null;y.nextSibling!=null&&(u=h.find(y.nextSibling));var l=_(y);(l.next!=u||l.next==null)&&(l.parent!=null&&l.parent.removeChild(d),d.insertBefore(l,u))})},r}(g.default);function _(o){var r=h.find(o);if(r==null)try{r=h.create(o)}catch{r=h.create(h.Scope.INLINE),[].slice.call(o.childNodes).forEach(function(c){r.domNode.appendChild(c)}),o.parentNode.replaceChild(r.domNode,o),r.attach()}return r}n.default=m},function(e,n,a){var p=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var c in s)s.hasOwnProperty(c)&&(r[c]=s[c])};return function(r,s){o(r,s);function c(){this.constructor=r}r.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(12),g=a(31),h=a(17),m=a(1),_=function(o){p(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.formats=function(s){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return s.tagName.toLowerCase()},r.prototype.attach=function(){o.prototype.attach.call(this),this.attributes=new g.default(this.domNode)},r.prototype.format=function(s,c){var d=m.query(s);d instanceof w.default?this.attributes.attribute(d,c):c&&d!=null&&(s!==this.statics.blotName||this.formats()[s]!==c)&&this.replaceWith(s,c)},r.prototype.formats=function(){var s=this.attributes.values(),c=this.statics.formats(this.domNode);return c!=null&&(s[this.statics.blotName]=c),s},r.prototype.replaceWith=function(s,c){var d=o.prototype.replaceWith.call(this,s,c);return this.attributes.copy(d),d},r.prototype.update=function(s,c){var d=this;o.prototype.update.call(this,s,c),s.some(function(E){return E.target===d.domNode&&E.type==="attributes"})&&this.attributes.build()},r.prototype.wrap=function(s,c){var d=o.prototype.wrap.call(this,s,c);return d instanceof r&&d.statics.scope===this.statics.scope&&this.attributes.move(d),d},r}(h.default);n.default=_},function(e,n,a){var p=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,o){_.__proto__=o}||function(_,o){for(var r in o)o.hasOwnProperty(r)&&(_[r]=o[r])};return function(_,o){m(_,o);function r(){this.constructor=_}_.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(30),g=a(1),h=function(m){p(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return _.value=function(o){return!0},_.prototype.index=function(o,r){return this.domNode===o||this.domNode.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(r,1):-1},_.prototype.position=function(o,r){var s=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return o>0&&(s+=1),[this.parent.domNode,s]},_.prototype.value=function(){return o={},o[this.statics.blotName]=this.statics.value(this.domNode)||!0,o;var o},_.scope=g.Scope.INLINE_BLOT,_}(w.default);n.default=h},function(e,n,a){var p=a(11),w=a(3),g={attributes:{compose:function(m,_,o){typeof m!="object"&&(m={}),typeof _!="object"&&(_={});var r=w(!0,{},_);o||(r=Object.keys(r).reduce(function(c,d){return r[d]!=null&&(c[d]=r[d]),c},{}));for(var s in m)m[s]!==void 0&&_[s]===void 0&&(r[s]=m[s]);return Object.keys(r).length>0?r:void 0},diff:function(m,_){typeof m!="object"&&(m={}),typeof _!="object"&&(_={});var o=Object.keys(m).concat(Object.keys(_)).reduce(function(r,s){return p(m[s],_[s])||(r[s]=_[s]===void 0?null:_[s]),r},{});return Object.keys(o).length>0?o:void 0},transform:function(m,_,o){if(typeof m!="object")return _;if(typeof _=="object"){if(!o)return _;var r=Object.keys(_).reduce(function(s,c){return m[c]===void 0&&(s[c]=_[c]),s},{});return Object.keys(r).length>0?r:void 0}}},iterator:function(m){return new h(m)},length:function(m){return typeof m.delete=="number"?m.delete:typeof m.retain=="number"?m.retain:typeof m.insert=="string"?m.insert.length:1}};function h(m){this.ops=m,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(m){m||(m=1/0);var _=this.ops[this.index];if(_){var o=this.offset,r=g.length(_);if(m>=r-o?(m=r-o,this.index+=1,this.offset=0):this.offset+=m,typeof _.delete=="number")return{delete:m};var s={};return _.attributes&&(s.attributes=_.attributes),typeof _.retain=="number"?s.retain=m:typeof _.insert=="string"?s.insert=_.insert.substr(o,m):s.insert=_.insert,s}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?g.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},e.exports=g},function(e,n){var a=function(){function p(d,E){return E!=null&&d instanceof E}var w;try{w=Map}catch{w=function(){}}var g;try{g=Set}catch{g=function(){}}var h;try{h=Promise}catch{h=function(){}}function m(d,E,v,y,u){typeof E=="object"&&(v=E.depth,y=E.prototype,u=E.includeNonEnumerable,E=E.circular);var l=[],b=[],O=typeof Buffer<"u";typeof E>"u"&&(E=!0),typeof v>"u"&&(v=1/0);function S(C,L){if(C===null)return null;if(L===0)return C;var A,k;if(typeof C!="object")return C;if(p(C,w))A=new w;else if(p(C,g))A=new g;else if(p(C,h))A=new h(function(V,P){C.then(function(H){V(S(H,L-1))},function(H){P(S(H,L-1))})});else if(m.__isArray(C))A=[];else if(m.__isRegExp(C))A=new RegExp(C.source,c(C)),C.lastIndex&&(A.lastIndex=C.lastIndex);else if(m.__isDate(C))A=new Date(C.getTime());else{if(O&&Buffer.isBuffer(C))return A=new Buffer(C.length),C.copy(A),A;p(C,Error)?A=Object.create(C):typeof y>"u"?(k=Object.getPrototypeOf(C),A=Object.create(k)):(A=Object.create(y),k=y)}if(E){var x=l.indexOf(C);if(x!=-1)return b[x];l.push(C),b.push(A)}p(C,w)&&C.forEach(function(V,P){var H=S(P,L-1),F=S(V,L-1);A.set(H,F)}),p(C,g)&&C.forEach(function(V){var P=S(V,L-1);A.add(P)});for(var N in C){var M;k&&(M=Object.getOwnPropertyDescriptor(k,N)),!(M&&M.set==null)&&(A[N]=S(C[N],L-1))}if(Object.getOwnPropertySymbols)for(var I=Object.getOwnPropertySymbols(C),N=0;N<I.length;N++){var U=I[N],Y=Object.getOwnPropertyDescriptor(C,U);Y&&!Y.enumerable&&!u||(A[U]=S(C[U],L-1),Y.enumerable||Object.defineProperty(A,U,{enumerable:!1}))}if(u)for(var nt=Object.getOwnPropertyNames(C),N=0;N<nt.length;N++){var z=nt[N],Y=Object.getOwnPropertyDescriptor(C,z);Y&&Y.enumerable||(A[z]=S(C[z],L-1),Object.defineProperty(A,z,{enumerable:!1}))}return A}return S(d,v)}m.clonePrototype=function(E){if(E===null)return null;var v=function(){};return v.prototype=E,new v};function _(d){return Object.prototype.toString.call(d)}m.__objToStr=_;function o(d){return typeof d=="object"&&_(d)==="[object Date]"}m.__isDate=o;function r(d){return typeof d=="object"&&_(d)==="[object Array]"}m.__isArray=r;function s(d){return typeof d=="object"&&_(d)==="[object RegExp]"}m.__isRegExp=s;function c(d){var E="";return d.global&&(E+="g"),d.ignoreCase&&(E+="i"),d.multiline&&(E+="m"),E}return m.__getRegExpFlags=c,m}();typeof e=="object"&&e.exports&&(e.exports=a)},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function A(k,x){var N=[],M=!0,I=!1,U=void 0;try{for(var Y=k[Symbol.iterator](),nt;!(M=(nt=Y.next()).done)&&(N.push(nt.value),!(x&&N.length===x));M=!0);}catch(z){I=!0,U=z}finally{try{!M&&Y.return&&Y.return()}finally{if(I)throw U}}return N}return function(k,x){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return A(k,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function A(k,x){for(var N=0;N<x.length;N++){var M=x[N];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(k,M.key,M)}}return function(k,x,N){return x&&A(k.prototype,x),N&&A(k,N),k}}(),g=function A(k,x,N){k===null&&(k=Function.prototype);var M=Object.getOwnPropertyDescriptor(k,x);if(M===void 0){var I=Object.getPrototypeOf(k);return I===null?void 0:A(I,x,N)}else{if("value"in M)return M.value;var U=M.get;return U===void 0?void 0:U.call(N)}},h=a(0),m=l(h),_=a(8),o=l(_),r=a(4),s=l(r),c=a(16),d=l(c),E=a(13),v=l(E),y=a(24),u=l(y);function l(A){return A&&A.__esModule?A:{default:A}}function b(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}function O(A,k){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:A}function S(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(A,k):A.__proto__=k)}function C(A){return A instanceof s.default||A instanceof r.BlockEmbed}var L=function(A){S(k,A);function k(x,N){b(this,k);var M=O(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x));return M.emitter=N.emitter,Array.isArray(N.whitelist)&&(M.whitelist=N.whitelist.reduce(function(I,U){return I[U]=!0,I},{})),M.domNode.addEventListener("DOMNodeInserted",function(){}),M.optimize(),M.enable(),M}return w(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(N,M){var I=this.line(N),U=p(I,2),Y=U[0],nt=U[1],z=this.line(N+M),V=p(z,1),P=V[0];if(g(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,N,M),P!=null&&Y!==P&&nt>0){if(Y instanceof r.BlockEmbed||P instanceof r.BlockEmbed){this.optimize();return}if(Y instanceof v.default){var H=Y.newlineIndex(Y.length(),!0);if(H>-1&&(Y=Y.split(H+1),Y===P)){this.optimize();return}}else if(P instanceof v.default){var F=P.newlineIndex(0);F>-1&&P.split(F+1)}var J=P.children.head instanceof d.default?null:P.children.head;Y.moveChildren(P,J),Y.remove()}this.optimize()}},{key:"enable",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",N)}},{key:"formatAt",value:function(N,M,I,U){this.whitelist!=null&&!this.whitelist[I]||(g(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,N,M,I,U),this.optimize())}},{key:"insertAt",value:function(N,M,I){if(!(I!=null&&this.whitelist!=null&&!this.whitelist[M])){if(N>=this.length())if(I==null||m.default.query(M,m.default.Scope.BLOCK)==null){var U=m.default.create(this.statics.defaultChild);this.appendChild(U),I==null&&M.endsWith(`
`)&&(M=M.slice(0,-1)),U.insertAt(0,M,I)}else{var Y=m.default.create(M,I);this.appendChild(Y)}else g(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,N,M,I);this.optimize()}}},{key:"insertBefore",value:function(N,M){if(N.statics.scope===m.default.Scope.INLINE_BLOT){var I=m.default.create(this.statics.defaultChild);I.appendChild(N),N=I}g(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,N,M)}},{key:"leaf",value:function(N){return this.path(N).pop()||[null,-1]}},{key:"line",value:function(N){return N===this.length()?this.line(N-1):this.descendant(C,N)}},{key:"lines",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,I=function U(Y,nt,z){var V=[],P=z;return Y.children.forEachAt(nt,z,function(H,F,J){C(H)?V.push(H):H instanceof m.default.Container&&(V=V.concat(U(H,F,P))),P-=J}),V};return I(this,N,M)}},{key:"optimize",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(g(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,N,M),N.length>0&&this.emitter.emit(o.default.events.SCROLL_OPTIMIZE,N,M))}},{key:"path",value:function(N){return g(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,N).slice(1)}},{key:"update",value:function(N){if(this.batch!==!0){var M=o.default.sources.USER;typeof N=="string"&&(M=N),Array.isArray(N)||(N=this.observer.takeRecords()),N.length>0&&this.emitter.emit(o.default.events.SCROLL_BEFORE_UPDATE,M,N),g(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,N.concat([])),N.length>0&&this.emitter.emit(o.default.events.SCROLL_UPDATE,M,N)}}}]),k}(m.default.Scroll);L.blotName="scroll",L.className="ql-editor",L.tagName="DIV",L.defaultChild="block",L.allowedChildren=[s.default,r.BlockEmbed,u.default],n.default=L},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function v(y,u){var l=[],b=!0,O=!1,S=void 0;try{for(var C=y[Symbol.iterator](),L;!(b=(L=C.next()).done)&&(l.push(L.value),!(u&&l.length===u));b=!0);}catch(A){O=!0,S=A}finally{try{!b&&C.return&&C.return()}finally{if(O)throw S}}return l}return function(y,u){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return v(y,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function v(y,u,l){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,u);if(b===void 0){var O=Object.getPrototypeOf(y);return O===null?void 0:v(O,u,l)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(l)}},g=function(){function v(y,u){for(var l=0;l<u.length;l++){var b=u[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,u,l){return u&&v(y.prototype,u),l&&v(y,l),y}}(),h=a(0),m=r(h),_=a(7),o=r(_);function r(v){return v&&v.__esModule?v:{default:v}}function s(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function c(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function d(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var E=function(v){d(y,v),g(y,null,[{key:"value",value:function(){}}]);function y(u,l){s(this,y);var b=c(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,u));return b.selection=l,b.textNode=document.createTextNode(y.CONTENTS),b.domNode.appendChild(b.textNode),b._length=0,b}return g(y,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(l,b){if(this._length!==0)return w(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,l,b);for(var O=this,S=0;O!=null&&O.statics.scope!==m.default.Scope.BLOCK_BLOT;)S+=O.offset(O.parent),O=O.parent;O!=null&&(this._length=y.CONTENTS.length,O.optimize(),O.formatAt(S,y.CONTENTS.length,l,b),this._length=0)}},{key:"index",value:function(l,b){return l===this.textNode?0:w(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,l,b)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){w(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var l=this.textNode,b=this.selection.getNativeRange(),O=void 0,S=void 0,C=void 0;if(b!=null&&b.start.node===l&&b.end.node===l){var L=[l,b.start.offset,b.end.offset];O=L[0],S=L[1],C=L[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==y.CONTENTS){var A=this.textNode.data.split(y.CONTENTS).join("");this.next instanceof o.default?(O=this.next.domNode,this.next.insertAt(0,A),this.textNode.data=y.CONTENTS):(this.textNode.data=A,this.parent.insertBefore(m.default.create(this.textNode),this),this.textNode=document.createTextNode(y.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),S!=null){var k=[S,C].map(function(N){return Math.max(0,Math.min(O.data.length,N-1))}),x=p(k,2);return S=x[0],C=x[1],{startNode:O,startOffset:S,endNode:O,endOffset:C}}}}},{key:"update",value:function(l,b){var O=this;if(l.some(function(C){return C.type==="characterData"&&C.target===O.textNode})){var S=this.restore();S&&(b.range=S)}}},{key:"value",value:function(){return""}}]),y}(m.default.Embed);E.blotName="cursor",E.className="ql-cursor",E.tagName="span",E.CONTENTS="\uFEFF",n.default=E},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(0),w=m(p),g=a(4),h=m(g);function m(c){return c&&c.__esModule?c:{default:c}}function _(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function r(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var s=function(c){r(d,c);function d(){return _(this,d),o(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(w.default.Container);s.allowedChildren=[h.default,g.BlockEmbed,s],n.default=s},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function v(y,u){for(var l=0;l<u.length;l++){var b=u[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,u,l){return u&&v(y.prototype,u),l&&v(y,l),y}}(),w=function v(y,u,l){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,u);if(b===void 0){var O=Object.getPrototypeOf(y);return O===null?void 0:v(O,u,l)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(l)}},g=a(0),h=o(g),m=a(7),_=o(m);function o(v){return v&&v.__esModule?v:{default:v}}function r(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function s(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function c(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var d="\uFEFF",E=function(v){c(y,v);function y(u){r(this,y);var l=s(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,u));return l.contentNode=document.createElement("span"),l.contentNode.setAttribute("contenteditable",!1),[].slice.call(l.domNode.childNodes).forEach(function(b){l.contentNode.appendChild(b)}),l.leftGuard=document.createTextNode(d),l.rightGuard=document.createTextNode(d),l.domNode.appendChild(l.leftGuard),l.domNode.appendChild(l.contentNode),l.domNode.appendChild(l.rightGuard),l}return p(y,[{key:"index",value:function(l,b){return l===this.leftGuard?0:l===this.rightGuard?1:w(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,l,b)}},{key:"restore",value:function(l){var b=void 0,O=void 0,S=l.data.split(d).join("");if(l===this.leftGuard)if(this.prev instanceof _.default){var C=this.prev.length();this.prev.insertAt(C,S),b={startNode:this.prev.domNode,startOffset:C+S.length}}else O=document.createTextNode(S),this.parent.insertBefore(h.default.create(O),this),b={startNode:O,startOffset:S.length};else l===this.rightGuard&&(this.next instanceof _.default?(this.next.insertAt(0,S),b={startNode:this.next.domNode,startOffset:S.length}):(O=document.createTextNode(S),this.parent.insertBefore(h.default.create(O),this.next),b={startNode:O,startOffset:S.length}));return l.data=d,b}},{key:"update",value:function(l,b){var O=this;l.forEach(function(S){if(S.type==="characterData"&&(S.target===O.leftGuard||S.target===O.rightGuard)){var C=O.restore(S.target);C&&(b.range=C)}})}}]),y}(h.default.Embed);n.default=E},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var p=function(){function E(v,y){for(var u=0;u<y.length;u++){var l=y[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(v,l.key,l)}}return function(v,y,u){return y&&E(v.prototype,y),u&&E(v,u),v}}(),w=function E(v,y,u){v===null&&(v=Function.prototype);var l=Object.getOwnPropertyDescriptor(v,y);if(l===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:E(b,y,u)}else{if("value"in l)return l.value;var O=l.get;return O===void 0?void 0:O.call(u)}},g=a(0),h=m(g);function m(E){return E&&E.__esModule?E:{default:E}}function _(E,v){if(!(E instanceof v))throw new TypeError("Cannot call a class as a function")}function o(E,v){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:E}function r(E,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);E.prototype=Object.create(v&&v.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(E,v):E.__proto__=v)}var s=function(E){r(v,E);function v(){return _(this,v),o(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return p(v,[{key:"value",value:function(u){var l=w(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,u);return l.startsWith("rgb(")?(l=l.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+l.split(",").map(function(b){return("00"+parseInt(b).toString(16)).slice(-2)}).join("")):l}}]),v}(h.default.Attributor.Style),c=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),d=new s("color","color",{scope:h.default.Scope.INLINE});n.ColorAttributor=s,n.ColorClass=c,n.ColorStyle=d},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var p=function(){function d(E,v){for(var y=0;y<v.length;y++){var u=v[y];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(E,u.key,u)}}return function(E,v,y){return v&&d(E.prototype,v),y&&d(E,y),E}}(),w=function d(E,v,y){E===null&&(E=Function.prototype);var u=Object.getOwnPropertyDescriptor(E,v);if(u===void 0){var l=Object.getPrototypeOf(E);return l===null?void 0:d(l,v,y)}else{if("value"in u)return u.value;var b=u.get;return b===void 0?void 0:b.call(y)}},g=a(6),h=m(g);function m(d){return d&&d.__esModule?d:{default:d}}function _(d,E){if(!(d instanceof E))throw new TypeError("Cannot call a class as a function")}function o(d,E){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:d}function r(d,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);d.prototype=Object.create(E&&E.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(d,E):d.__proto__=E)}var s=function(d){r(E,d);function E(){return _(this,E),o(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return p(E,[{key:"format",value:function(y,u){if(y!==this.statics.blotName||!u)return w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,y,u);u=this.constructor.sanitize(u),this.domNode.setAttribute("href",u)}}],[{key:"create",value:function(y){var u=w(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,y);return y=this.sanitize(y),u.setAttribute("href",y),u.setAttribute("target","_blank"),u}},{key:"formats",value:function(y){return y.getAttribute("href")}},{key:"sanitize",value:function(y){return c(y,this.PROTOCOL_WHITELIST)?y:this.SANITIZED_URL}}]),E}(h.default);s.blotName="link",s.tagName="A",s.SANITIZED_URL="about:blank",s.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function c(d,E){var v=document.createElement("a");v.href=d;var y=v.href.slice(0,v.href.indexOf(":"));return E.indexOf(y)>-1}n.default=s,n.sanitize=c},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},w=function(){function r(s,c){for(var d=0;d<c.length;d++){var E=c[d];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(s,E.key,E)}}return function(s,c,d){return c&&r(s.prototype,c),d&&r(s,d),s}}(),g=a(107),h=m(g);function m(r){return r&&r.__esModule?r:{default:r}}function _(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}var o=function(){function r(s){var c=this;_(this,r),this.select=s,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){c.container.classList.toggle("ql-expanded")}),this.select.addEventListener("change",this.update.bind(this))}return w(r,[{key:"buildItem",value:function(c){var d=this,E=document.createElement("span");return E.classList.add("ql-picker-item"),c.hasAttribute("value")&&E.setAttribute("data-value",c.getAttribute("value")),c.textContent&&E.setAttribute("data-label",c.textContent),E.addEventListener("click",function(){d.selectItem(E,!0)}),E}},{key:"buildLabel",value:function(){var c=document.createElement("span");return c.classList.add("ql-picker-label"),c.innerHTML=h.default,this.container.appendChild(c),c}},{key:"buildOptions",value:function(){var c=this,d=document.createElement("span");d.classList.add("ql-picker-options"),[].slice.call(this.select.options).forEach(function(E){var v=c.buildItem(E);d.appendChild(v),E.selected===!0&&c.selectItem(v)}),this.container.appendChild(d)}},{key:"buildPicker",value:function(){var c=this;[].slice.call(this.select.attributes).forEach(function(d){c.container.setAttribute(d.name,d.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"close",value:function(){this.container.classList.remove("ql-expanded")}},{key:"selectItem",value:function(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E=this.container.querySelector(".ql-selected");if(c!==E&&(E!=null&&E.classList.remove("ql-selected"),c!=null&&(c.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(c.parentNode.children,c),c.hasAttribute("data-value")?this.label.setAttribute("data-value",c.getAttribute("data-value")):this.label.removeAttribute("data-value"),c.hasAttribute("data-label")?this.label.setAttribute("data-label",c.getAttribute("data-label")):this.label.removeAttribute("data-label"),d))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":p(Event))==="object"){var v=document.createEvent("Event");v.initEvent("change",!0,!0),this.select.dispatchEvent(v)}this.close()}}},{key:"update",value:function(){var c=void 0;if(this.select.selectedIndex>-1){var d=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];c=this.select.options[this.select.selectedIndex],this.selectItem(d)}else this.selectItem(null);var E=c!=null&&c!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",E)}}]),r}();n.default=o},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(0),w=I(p),g=a(5),h=I(g),m=a(4),_=I(m),o=a(16),r=I(o),s=a(24),c=I(s),d=a(23),E=I(d),v=a(25),y=I(v),u=a(6),l=I(u),b=a(22),O=I(b),S=a(7),C=I(S),L=a(55),A=I(L),k=a(42),x=I(k),N=a(35),M=I(N);function I(U){return U&&U.__esModule?U:{default:U}}h.default.register({"blots/block":_.default,"blots/block/embed":m.BlockEmbed,"blots/break":r.default,"blots/container":c.default,"blots/cursor":E.default,"blots/embed":y.default,"blots/inline":l.default,"blots/scroll":O.default,"blots/text":C.default,"modules/clipboard":A.default,"modules/history":x.default,"modules/keyboard":M.default}),w.default.register(_.default,r.default,E.default,l.default,O.default,C.default),n.default=h.default},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(1),w=function(){function g(h){this.domNode=h,this.attach()}return Object.defineProperty(g.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),g.create=function(h){if(this.tagName==null)throw new p.ParchmentError("Blot definition missing tagName");var m;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?m=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?m=document.createElement(h):m=document.createElement(this.tagName[0])):m=document.createElement(this.tagName),this.className&&m.classList.add(this.className),m},g.prototype.attach=function(){this.domNode[p.DATA_KEY]={blot:this}},g.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return p.create(h)},g.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[p.DATA_KEY]},g.prototype.deleteAt=function(h,m){var _=this.isolate(h,m);_.remove()},g.prototype.formatAt=function(h,m,_,o){var r=this.isolate(h,m);if(p.query(_,p.Scope.BLOT)!=null&&o)r.wrap(_,o);else if(p.query(_,p.Scope.ATTRIBUTE)!=null){var s=p.create(this.statics.scope);r.wrap(s),s.format(_,o)}},g.prototype.insertAt=function(h,m,_){var o=_==null?p.create("text",m):p.create(m,_),r=this.split(h);this.parent.insertBefore(o,r)},g.prototype.insertInto=function(h,m){if(this.parent!=null&&this.parent.children.remove(this),h.children.insertBefore(this,m),m!=null)var _=m.domNode;(this.next==null||this.domNode.nextSibling!=_)&&h.domNode.insertBefore(this.domNode,typeof _<"u"?_:null),this.parent=h,this.scroll=h.scroll},g.prototype.isolate=function(h,m){var _=this.split(h);return _.split(m),_},g.prototype.length=function(){return 1},g.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},g.prototype.optimize=function(h){this.domNode[p.DATA_KEY]!=null&&delete this.domNode[p.DATA_KEY].mutations},g.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},g.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},g.prototype.replaceWith=function(h,m){var _=typeof h=="string"?p.create(h,m):h;return _.replace(this),_},g.prototype.split=function(h,m){return h===0?this:this.next},g.prototype.update=function(h,m){},g.prototype.wrap=function(h,m){var _=typeof h=="string"?p.create(h,m):h;return this.parent!=null&&this.parent.insertBefore(_,this.next),_.appendChild(this),_},g.blotName="abstract",g}();n.default=w},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(12),w=a(32),g=a(33),h=a(1),m=function(){function _(o){this.attributes={},this.domNode=o,this.build()}return _.prototype.attribute=function(o,r){r?o.add(this.domNode,r)&&(o.value(this.domNode)!=null?this.attributes[o.attrName]=o:delete this.attributes[o.attrName]):(o.remove(this.domNode),delete this.attributes[o.attrName])},_.prototype.build=function(){var o=this;this.attributes={};var r=p.default.keys(this.domNode),s=w.default.keys(this.domNode),c=g.default.keys(this.domNode);r.concat(s).concat(c).forEach(function(d){var E=h.query(d,h.Scope.ATTRIBUTE);E instanceof p.default&&(o.attributes[E.attrName]=E)})},_.prototype.copy=function(o){var r=this;Object.keys(this.attributes).forEach(function(s){var c=r.attributes[s].value(r.domNode);o.format(s,c)})},_.prototype.move=function(o){var r=this;this.copy(o),Object.keys(this.attributes).forEach(function(s){r.attributes[s].remove(r.domNode)}),this.attributes={}},_.prototype.values=function(){var o=this;return Object.keys(this.attributes).reduce(function(r,s){return r[s]=o.attributes[s].value(o.domNode),r},{})},_}();n.default=m},function(e,n,a){var p=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,o){_.__proto__=o}||function(_,o){for(var r in o)o.hasOwnProperty(r)&&(_[r]=o[r])};return function(_,o){m(_,o);function r(){this.constructor=_}_.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(12);function g(m,_){var o=m.getAttribute("class")||"";return o.split(/\s+/).filter(function(r){return r.indexOf(_+"-")===0})}var h=function(m){p(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return _.keys=function(o){return(o.getAttribute("class")||"").split(/\s+/).map(function(r){return r.split("-").slice(0,-1).join("-")})},_.prototype.add=function(o,r){return this.canAdd(o,r)?(this.remove(o),o.classList.add(this.keyName+"-"+r),!0):!1},_.prototype.remove=function(o){var r=g(o,this.keyName);r.forEach(function(s){o.classList.remove(s)}),o.classList.length===0&&o.removeAttribute("class")},_.prototype.value=function(o){var r=g(o,this.keyName)[0]||"",s=r.slice(this.keyName.length+1);return this.canAdd(o,s)?s:""},_}(w.default);n.default=h},function(e,n,a){var p=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,o){_.__proto__=o}||function(_,o){for(var r in o)o.hasOwnProperty(r)&&(_[r]=o[r])};return function(_,o){m(_,o);function r(){this.constructor=_}_.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(12);function g(m){var _=m.split("-"),o=_.slice(1).map(function(r){return r[0].toUpperCase()+r.slice(1)}).join("");return _[0]+o}var h=function(m){p(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return _.keys=function(o){return(o.getAttribute("style")||"").split(";").map(function(r){var s=r.split(":");return s[0].trim()})},_.prototype.add=function(o,r){return this.canAdd(o,r)?(o.style[g(this.keyName)]=r,!0):!1},_.prototype.remove=function(o){o.style[g(this.keyName)]="",o.getAttribute("style")||o.removeAttribute("style")},_.prototype.value=function(o){var r=o.style[g(this.keyName)];return this.canAdd(o,r)?r:""},_}(w.default);n.default=h},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function h(m,_){for(var o=0;o<_.length;o++){var r=_[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(m,r.key,r)}}return function(m,_,o){return _&&h(m.prototype,_),o&&h(m,o),m}}();function w(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}var g=function(){function h(m,_){w(this,h),this.quill=m,this.options=_,this.modules={}}return p(h,[{key:"init",value:function(){var _=this;Object.keys(this.options.modules).forEach(function(o){_.modules[o]==null&&_.addModule(o)})}},{key:"addModule",value:function(_){var o=this.quill.constructor.import("modules/"+_);return this.modules[_]=new o(this.quill,this.options.modules[_]||{}),this.modules[_]}}]),h}();g.DEFAULTS={modules:{}},g.themes={default:g},n.default=g},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},w=function(){function B(W,it){var ot=[],st=!0,ct=!1,ht=void 0;try{for(var Z=W[Symbol.iterator](),et;!(st=(et=Z.next()).done)&&(ot.push(et.value),!(it&&ot.length===it));st=!0);}catch(lt){ct=!0,ht=lt}finally{try{!st&&Z.return&&Z.return()}finally{if(ct)throw ht}}return ot}return function(W,it){if(Array.isArray(W))return W;if(Symbol.iterator in Object(W))return B(W,it);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function B(W,it){for(var ot=0;ot<it.length;ot++){var st=it[ot];st.enumerable=st.enumerable||!1,st.configurable=!0,"value"in st&&(st.writable=!0),Object.defineProperty(W,st.key,st)}}return function(W,it,ot){return it&&B(W.prototype,it),ot&&B(W,ot),W}}(),h=a(21),m=x(h),_=a(11),o=x(_),r=a(3),s=x(r),c=a(2),d=x(c),E=a(20),v=x(E),y=a(0),u=x(y),l=a(25),b=x(l),O=a(5),S=x(O),C=a(10),L=x(C),A=a(9),k=x(A);function x(B){return B&&B.__esModule?B:{default:B}}function N(B,W,it){return W in B?Object.defineProperty(B,W,{value:it,enumerable:!0,configurable:!0,writable:!0}):B[W]=it,B}function M(B,W){if(!(B instanceof W))throw new TypeError("Cannot call a class as a function")}function I(B,W){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:B}function U(B,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);B.prototype=Object.create(W&&W.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf(B,W):B.__proto__=W)}var Y=(0,L.default)("quill:keyboard"),nt=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",z=function(B){U(W,B),g(W,null,[{key:"match",value:function(ot,st){return st=K(st),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ct){return!!st[ct]!==ot[ct]&&st[ct]!==null})?!1:st.key===(ot.which||ot.keyCode)}}]);function W(it,ot){M(this,W);var st=I(this,(W.__proto__||Object.getPrototypeOf(W)).call(this,it,ot));return st.bindings={},Object.keys(st.options.bindings).forEach(function(ct){ct==="list autofill"&&it.scroll.whitelist!=null&&!it.scroll.whitelist.list||st.options.bindings[ct]&&st.addBinding(st.options.bindings[ct])}),st.addBinding({key:W.keys.ENTER,shiftKey:null},J),st.addBinding({key:W.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(st.addBinding({key:W.keys.BACKSPACE},{collapsed:!0},P),st.addBinding({key:W.keys.DELETE},{collapsed:!0},H)):(st.addBinding({key:W.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},P),st.addBinding({key:W.keys.DELETE},{collapsed:!0,suffix:/^.?$/},H)),st.addBinding({key:W.keys.BACKSPACE},{collapsed:!1},F),st.addBinding({key:W.keys.DELETE},{collapsed:!1},F),st.addBinding({key:W.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},P),st.listen(),st}return g(W,[{key:"addBinding",value:function(ot){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ht=K(ot);if(ht==null||ht.key==null)return Y.warn("Attempted to add invalid keyboard binding",ht);typeof st=="function"&&(st={handler:st}),typeof ct=="function"&&(ct={handler:ct}),ht=(0,s.default)(ht,st,ct),this.bindings[ht.key]=this.bindings[ht.key]||[],this.bindings[ht.key].push(ht)}},{key:"listen",value:function(){var ot=this;this.quill.root.addEventListener("keydown",function(st){if(!st.defaultPrevented){var ct=st.which||st.keyCode,ht=(ot.bindings[ct]||[]).filter(function(Rt){return W.match(st,Rt)});if(ht.length!==0){var Z=ot.quill.getSelection();if(!(Z==null||!ot.quill.hasFocus())){var et=ot.quill.getLine(Z.index),lt=w(et,2),X=lt[0],D=lt[1],f=ot.quill.getLeaf(Z.index),T=w(f,2),R=T[0],$=T[1],G=Z.length===0?[R,$]:ot.quill.getLeaf(Z.index+Z.length),Q=w(G,2),ft=Q[0],gt=Q[1],mt=R instanceof u.default.Text?R.value().slice(0,$):"",_t=ft instanceof u.default.Text?ft.value().slice(gt):"",yt={collapsed:Z.length===0,empty:Z.length===0&&X.length()<=1,format:ot.quill.getFormat(Z),offset:D,prefix:mt,suffix:_t},qt=ht.some(function(Rt){if(Rt.collapsed!=null&&Rt.collapsed!==yt.collapsed||Rt.empty!=null&&Rt.empty!==yt.empty||Rt.offset!=null&&Rt.offset!==yt.offset)return!1;if(Array.isArray(Rt.format)){if(Rt.format.every(function(Yt){return yt.format[Yt]==null}))return!1}else if(p(Rt.format)==="object"&&!Object.keys(Rt.format).every(function(Yt){return Rt.format[Yt]===!0?yt.format[Yt]!=null:Rt.format[Yt]===!1?yt.format[Yt]==null:(0,o.default)(Rt.format[Yt],yt.format[Yt])}))return!1;return Rt.prefix!=null&&!Rt.prefix.test(yt.prefix)||Rt.suffix!=null&&!Rt.suffix.test(yt.suffix)?!1:Rt.handler.call(ot,Z,yt)!==!0});qt&&st.preventDefault()}}}})}}]),W}(k.default);z.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},z.DEFAULTS={bindings:{bold:q("bold"),italic:q("italic"),underline:q("underline"),indent:{key:z.keys.TAB,format:["blockquote","indent","list"],handler:function(W,it){if(it.collapsed&&it.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:z.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(W,it){if(it.collapsed&&it.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:z.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(W,it){it.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):it.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":j(!0),"outdent code-block":j(!1),"remove tab":{key:z.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(W){this.quill.deleteText(W.index-1,1,S.default.sources.USER)}},tab:{key:z.keys.TAB,handler:function(W){this.quill.history.cutoff();var it=new d.default().retain(W.index).delete(W.length).insert("	");this.quill.updateContents(it,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(W.index+1,S.default.sources.SILENT)}},"list empty enter":{key:z.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(W,it){this.quill.format("list",!1,S.default.sources.USER),it.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:z.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(W){var it=this.quill.getLine(W.index),ot=w(it,2),st=ot[0],ct=ot[1],ht=new d.default().retain(W.index).insert(`
`,{list:"checked"}).retain(st.length()-ct-1).retain(1,{list:"unchecked"});this.quill.updateContents(ht,S.default.sources.USER),this.quill.setSelection(W.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:z.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(W,it){var ot=this.quill.getLine(W.index),st=w(ot,2),ct=st[0],ht=st[1],Z=new d.default().retain(W.index).insert(`
`,it.format).retain(ct.length()-ht-1).retain(1,{header:null});this.quill.updateContents(Z,S.default.sources.USER),this.quill.setSelection(W.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\[ ?\]|\[x\])$/,handler:function(W,it){var ot=it.prefix.length,st=this.quill.getLine(W.index),ct=w(st,2),ht=ct[0],Z=ct[1];if(Z>ot)return!0;var et=void 0;switch(it.prefix.trim()){case"[]":case"[ ]":et="unchecked";break;case"[x]":et="checked";break;case"-":et="bullet";break;default:et="ordered"}this.quill.insertText(W.index," ",S.default.sources.USER),this.quill.history.cutoff();var lt=new d.default().retain(W.index-Z).delete(ot+1).retain(ht.length()-2-Z).retain(1,{list:et});this.quill.updateContents(lt,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(W.index-ot,S.default.sources.SILENT)}},"code exit":{key:z.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(W){var it=this.quill.getLine(W.index),ot=w(it,2),st=ot[0],ct=ot[1],ht=new d.default().retain(W.index+st.length()-ct-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ht,S.default.sources.USER)}},"embed left":V(z.keys.LEFT,!1),"embed left shift":V(z.keys.LEFT,!0),"embed right":V(z.keys.RIGHT,!1),"embed right shift":V(z.keys.RIGHT,!0)}};function V(B,W){var it,ot=B===z.keys.LEFT?"prefix":"suffix";return it={key:B,shiftKey:W},N(it,ot,/^$/),N(it,"handler",function(ct){var ht=ct.index;B===z.keys.RIGHT&&(ht+=ct.length+1);var Z=this.quill.getLeaf(ht),et=w(Z,1),lt=et[0];return lt instanceof b.default?(B===z.keys.LEFT?W?this.quill.setSelection(ct.index-1,ct.length+1,S.default.sources.USER):this.quill.setSelection(ct.index-1,S.default.sources.USER):W?this.quill.setSelection(ct.index,ct.length+1,S.default.sources.USER):this.quill.setSelection(ct.index+ct.length+1,S.default.sources.USER),!1):!0}),it}function P(B,W){if(!(B.index===0||this.quill.getLength()<=1)){var it=this.quill.getLine(B.index),ot=w(it,1),st=ot[0],ct={};if(W.offset===0){var ht=this.quill.getLine(B.index-1),Z=w(ht,1),et=Z[0];if(et!=null&&et.length()>1){var lt=st.formats(),X=this.quill.getFormat(B.index-1,1);ct=v.default.attributes.diff(lt,X)||{}}}var D=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(W.prefix)?2:1;this.quill.deleteText(B.index-D,D,S.default.sources.USER),Object.keys(ct).length>0&&this.quill.formatLine(B.index-D,D,ct,S.default.sources.USER),this.quill.focus()}}function H(B,W){var it=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(W.suffix)?2:1;if(!(B.index>=this.quill.getLength()-it)){var ot={},st=0,ct=this.quill.getLine(B.index),ht=w(ct,1),Z=ht[0];if(W.offset>=Z.length()-1){var et=this.quill.getLine(B.index+1),lt=w(et,1),X=lt[0];if(X){var D=Z.formats(),f=this.quill.getFormat(B.index,1);ot=v.default.attributes.diff(D,f)||{},st=X.length()}}this.quill.deleteText(B.index,it,S.default.sources.USER),Object.keys(ot).length>0&&this.quill.formatLine(B.index+st-1,it,ot,S.default.sources.USER)}}function F(B){var W=this.quill.getLines(B),it={};if(W.length>1){var ot=W[0].formats(),st=W[W.length-1].formats();it=v.default.attributes.diff(st,ot)||{}}this.quill.deleteText(B,S.default.sources.USER),Object.keys(it).length>0&&this.quill.formatLine(B.index,1,it,S.default.sources.USER),this.quill.setSelection(B.index,S.default.sources.SILENT),this.quill.focus()}function J(B,W){var it=this;B.length>0&&this.quill.scroll.deleteAt(B.index,B.length);var ot=Object.keys(W.format).reduce(function(st,ct){return u.default.query(ct,u.default.Scope.BLOCK)&&!Array.isArray(W.format[ct])&&(st[ct]=W.format[ct]),st},{});this.quill.insertText(B.index,`
`,ot,S.default.sources.USER),this.quill.setSelection(B.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(W.format).forEach(function(st){ot[st]==null&&(Array.isArray(W.format[st])||st!=="link"&&it.quill.format(st,W.format[st],S.default.sources.USER))})}function j(B){return{key:z.keys.TAB,shiftKey:!B,format:{"code-block":!0},handler:function(it){var ot=u.default.query("code-block"),st=it.index,ct=it.length,ht=this.quill.scroll.descendant(ot,st),Z=w(ht,2),et=Z[0],lt=Z[1];if(et!=null){var X=this.quill.getIndex(et),D=et.newlineIndex(lt,!0)+1,f=et.newlineIndex(X+lt+ct),T=et.domNode.textContent.slice(D,f).split(`
`);lt=0,T.forEach(function(R,$){B?(et.insertAt(D+lt,ot.TAB),lt+=ot.TAB.length,$===0?st+=ot.TAB.length:ct+=ot.TAB.length):R.startsWith(ot.TAB)&&(et.deleteAt(D+lt,ot.TAB.length),lt-=ot.TAB.length,$===0?st-=ot.TAB.length:ct-=ot.TAB.length),lt+=R.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(st,ct,S.default.sources.SILENT)}}}}function q(B){return{key:B[0].toUpperCase(),shortKey:!0,handler:function(it,ot){this.quill.format(B,!ot.format[B],S.default.sources.USER)}}}function K(B){if(typeof B=="string"||typeof B=="number")return K({key:B});if((typeof B>"u"?"undefined":p(B))==="object"&&(B=(0,m.default)(B,!1)),typeof B.key=="string")if(z.keys[B.key.toUpperCase()]!=null)B.key=z.keys[B.key.toUpperCase()];else if(B.key.length===1)B.key=B.key.toUpperCase().charCodeAt(0);else return null;return B.shortKey&&(B[nt]=B.shortKey,delete B.shortKey),B}n.default=z,n.SHORTKEY=nt},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var p=a(0),w=g(p);function g(r){return r&&r.__esModule?r:{default:r}}var h={scope:w.default.Scope.BLOCK,whitelist:["right","center","justify"]},m=new w.default.Attributor.Attribute("align","align",h),_=new w.default.Attributor.Class("align","ql-align",h),o=new w.default.Attributor.Style("align","text-align",h);n.AlignAttribute=m,n.AlignClass=_,n.AlignStyle=o},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var p=a(0),w=h(p),g=a(26);function h(o){return o&&o.__esModule?o:{default:o}}var m=new w.default.Attributor.Class("background","ql-bg",{scope:w.default.Scope.INLINE}),_=new g.ColorAttributor("background","background-color",{scope:w.default.Scope.INLINE});n.BackgroundClass=m,n.BackgroundStyle=_},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var p=a(0),w=g(p);function g(r){return r&&r.__esModule?r:{default:r}}var h={scope:w.default.Scope.BLOCK,whitelist:["rtl"]},m=new w.default.Attributor.Attribute("direction","dir",h),_=new w.default.Attributor.Class("direction","ql-direction",h),o=new w.default.Attributor.Style("direction","direction",h);n.DirectionAttribute=m,n.DirectionClass=_,n.DirectionStyle=o},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var p=function(){function v(y,u){for(var l=0;l<u.length;l++){var b=u[l];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,u,l){return u&&v(y.prototype,u),l&&v(y,l),y}}(),w=function v(y,u,l){y===null&&(y=Function.prototype);var b=Object.getOwnPropertyDescriptor(y,u);if(b===void 0){var O=Object.getPrototypeOf(y);return O===null?void 0:v(O,u,l)}else{if("value"in b)return b.value;var S=b.get;return S===void 0?void 0:S.call(l)}},g=a(0),h=m(g);function m(v){return v&&v.__esModule?v:{default:v}}function _(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function o(v,y){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:v}function r(v,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);v.prototype=Object.create(y&&y.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(v,y):v.__proto__=y)}var s={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new h.default.Attributor.Class("font","ql-font",s),d=function(v){r(y,v);function y(){return _(this,y),o(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return p(y,[{key:"value",value:function(l){return w(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,l).replace(/["']/g,"")}}]),y}(h.default.Attributor.Style),E=new d("font","font-family",s);n.FontStyle=E,n.FontClass=c},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var p=a(0),w=g(p);function g(_){return _&&_.__esModule?_:{default:_}}var h=new w.default.Attributor.Class("size","ql-size",{scope:w.default.Scope.INLINE,whitelist:["small","large","huge"]}),m=new w.default.Attributor.Style("size","font-size",{scope:w.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=h,n.SizeStyle=m},function(e,n,a){e.exports={align:{"":a(76),center:a(77),right:a(78),justify:a(79)},background:a(80),blockquote:a(81),bold:a(82),clean:a(83),code:a(58),"code-block":a(58),color:a(84),direction:{"":a(85),rtl:a(86)},float:{center:a(87),full:a(88),left:a(89),right:a(90)},formula:a(91),header:{1:a(92),2:a(93)},italic:a(94),image:a(95),indent:{"+1":a(96),"-1":a(97)},link:a(98),list:{ordered:a(99),bullet:a(100),check:a(101)},script:{sub:a(102),super:a(103)},strike:a(104),underline:a(105),video:a(106)}},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var p=function(){function u(l,b){for(var O=0;O<b.length;O++){var S=b[O];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,b,O){return b&&u(l.prototype,b),O&&u(l,O),l}}(),w=a(0),g=r(w),h=a(5),m=r(h),_=a(9),o=r(_);function r(u){return u&&u.__esModule?u:{default:u}}function s(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function c(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function d(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var E=function(u){d(l,u);function l(b,O){s(this,l);var S=c(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,b,O));return S.lastRecorded=0,S.ignoreChange=!1,S.clear(),S.quill.on(m.default.events.EDITOR_CHANGE,function(C,L,A,k){C!==m.default.events.TEXT_CHANGE||S.ignoreChange||(!S.options.userOnly||k===m.default.sources.USER?S.record(L,A):S.transform(L))}),S.quill.keyboard.addBinding({key:"Z",shortKey:!0},S.undo.bind(S)),S.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},S.redo.bind(S)),/Win/i.test(navigator.platform)&&S.quill.keyboard.addBinding({key:"Y",shortKey:!0},S.redo.bind(S)),S}return p(l,[{key:"change",value:function(O,S){if(this.stack[O].length!==0){var C=this.stack[O].pop();this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(C[O],m.default.sources.USER),this.ignoreChange=!1;var L=y(C[O]);this.quill.setSelection(L),this.stack[S].push(C)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(O,S){if(O.ops.length!==0){this.stack.redo=[];var C=this.quill.getContents().diff(S),L=Date.now();if(this.lastRecorded+this.options.delay>L&&this.stack.undo.length>0){var A=this.stack.undo.pop();C=C.compose(A.undo),O=A.redo.compose(O)}else this.lastRecorded=L;this.stack.undo.push({redo:O,undo:C}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(O){this.stack.undo.forEach(function(S){S.undo=O.transform(S.undo,!0),S.redo=O.transform(S.redo,!0)}),this.stack.redo.forEach(function(S){S.undo=O.transform(S.undo,!0),S.redo=O.transform(S.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),l}(o.default);E.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(u){var l=u.ops[u.ops.length-1];return l==null?!1:l.insert!=null?typeof l.insert=="string"&&l.insert.endsWith(`
`):l.attributes!=null?Object.keys(l.attributes).some(function(b){return g.default.query(b,g.default.Scope.BLOCK)!=null}):!1}function y(u){var l=u.reduce(function(O,S){return O+=S.delete||0,O},0),b=u.length()-l;return v(u)&&(b-=1),b}n.default=E,n.getLastChangeIndex=y},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var p=function(){function H(F,J){for(var j=0;j<J.length;j++){var q=J[j];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(F,q.key,q)}}return function(F,J,j){return J&&H(F.prototype,J),j&&H(F,j),F}}(),w=function H(F,J,j){F===null&&(F=Function.prototype);var q=Object.getOwnPropertyDescriptor(F,J);if(q===void 0){var K=Object.getPrototypeOf(F);return K===null?void 0:H(K,J,j)}else{if("value"in q)return q.value;var B=q.get;return B===void 0?void 0:B.call(j)}},g=a(3),h=L(g),m=a(2),_=L(m),o=a(8),r=L(o),s=a(35),c=L(s),d=a(34),E=L(d),v=a(59),y=L(v),u=a(60),l=L(u),b=a(28),O=L(b),S=a(61),C=L(S);function L(H){return H&&H.__esModule?H:{default:H}}function A(H,F){if(!(H instanceof F))throw new TypeError("Cannot call a class as a function")}function k(H,F){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:H}function x(H,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);H.prototype=Object.create(F&&F.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(H,F):H.__proto__=F)}var N=[!1,"center","right","justify"],M=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],I=[!1,"serif","monospace"],U=["1","2","3",!1],Y=["small",!1,"large","huge"],nt=function(H){x(F,H);function F(J,j){A(this,F);var q=k(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,J,j)),K=function B(W){if(!document.body.contains(J.root))return document.body.removeEventListener("click",B);q.tooltip!=null&&!q.tooltip.root.contains(W.target)&&document.activeElement!==q.tooltip.textbox&&!q.quill.hasFocus()&&q.tooltip.hide(),q.pickers!=null&&q.pickers.forEach(function(it){it.container.contains(W.target)||it.close()})};return J.emitter.listenDOM("click",document.body,K),q}return p(F,[{key:"addModule",value:function(j){var q=w(F.prototype.__proto__||Object.getPrototypeOf(F.prototype),"addModule",this).call(this,j);return j==="toolbar"&&this.extendToolbar(q),q}},{key:"buildButtons",value:function(j,q){j.forEach(function(K){var B=K.getAttribute("class")||"";B.split(/\s+/).forEach(function(W){if(W.startsWith("ql-")&&(W=W.slice(3),q[W]!=null))if(W==="direction")K.innerHTML=q[W][""]+q[W].rtl;else if(typeof q[W]=="string")K.innerHTML=q[W];else{var it=K.value||"";it!=null&&q[W][it]&&(K.innerHTML=q[W][it])}})})}},{key:"buildPickers",value:function(j,q){var K=this;this.pickers=j.map(function(W){if(W.classList.contains("ql-align"))return W.querySelector("option")==null&&P(W,N),new l.default(W,q.align);if(W.classList.contains("ql-background")||W.classList.contains("ql-color")){var it=W.classList.contains("ql-background")?"background":"color";return W.querySelector("option")==null&&P(W,M,it==="background"?"#ffffff":"#000000"),new y.default(W,q[it])}else return W.querySelector("option")==null&&(W.classList.contains("ql-font")?P(W,I):W.classList.contains("ql-header")?P(W,U):W.classList.contains("ql-size")&&P(W,Y)),new O.default(W)});var B=function(){K.pickers.forEach(function(it){it.update()})};this.quill.on(r.default.events.EDITOR_CHANGE,B)}}]),F}(E.default);nt.DEFAULTS=(0,h.default)(!0,{},E.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var F=this,J=this.container.querySelector("input.ql-image[type=file]");J==null&&(J=document.createElement("input"),J.setAttribute("type","file"),J.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),J.classList.add("ql-image"),J.addEventListener("change",function(){if(J.files!=null&&J.files[0]!=null){var j=new FileReader;j.onload=function(q){var K=F.quill.getSelection(!0);F.quill.updateContents(new _.default().retain(K.index).delete(K.length).insert({image:q.target.result}),r.default.sources.USER),F.quill.setSelection(K.index+1,r.default.sources.SILENT),J.value=""},j.readAsDataURL(J.files[0])}}),this.container.appendChild(J)),J.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var z=function(H){x(F,H);function F(J,j){A(this,F);var q=k(this,(F.__proto__||Object.getPrototypeOf(F)).call(this,J,j));return q.textbox=q.root.querySelector('input[type="text"]'),q.listen(),q}return p(F,[{key:"listen",value:function(){var j=this;this.textbox.addEventListener("keydown",function(q){c.default.match(q,"enter")?(j.save(),q.preventDefault()):c.default.match(q,"escape")&&(j.cancel(),q.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),q!=null?this.textbox.value=q:j!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+j)||""),this.root.setAttribute("data-mode",j)}},{key:"restoreFocus",value:function(){var j=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=j}},{key:"save",value:function(){var j=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var q=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",j,r.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",j,r.default.sources.USER)),this.quill.root.scrollTop=q;break}case"video":j=V(j);case"formula":{if(!j)break;var K=this.quill.getSelection(!0);if(K!=null){var B=K.index+K.length;this.quill.insertEmbed(B,this.root.getAttribute("data-mode"),j,r.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(B+1," ",r.default.sources.USER),this.quill.setSelection(B+2,r.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),F}(C.default);function V(H){var F=H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||H.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return F?(F[1]||"https")+"://www.youtube.com/embed/"+F[2]+"?showinfo=0":(F=H.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(F[1]||"https")+"://player.vimeo.com/video/"+F[2]+"/":H}function P(H,F){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;F.forEach(function(j){var q=document.createElement("option");j===J?q.setAttribute("selected","selected"):q.setAttribute("value",j),H.appendChild(q)})}n.BaseTooltip=z,n.default=nt},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function w(){this.head=this.tail=void 0,this.length=0}return w.prototype.append=function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];this.insertBefore(g[0],void 0),g.length>1&&this.append.apply(this,g.slice(1))},w.prototype.contains=function(g){for(var h,m=this.iterator();h=m();)if(h===g)return!0;return!1},w.prototype.insertBefore=function(g,h){g.next=h,h!=null?(g.prev=h.prev,h.prev!=null&&(h.prev.next=g),h.prev=g,h===this.head&&(this.head=g)):this.tail!=null?(this.tail.next=g,g.prev=this.tail,this.tail=g):(g.prev=void 0,this.head=this.tail=g),this.length+=1},w.prototype.offset=function(g){for(var h=0,m=this.head;m!=null;){if(m===g)return h;h+=m.length(),m=m.next}return-1},w.prototype.remove=function(g){this.contains(g)&&(g.prev!=null&&(g.prev.next=g.next),g.next!=null&&(g.next.prev=g.prev),g===this.head&&(this.head=g.next),g===this.tail&&(this.tail=g.prev),this.length-=1)},w.prototype.iterator=function(g){return g===void 0&&(g=this.head),function(){var h=g;return g!=null&&(g=g.next),h}},w.prototype.find=function(g,h){h===void 0&&(h=!1);for(var m,_=this.iterator();m=_();){var o=m.length();if(g<o||h&&g===o&&(m.next==null||m.next.length()!==0))return[m,g];g-=o}return[null,0]},w.prototype.forEach=function(g){for(var h,m=this.iterator();h=m();)g(h)},w.prototype.forEachAt=function(g,h,m){if(!(h<=0))for(var _=this.find(g),o=_[0],r=_[1],s,c=g-r,d=this.iterator(o);(s=d())&&c<g+h;){var E=s.length();g>c?m(s,g-c,Math.min(h,c+E-g)):m(s,0,Math.min(E,g+h-c)),c+=E}},w.prototype.map=function(g){return this.reduce(function(h,m){return h.push(g(m)),h},[])},w.prototype.reduce=function(g,h){for(var m,_=this.iterator();m=_();)h=g(h,m);return h},w}();n.default=p},function(e,n,a){var p=this&&this.__extends||function(){var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var c in s)s.hasOwnProperty(c)&&(r[c]=s[c])};return function(r,s){o(r,s);function c(){this.constructor=r}r.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(17),g=a(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},m=100,_=function(o){p(r,o);function r(s){var c=o.call(this,s)||this;return c.parent=null,c.observer=new MutationObserver(function(d){c.update(d)}),c.observer.observe(c.domNode,h),c.scroll=c,c}return r.prototype.detach=function(){o.prototype.detach.call(this),this.observer.disconnect()},r.prototype.deleteAt=function(s,c){this.update(),s===0&&c===this.length()?this.children.forEach(function(d){d.remove()}):o.prototype.deleteAt.call(this,s,c)},r.prototype.formatAt=function(s,c,d,E){this.update(),o.prototype.formatAt.call(this,s,c,d,E)},r.prototype.insertAt=function(s,c,d){this.update(),o.prototype.insertAt.call(this,s,c,d)},r.prototype.optimize=function(s,c){var d=this;s===void 0&&(s=[]),c===void 0&&(c={}),o.prototype.optimize.call(this,c);for(var E=[].slice.call(this.observer.takeRecords());E.length>0;)s.push(E.pop());for(var v=function(b,O){O===void 0&&(O=!0),!(b==null||b===d)&&b.domNode.parentNode!=null&&(b.domNode[g.DATA_KEY].mutations==null&&(b.domNode[g.DATA_KEY].mutations=[]),O&&v(b.parent))},y=function(b){b.domNode[g.DATA_KEY]==null||b.domNode[g.DATA_KEY].mutations==null||(b instanceof w.default&&b.children.forEach(y),b.optimize(c))},u=s,l=0;u.length>0;l+=1){if(l>=m)throw new Error("[Parchment] Maximum optimize iterations reached");for(u.forEach(function(b){var O=g.find(b.target,!0);O!=null&&(O.domNode===b.target&&(b.type==="childList"?(v(g.find(b.previousSibling,!1)),[].forEach.call(b.addedNodes,function(S){var C=g.find(S,!1);v(C,!1),C instanceof w.default&&C.children.forEach(function(L){v(L,!1)})})):b.type==="attributes"&&v(O.prev)),v(O))}),this.children.forEach(y),u=[].slice.call(this.observer.takeRecords()),E=u.slice();E.length>0;)s.push(E.pop())}},r.prototype.update=function(s,c){var d=this;c===void 0&&(c={}),s=s||this.observer.takeRecords(),s.map(function(E){var v=g.find(E.target,!0);if(v!=null)return v.domNode[g.DATA_KEY].mutations==null?(v.domNode[g.DATA_KEY].mutations=[E],v):(v.domNode[g.DATA_KEY].mutations.push(E),null)}).forEach(function(E){E==null||E===d||E.domNode[g.DATA_KEY]==null||E.update(E.domNode[g.DATA_KEY].mutations||[],c)}),this.domNode[g.DATA_KEY].mutations!=null&&o.prototype.update.call(this,this.domNode[g.DATA_KEY].mutations,c),this.optimize(s,c)},r.blotName="scroll",r.defaultChild="block",r.scope=g.Scope.BLOCK_BLOT,r.tagName="DIV",r}(w.default);n.default=_},function(e,n,a){var p=this&&this.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])};return function(o,r){_(o,r);function s(){this.constructor=o}o.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(18),g=a(1);function h(_,o){if(Object.keys(_).length!==Object.keys(o).length)return!1;for(var r in _)if(_[r]!==o[r])return!1;return!0}var m=function(_){p(o,_);function o(){return _!==null&&_.apply(this,arguments)||this}return o.formats=function(r){if(r.tagName!==o.tagName)return _.formats.call(this,r)},o.prototype.format=function(r,s){var c=this;r===this.statics.blotName&&!s?(this.children.forEach(function(d){d instanceof w.default||(d=d.wrap(o.blotName,!0)),c.attributes.copy(d)}),this.unwrap()):_.prototype.format.call(this,r,s)},o.prototype.formatAt=function(r,s,c,d){if(this.formats()[c]!=null||g.query(c,g.Scope.ATTRIBUTE)){var E=this.isolate(r,s);E.format(c,d)}else _.prototype.formatAt.call(this,r,s,c,d)},o.prototype.optimize=function(r){_.prototype.optimize.call(this,r);var s=this.formats();if(Object.keys(s).length===0)return this.unwrap();var c=this.next;c instanceof o&&c.prev===this&&h(s,c.formats())&&(c.moveChildren(this),c.remove())},o.blotName="inline",o.scope=g.Scope.INLINE_BLOT,o.tagName="SPAN",o}(w.default);n.default=m},function(e,n,a){var p=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,o){_.__proto__=o}||function(_,o){for(var r in o)o.hasOwnProperty(r)&&(_[r]=o[r])};return function(_,o){m(_,o);function r(){this.constructor=_}_.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(18),g=a(1),h=function(m){p(_,m);function _(){return m!==null&&m.apply(this,arguments)||this}return _.formats=function(o){var r=g.query(_.blotName).tagName;if(o.tagName!==r)return m.formats.call(this,o)},_.prototype.format=function(o,r){g.query(o,g.Scope.BLOCK)!=null&&(o===this.statics.blotName&&!r?this.replaceWith(_.blotName):m.prototype.format.call(this,o,r))},_.prototype.formatAt=function(o,r,s,c){g.query(s,g.Scope.BLOCK)!=null?this.format(s,c):m.prototype.formatAt.call(this,o,r,s,c)},_.prototype.insertAt=function(o,r,s){if(s==null||g.query(r,g.Scope.INLINE)!=null)m.prototype.insertAt.call(this,o,r,s);else{var c=this.split(o),d=g.create(r,s);c.parent.insertBefore(d,c)}},_.prototype.update=function(o,r){navigator.userAgent.match(/Trident/)?this.attach():m.prototype.update.call(this,o,r)},_.blotName="block",_.scope=g.Scope.BLOCK_BLOT,_.tagName="P",_}(w.default);n.default=h},function(e,n,a){var p=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var o in _)_.hasOwnProperty(o)&&(m[o]=_[o])};return function(m,_){h(m,_);function o(){this.constructor=m}m.prototype=_===null?Object.create(_):(o.prototype=_.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(19),g=function(h){p(m,h);function m(){return h!==null&&h.apply(this,arguments)||this}return m.formats=function(_){},m.prototype.format=function(_,o){h.prototype.formatAt.call(this,0,this.length(),_,o)},m.prototype.formatAt=function(_,o,r,s){_===0&&o===this.length()?this.format(r,s):h.prototype.formatAt.call(this,_,o,r,s)},m.prototype.formats=function(){return this.statics.formats(this.domNode)},m}(w.default);n.default=g},function(e,n,a){var p=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,o){_.__proto__=o}||function(_,o){for(var r in o)o.hasOwnProperty(r)&&(_[r]=o[r])};return function(_,o){m(_,o);function r(){this.constructor=_}_.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(n,"__esModule",{value:!0});var w=a(19),g=a(1),h=function(m){p(_,m);function _(o){var r=m.call(this,o)||this;return r.text=r.statics.value(r.domNode),r}return _.create=function(o){return document.createTextNode(o)},_.value=function(o){var r=o.data;return r.normalize&&(r=r.normalize()),r},_.prototype.deleteAt=function(o,r){this.domNode.data=this.text=this.text.slice(0,o)+this.text.slice(o+r)},_.prototype.index=function(o,r){return this.domNode===o?r:-1},_.prototype.insertAt=function(o,r,s){s==null?(this.text=this.text.slice(0,o)+r+this.text.slice(o),this.domNode.data=this.text):m.prototype.insertAt.call(this,o,r,s)},_.prototype.length=function(){return this.text.length},_.prototype.optimize=function(o){m.prototype.optimize.call(this,o),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof _&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},_.prototype.position=function(o,r){return[this.domNode,o]},_.prototype.split=function(o,r){if(r===void 0&&(r=!1),!r){if(o===0)return this;if(o===this.length())return this.next}var s=g.create(this.domNode.splitText(o));return this.parent.insertBefore(s,this.next),this.text=this.statics.value(this.domNode),s},_.prototype.update=function(o,r){var s=this;o.some(function(c){return c.type==="characterData"&&c.target===s.domNode})&&(this.text=this.statics.value(this.domNode))},_.prototype.value=function(){return this.text},_.blotName="text",_.scope=g.Scope.INLINE_BLOT,_}(w.default);n.default=h},function(e,n,a){var p=document.createElement("div");if(p.classList.toggle("test-class",!1),p.classList.contains("test-class")){var w=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(g,h){return arguments.length>1&&!this.contains(g)==!h?h:w.call(this,g)}}String.prototype.startsWith||(String.prototype.startsWith=function(g,h){return h=h||0,this.substr(h,g.length)===g}),String.prototype.endsWith||(String.prototype.endsWith=function(g,h){var m=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>m.length)&&(h=m.length),h-=g.length;var _=m.indexOf(g,h);return _!==-1&&_===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var m=Object(this),_=m.length>>>0,o=arguments[1],r,s=0;s<_;s++)if(r=m[s],h.call(o,r,s,m))return r}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,n){var a=-1,p=1,w=0;function g(l,b,O){if(l==b)return l?[[w,l]]:[];(O<0||l.length<O)&&(O=null);var S=o(l,b),C=l.substring(0,S);l=l.substring(S),b=b.substring(S),S=r(l,b);var L=l.substring(l.length-S);l=l.substring(0,l.length-S),b=b.substring(0,b.length-S);var A=h(l,b);return C&&A.unshift([w,C]),L&&A.push([w,L]),c(A),O!=null&&(A=v(A,O)),A=y(A),A}function h(l,b){var O;if(!l)return[[p,b]];if(!b)return[[a,l]];var S=l.length>b.length?l:b,C=l.length>b.length?b:l,L=S.indexOf(C);if(L!=-1)return O=[[p,S.substring(0,L)],[w,C],[p,S.substring(L+C.length)]],l.length>b.length&&(O[0][0]=O[2][0]=a),O;if(C.length==1)return[[a,l],[p,b]];var A=s(l,b);if(A){var k=A[0],x=A[1],N=A[2],M=A[3],I=A[4],U=g(k,N),Y=g(x,M);return U.concat([[w,I]],Y)}return m(l,b)}function m(l,b){for(var O=l.length,S=b.length,C=Math.ceil((O+S)/2),L=C,A=2*C,k=new Array(A),x=new Array(A),N=0;N<A;N++)k[N]=-1,x[N]=-1;k[L+1]=0,x[L+1]=0;for(var M=O-S,I=M%2!=0,U=0,Y=0,nt=0,z=0,V=0;V<C;V++){for(var P=-V+U;P<=V-Y;P+=2){var H=L+P,F;P==-V||P!=V&&k[H-1]<k[H+1]?F=k[H+1]:F=k[H-1]+1;for(var J=F-P;F<O&&J<S&&l.charAt(F)==b.charAt(J);)F++,J++;if(k[H]=F,F>O)Y+=2;else if(J>S)U+=2;else if(I){var j=L+M-P;if(j>=0&&j<A&&x[j]!=-1){var q=O-x[j];if(F>=q)return _(l,b,F,J)}}}for(var K=-V+nt;K<=V-z;K+=2){var j=L+K,q;K==-V||K!=V&&x[j-1]<x[j+1]?q=x[j+1]:q=x[j-1]+1;for(var B=q-K;q<O&&B<S&&l.charAt(O-q-1)==b.charAt(S-B-1);)q++,B++;if(x[j]=q,q>O)z+=2;else if(B>S)nt+=2;else if(!I){var H=L+M-K;if(H>=0&&H<A&&k[H]!=-1){var F=k[H],J=L+F-H;if(q=O-q,F>=q)return _(l,b,F,J)}}}}return[[a,l],[p,b]]}function _(l,b,O,S){var C=l.substring(0,O),L=b.substring(0,S),A=l.substring(O),k=b.substring(S),x=g(C,L),N=g(A,k);return x.concat(N)}function o(l,b){if(!l||!b||l.charAt(0)!=b.charAt(0))return 0;for(var O=0,S=Math.min(l.length,b.length),C=S,L=0;O<C;)l.substring(L,C)==b.substring(L,C)?(O=C,L=O):S=C,C=Math.floor((S-O)/2+O);return C}function r(l,b){if(!l||!b||l.charAt(l.length-1)!=b.charAt(b.length-1))return 0;for(var O=0,S=Math.min(l.length,b.length),C=S,L=0;O<C;)l.substring(l.length-C,l.length-L)==b.substring(b.length-C,b.length-L)?(O=C,L=O):S=C,C=Math.floor((S-O)/2+O);return C}function s(l,b){var O=l.length>b.length?l:b,S=l.length>b.length?b:l;if(O.length<4||S.length*2<O.length)return null;function C(Y,nt,z){for(var V=Y.substring(z,z+Math.floor(Y.length/4)),P=-1,H="",F,J,j,q;(P=nt.indexOf(V,P+1))!=-1;){var K=o(Y.substring(z),nt.substring(P)),B=r(Y.substring(0,z),nt.substring(0,P));H.length<B+K&&(H=nt.substring(P-B,P)+nt.substring(P,P+K),F=Y.substring(0,z-B),J=Y.substring(z+K),j=nt.substring(0,P-B),q=nt.substring(P+K))}return H.length*2>=Y.length?[F,J,j,q,H]:null}var L=C(O,S,Math.ceil(O.length/4)),A=C(O,S,Math.ceil(O.length/2)),k;if(!L&&!A)return null;A?L?k=L[4].length>A[4].length?L:A:k=A:k=L;var x,N,M,I;l.length>b.length?(x=k[0],N=k[1],M=k[2],I=k[3]):(M=k[0],I=k[1],x=k[2],N=k[3]);var U=k[4];return[x,N,M,I,U]}function c(l){l.push([w,""]);for(var b=0,O=0,S=0,C="",L="",A;b<l.length;)switch(l[b][0]){case p:S++,L+=l[b][1],b++;break;case a:O++,C+=l[b][1],b++;break;case w:O+S>1?(O!==0&&S!==0&&(A=o(L,C),A!==0&&(b-O-S>0&&l[b-O-S-1][0]==w?l[b-O-S-1][1]+=L.substring(0,A):(l.splice(0,0,[w,L.substring(0,A)]),b++),L=L.substring(A),C=C.substring(A)),A=r(L,C),A!==0&&(l[b][1]=L.substring(L.length-A)+l[b][1],L=L.substring(0,L.length-A),C=C.substring(0,C.length-A))),O===0?l.splice(b-S,O+S,[p,L]):S===0?l.splice(b-O,O+S,[a,C]):l.splice(b-O-S,O+S,[a,C],[p,L]),b=b-O-S+(O?1:0)+(S?1:0)+1):b!==0&&l[b-1][0]==w?(l[b-1][1]+=l[b][1],l.splice(b,1)):b++,S=0,O=0,C="",L="";break}l[l.length-1][1]===""&&l.pop();var k=!1;for(b=1;b<l.length-1;)l[b-1][0]==w&&l[b+1][0]==w&&(l[b][1].substring(l[b][1].length-l[b-1][1].length)==l[b-1][1]?(l[b][1]=l[b-1][1]+l[b][1].substring(0,l[b][1].length-l[b-1][1].length),l[b+1][1]=l[b-1][1]+l[b+1][1],l.splice(b-1,1),k=!0):l[b][1].substring(0,l[b+1][1].length)==l[b+1][1]&&(l[b-1][1]+=l[b+1][1],l[b][1]=l[b][1].substring(l[b+1][1].length)+l[b+1][1],l.splice(b+1,1),k=!0)),b++;k&&c(l)}var d=g;d.INSERT=p,d.DELETE=a,d.EQUAL=w,e.exports=d;function E(l,b){if(b===0)return[w,l];for(var O=0,S=0;S<l.length;S++){var C=l[S];if(C[0]===a||C[0]===w){var L=O+C[1].length;if(b===L)return[S+1,l];if(b<L){l=l.slice();var A=b-O,k=[C[0],C[1].slice(0,A)],x=[C[0],C[1].slice(A)];return l.splice(S,1,k,x),[S+1,l]}else O=L}}throw new Error("cursor_pos is out of bounds!")}function v(l,b){var O=E(l,b),S=O[1],C=O[0],L=S[C],A=S[C+1];if(L==null)return l;if(L[0]!==w)return l;if(A!=null&&L[1]+A[1]===A[1]+L[1])return S.splice(C,2,A,L),u(S,C,2);if(A!=null&&A[1].indexOf(L[1])===0){S.splice(C,2,[A[0],L[1]],[0,L[1]]);var k=A[1].slice(L[1].length);return k.length>0&&S.splice(C+2,0,[A[0],k]),u(S,C,3)}else return l}function y(l){for(var b=!1,O=function(A){return A.charCodeAt(0)>=56320&&A.charCodeAt(0)<=57343},S=function(A){return A.charCodeAt(A.length-1)>=55296&&A.charCodeAt(A.length-1)<=56319},C=2;C<l.length;C+=1)l[C-2][0]===w&&S(l[C-2][1])&&l[C-1][0]===a&&O(l[C-1][1])&&l[C][0]===p&&O(l[C][1])&&(b=!0,l[C-1][1]=l[C-2][1].slice(-1)+l[C-1][1],l[C][1]=l[C-2][1].slice(-1)+l[C][1],l[C-2][1]=l[C-2][1].slice(0,-1));if(!b)return l;for(var L=[],C=0;C<l.length;C+=1)l[C][1].length>0&&L.push(l[C]);return L}function u(l,b,O){for(var S=b+O-1;S>=0&&S>=b-1;S--)if(S+1<l.length){var C=l[S],L=l[S+1];C[0]===L[1]&&l.splice(S,2,[C[0],C[1]+L[1]])}return l}},function(e,n){n=e.exports=typeof Object.keys=="function"?Object.keys:a,n.shim=a;function a(p){var w=[];for(var g in p)w.push(g);return w}},function(e,n){var a=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=e.exports=a?p:w,n.supported=p;function p(g){return Object.prototype.toString.call(g)=="[object Arguments]"}n.unsupported=w;function w(g){return g&&typeof g=="object"&&typeof g.length=="number"&&Object.prototype.hasOwnProperty.call(g,"callee")&&!Object.prototype.propertyIsEnumerable.call(g,"callee")||!1}},function(e,n){var a=Object.prototype.hasOwnProperty,p="~";function w(){}Object.create&&(w.prototype=Object.create(null),new w().__proto__||(p=!1));function g(m,_,o){this.fn=m,this.context=_,this.once=o||!1}function h(){this._events=new w,this._eventsCount=0}h.prototype.eventNames=function(){var _=[],o,r;if(this._eventsCount===0)return _;for(r in o=this._events)a.call(o,r)&&_.push(p?r.slice(1):r);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(o)):_},h.prototype.listeners=function(_,o){var r=p?p+_:_,s=this._events[r];if(o)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var c=0,d=s.length,E=new Array(d);c<d;c++)E[c]=s[c].fn;return E},h.prototype.emit=function(_,o,r,s,c,d){var E=p?p+_:_;if(!this._events[E])return!1;var v=this._events[E],y=arguments.length,u,l;if(v.fn){switch(v.once&&this.removeListener(_,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,o),!0;case 3:return v.fn.call(v.context,o,r),!0;case 4:return v.fn.call(v.context,o,r,s),!0;case 5:return v.fn.call(v.context,o,r,s,c),!0;case 6:return v.fn.call(v.context,o,r,s,c,d),!0}for(l=1,u=new Array(y-1);l<y;l++)u[l-1]=arguments[l];v.fn.apply(v.context,u)}else{var b=v.length,O;for(l=0;l<b;l++)switch(v[l].once&&this.removeListener(_,v[l].fn,void 0,!0),y){case 1:v[l].fn.call(v[l].context);break;case 2:v[l].fn.call(v[l].context,o);break;case 3:v[l].fn.call(v[l].context,o,r);break;case 4:v[l].fn.call(v[l].context,o,r,s);break;default:if(!u)for(O=1,u=new Array(y-1);O<y;O++)u[O-1]=arguments[O];v[l].fn.apply(v[l].context,u)}}return!0},h.prototype.on=function(_,o,r){var s=new g(o,r||this),c=p?p+_:_;return this._events[c]?this._events[c].fn?this._events[c]=[this._events[c],s]:this._events[c].push(s):(this._events[c]=s,this._eventsCount++),this},h.prototype.once=function(_,o,r){var s=new g(o,r||this,!0),c=p?p+_:_;return this._events[c]?this._events[c].fn?this._events[c]=[this._events[c],s]:this._events[c].push(s):(this._events[c]=s,this._eventsCount++),this},h.prototype.removeListener=function(_,o,r,s){var c=p?p+_:_;if(!this._events[c])return this;if(!o)return--this._eventsCount===0?this._events=new w:delete this._events[c],this;var d=this._events[c];if(d.fn)d.fn===o&&(!s||d.once)&&(!r||d.context===r)&&(--this._eventsCount===0?this._events=new w:delete this._events[c]);else{for(var E=0,v=[],y=d.length;E<y;E++)(d[E].fn!==o||s&&!d[E].once||r&&d[E].context!==r)&&v.push(d[E]);v.length?this._events[c]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new w:delete this._events[c]}return this},h.prototype.removeAllListeners=function(_){var o;return _?(o=p?p+_:_,this._events[o]&&(--this._eventsCount===0?this._events=new w:delete this._events[o])):(this._events=new w,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=p,h.EventEmitter=h,typeof e<"u"&&(e.exports=h)},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},w=function(){function X(D,f){var T=[],R=!0,$=!1,G=void 0;try{for(var Q=D[Symbol.iterator](),ft;!(R=(ft=Q.next()).done)&&(T.push(ft.value),!(f&&T.length===f));R=!0);}catch(gt){$=!0,G=gt}finally{try{!R&&Q.return&&Q.return()}finally{if($)throw G}}return T}return function(D,f){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return X(D,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function X(D,f){for(var T=0;T<f.length;T++){var R=f[T];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(D,R.key,R)}}return function(D,f,T){return f&&X(D.prototype,f),T&&X(D,T),D}}(),h=a(3),m=x(h),_=a(2),o=x(_),r=a(0),s=x(r),c=a(5),d=x(c),E=a(10),v=x(E),y=a(9),u=x(y),l=a(36),b=a(37),O=a(13),S=x(O),C=a(26),L=a(38),A=a(39),k=a(40);function x(X){return X&&X.__esModule?X:{default:X}}function N(X,D,f){return D in X?Object.defineProperty(X,D,{value:f,enumerable:!0,configurable:!0,writable:!0}):X[D]=f,X}function M(X,D){if(!(X instanceof D))throw new TypeError("Cannot call a class as a function")}function I(X,D){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:X}function U(X,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);X.prototype=Object.create(D&&D.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(X,D):X.__proto__=D)}var Y=(0,v.default)("quill:clipboard"),nt="__ql-matcher",z=[[Node.TEXT_NODE,lt],[Node.TEXT_NODE,ht],["br",ot],[Node.ELEMENT_NODE,ht],[Node.ELEMENT_NODE,it],[Node.ELEMENT_NODE,Z],[Node.ELEMENT_NODE,W],[Node.ELEMENT_NODE,et],["li",ct],["b",B.bind(B,"bold")],["i",B.bind(B,"italic")],["style",st]],V=[l.AlignAttribute,L.DirectionAttribute].reduce(function(X,D){return X[D.keyName]=D,X},{}),P=[l.AlignStyle,b.BackgroundStyle,C.ColorStyle,L.DirectionStyle,A.FontStyle,k.SizeStyle].reduce(function(X,D){return X[D.keyName]=D,X},{}),H=function(X){U(D,X);function D(f,T){M(this,D);var R=I(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,f,T));return R.quill.root.addEventListener("paste",R.onPaste.bind(R)),R.container=R.quill.addContainer("ql-clipboard"),R.container.setAttribute("contenteditable",!0),R.container.setAttribute("tabindex",-1),R.matchers=[],z.concat(R.options.matchers).forEach(function($){var G=w($,2),Q=G[0],ft=G[1];!T.matchVisual&&ft===Z||R.addMatcher(Q,ft)}),R}return g(D,[{key:"addMatcher",value:function(T,R){this.matchers.push([T,R])}},{key:"convert",value:function(T){if(typeof T=="string")return this.container.innerHTML=T.replace(/\>\r?\n +\</g,"><"),this.convert();var R=this.quill.getFormat(this.quill.selection.savedRange.index);if(R[S.default.blotName]){var $=this.container.innerText;return this.container.innerHTML="",new o.default().insert($,N({},S.default.blotName,R[S.default.blotName]))}var G=this.prepareMatching(),Q=w(G,2),ft=Q[0],gt=Q[1],mt=K(this.container,ft,gt);return j(mt,`
`)&&mt.ops[mt.ops.length-1].attributes==null&&(mt=mt.compose(new o.default().retain(mt.length()-1).delete(1))),Y.log("convert",this.container.innerHTML,mt),this.container.innerHTML="",mt}},{key:"dangerouslyPasteHTML",value:function(T,R){var $=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;if(typeof T=="string")return this.quill.setContents(this.convert(T),R);var G=this.convert(R);return this.quill.updateContents(new o.default().retain(T).concat(G),$)}},{key:"onPaste",value:function(T){var R=this;if(!(T.defaultPrevented||!this.quill.isEnabled())){var $=this.quill.getSelection(),G=new o.default().retain($.index),Q=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(d.default.sources.SILENT),setTimeout(function(){G=G.concat(R.convert()).delete($.length),R.quill.updateContents(G,d.default.sources.USER),R.quill.setSelection(G.length()-$.length,d.default.sources.SILENT),R.quill.scrollingContainer.scrollTop=Q,R.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var T=this,R=[],$=[];return this.matchers.forEach(function(G){var Q=w(G,2),ft=Q[0],gt=Q[1];switch(ft){case Node.TEXT_NODE:$.push(gt);break;case Node.ELEMENT_NODE:R.push(gt);break;default:[].forEach.call(T.container.querySelectorAll(ft),function(mt){mt[nt]=mt[nt]||[],mt[nt].push(gt)});break}}),[R,$]}}]),D}(u.default);H.DEFAULTS={matchers:[],matchVisual:!0};function F(X,D,f){return(typeof D>"u"?"undefined":p(D))==="object"?Object.keys(D).reduce(function(T,R){return F(T,R,D[R])},X):X.reduce(function(T,R){return R.attributes&&R.attributes[D]?T.push(R):T.insert(R.insert,(0,m.default)({},N({},D,f),R.attributes))},new o.default)}function J(X){if(X.nodeType!==Node.ELEMENT_NODE)return{};var D="__ql-computed-style";return X[D]||(X[D]=window.getComputedStyle(X))}function j(X,D){for(var f="",T=X.ops.length-1;T>=0&&f.length<D.length;--T){var R=X.ops[T];if(typeof R.insert!="string")break;f=R.insert+f}return f.slice(-1*D.length)===D}function q(X){if(X.childNodes.length===0)return!1;var D=J(X);return["block","list-item"].indexOf(D.display)>-1}function K(X,D,f){return X.nodeType===X.TEXT_NODE?f.reduce(function(T,R){return R(X,T)},new o.default):X.nodeType===X.ELEMENT_NODE?[].reduce.call(X.childNodes||[],function(T,R){var $=K(R,D,f);return R.nodeType===X.ELEMENT_NODE&&($=D.reduce(function(G,Q){return Q(R,G)},$),$=(R[nt]||[]).reduce(function(G,Q){return Q(R,G)},$)),T.concat($)},new o.default):new o.default}function B(X,D,f){return F(f,X,!0)}function W(X,D){var f=s.default.Attributor.Attribute.keys(X),T=s.default.Attributor.Class.keys(X),R=s.default.Attributor.Style.keys(X),$={};return f.concat(T).concat(R).forEach(function(G){var Q=s.default.query(G,s.default.Scope.ATTRIBUTE);Q!=null&&($[Q.attrName]=Q.value(X),$[Q.attrName])||(Q=V[G],Q!=null&&Q.attrName===G&&($[Q.attrName]=Q.value(X)||void 0),Q=P[G],Q!=null&&Q.attrName===G&&(Q=P[G],$[Q.attrName]=Q.value(X)||void 0))}),Object.keys($).length>0&&(D=F(D,$)),D}function it(X,D){var f=s.default.query(X);if(f==null)return D;if(f.prototype instanceof s.default.Embed){var T={},R=f.value(X);R!=null&&(T[f.blotName]=R,D=new o.default().insert(T,f.formats(X)))}else typeof f.formats=="function"&&(D=F(D,f.blotName,f.formats(X)));return D}function ot(X,D){return j(D,`
`)||D.insert(`
`),D}function st(){return new o.default}function ct(X,D){var f=s.default.query(X);if(f==null||f.blotName!=="list-item"||!j(D,`
`))return D;for(var T=-1,R=X.parentNode;!R.classList.contains("ql-clipboard");)(s.default.query(R)||{}).blotName==="list"&&(T+=1),R=R.parentNode;return T<=0?D:D.compose(new o.default().retain(D.length()-1).retain(1,{indent:T}))}function ht(X,D){return j(D,`
`)||(q(X)||D.length()>0&&X.nextSibling&&q(X.nextSibling))&&D.insert(`
`),D}function Z(X,D){if(q(X)&&X.nextElementSibling!=null&&!j(D,`

`)){var f=X.offsetHeight+parseFloat(J(X).marginTop)+parseFloat(J(X).marginBottom);X.nextElementSibling.offsetTop>X.offsetTop+f*1.5&&D.insert(`
`)}return D}function et(X,D){var f={},T=X.style||{};return T.fontStyle&&J(X).fontStyle==="italic"&&(f.italic=!0),T.fontWeight&&(J(X).fontWeight.startsWith("bold")||parseInt(J(X).fontWeight)>=700)&&(f.bold=!0),Object.keys(f).length>0&&(D=F(D,f)),parseFloat(T.textIndent||0)>0&&(D=new o.default().insert("	").concat(D)),D}function lt(X,D){var f=X.data;if(X.parentNode.tagName==="O:P")return D.insert(f.trim());if(f.trim().length===0&&X.parentNode.classList.contains("ql-clipboard"))return D;if(!J(X.parentNode).whiteSpace.startsWith("pre")){var T=function($,G){return G=G.replace(/[^\u00a0]/g,""),G.length<1&&$?" ":G};f=f.replace(/\r\n/g," ").replace(/\n/g," "),f=f.replace(/\s\s+/g,T.bind(T,!0)),(X.previousSibling==null&&q(X.parentNode)||X.previousSibling!=null&&q(X.previousSibling))&&(f=f.replace(/^\s+/,T.bind(T,!1))),(X.nextSibling==null&&q(X.parentNode)||X.nextSibling!=null&&q(X.nextSibling))&&(f=f.replace(/\s+$/,T.bind(T,!1)))}return D.insert(f)}n.default=H,n.matchAttributor=W,n.matchBlot=it,n.matchNewline=ht,n.matchSpacing=Z,n.matchText=lt},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function c(d,E){for(var v=0;v<E.length;v++){var y=E[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,E,v){return E&&c(d.prototype,E),v&&c(d,v),d}}(),w=function c(d,E,v){d===null&&(d=Function.prototype);var y=Object.getOwnPropertyDescriptor(d,E);if(y===void 0){var u=Object.getPrototypeOf(d);return u===null?void 0:c(u,E,v)}else{if("value"in y)return y.value;var l=y.get;return l===void 0?void 0:l.call(v)}},g=a(6),h=m(g);function m(c){return c&&c.__esModule?c:{default:c}}function _(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function r(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var s=function(c){r(d,c);function d(){return _(this,d),o(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return p(d,[{key:"optimize",value:function(v){w(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return w(d.__proto__||Object.getPrototypeOf(d),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),d}(h.default);s.blotName="bold",s.tagName=["STRONG","B"],n.default=s},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var p=function(){function k(x,N){var M=[],I=!0,U=!1,Y=void 0;try{for(var nt=x[Symbol.iterator](),z;!(I=(z=nt.next()).done)&&(M.push(z.value),!(N&&M.length===N));I=!0);}catch(V){U=!0,Y=V}finally{try{!I&&nt.return&&nt.return()}finally{if(U)throw Y}}return M}return function(x,N){if(Array.isArray(x))return x;if(Symbol.iterator in Object(x))return k(x,N);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function k(x,N){for(var M=0;M<N.length;M++){var I=N[M];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(x,I.key,I)}}return function(x,N,M){return N&&k(x.prototype,N),M&&k(x,M),x}}(),g=a(2),h=v(g),m=a(0),_=v(m),o=a(5),r=v(o),s=a(10),c=v(s),d=a(9),E=v(d);function v(k){return k&&k.__esModule?k:{default:k}}function y(k,x,N){return x in k?Object.defineProperty(k,x,{value:N,enumerable:!0,configurable:!0,writable:!0}):k[x]=N,k}function u(k,x){if(!(k instanceof x))throw new TypeError("Cannot call a class as a function")}function l(k,x){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:k}function b(k,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);k.prototype=Object.create(x&&x.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(k,x):k.__proto__=x)}var O=(0,c.default)("quill:toolbar"),S=function(k){b(x,k);function x(N,M){u(this,x);var I=l(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,N,M));if(Array.isArray(I.options.container)){var U=document.createElement("div");L(U,I.options.container),N.container.parentNode.insertBefore(U,N.container),I.container=U}else typeof I.options.container=="string"?I.container=document.querySelector(I.options.container):I.container=I.options.container;if(!(I.container instanceof HTMLElement)){var Y;return Y=O.error("Container required for toolbar",I.options),l(I,Y)}return I.container.classList.add("ql-toolbar"),I.controls=[],I.handlers={},Object.keys(I.options.handlers).forEach(function(nt){I.addHandler(nt,I.options.handlers[nt])}),[].forEach.call(I.container.querySelectorAll("button, select"),function(nt){I.attach(nt)}),I.quill.on(r.default.events.EDITOR_CHANGE,function(nt,z){nt===r.default.events.SELECTION_CHANGE&&I.update(z)}),I.quill.on(r.default.events.SCROLL_OPTIMIZE,function(){var nt=I.quill.selection.getRange(),z=p(nt,1),V=z[0];I.update(V)}),I}return w(x,[{key:"addHandler",value:function(M,I){this.handlers[M]=I}},{key:"attach",value:function(M){var I=this,U=[].find.call(M.classList,function(nt){return nt.indexOf("ql-")===0});if(U){if(U=U.slice(3),M.tagName==="BUTTON"&&M.setAttribute("type","button"),this.handlers[U]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[U]==null){O.warn("ignoring attaching to disabled format",U,M);return}if(_.default.query(U)==null){O.warn("ignoring attaching to nonexistent format",U,M);return}}var Y=M.tagName==="SELECT"?"change":"click";M.addEventListener(Y,function(nt){var z=void 0;if(M.tagName==="SELECT"){if(M.selectedIndex<0)return;var V=M.options[M.selectedIndex];V.hasAttribute("selected")?z=!1:z=V.value||!1}else M.classList.contains("ql-active")?z=!1:z=M.value||!M.hasAttribute("value"),nt.preventDefault();I.quill.focus();var P=I.quill.selection.getRange(),H=p(P,1),F=H[0];if(I.handlers[U]!=null)I.handlers[U].call(I,z);else if(_.default.query(U).prototype instanceof _.default.Embed){if(z=prompt("Enter "+U),!z)return;I.quill.updateContents(new h.default().retain(F.index).delete(F.length).insert(y({},U,z)),r.default.sources.USER)}else I.quill.format(U,z,r.default.sources.USER);I.update(F)}),this.controls.push([U,M])}}},{key:"update",value:function(M){var I=M==null?{}:this.quill.getFormat(M);this.controls.forEach(function(U){var Y=p(U,2),nt=Y[0],z=Y[1];if(z.tagName==="SELECT"){var V=void 0;if(M==null)V=null;else if(I[nt]==null)V=z.querySelector("option[selected]");else if(!Array.isArray(I[nt])){var P=I[nt];typeof P=="string"&&(P=P.replace(/\"/g,'\\"')),V=z.querySelector('option[value="'+P+'"]')}V==null?(z.value="",z.selectedIndex=-1):V.selected=!0}else if(M==null)z.classList.remove("ql-active");else if(z.hasAttribute("value")){var H=I[nt]===z.getAttribute("value")||I[nt]!=null&&I[nt].toString()===z.getAttribute("value")||I[nt]==null&&!z.getAttribute("value");z.classList.toggle("ql-active",H)}else z.classList.toggle("ql-active",I[nt]!=null)})}}]),x}(E.default);S.DEFAULTS={};function C(k,x,N){var M=document.createElement("button");M.setAttribute("type","button"),M.classList.add("ql-"+x),N!=null&&(M.value=N),k.appendChild(M)}function L(k,x){Array.isArray(x[0])||(x=[x]),x.forEach(function(N){var M=document.createElement("span");M.classList.add("ql-formats"),N.forEach(function(I){if(typeof I=="string")C(M,I);else{var U=Object.keys(I)[0],Y=I[U];Array.isArray(Y)?A(M,U,Y):C(M,U,Y)}}),k.appendChild(M)})}function A(k,x,N){var M=document.createElement("select");M.classList.add("ql-"+x),N.forEach(function(I){var U=document.createElement("option");I!==!1?U.setAttribute("value",I):U.setAttribute("selected","selected"),M.appendChild(U)}),k.appendChild(M)}S.DEFAULTS={container:null,handlers:{clean:function(){var x=this,N=this.quill.getSelection();if(N!=null)if(N.length==0){var M=this.quill.getFormat();Object.keys(M).forEach(function(I){_.default.query(I,_.default.Scope.INLINE)!=null&&x.quill.format(I,!1)})}else this.quill.removeFormat(N,r.default.sources.USER)},direction:function(x){var N=this.quill.getFormat().align;x==="rtl"&&N==null?this.quill.format("align","right",r.default.sources.USER):!x&&N==="right"&&this.quill.format("align",!1,r.default.sources.USER),this.quill.format("direction",x,r.default.sources.USER)},indent:function(x){var N=this.quill.getSelection(),M=this.quill.getFormat(N),I=parseInt(M.indent||0);if(x==="+1"||x==="-1"){var U=x==="+1"?1:-1;M.direction==="rtl"&&(U*=-1),this.quill.format("indent",I+U,r.default.sources.USER)}},link:function(x){x===!0&&(x=prompt("Enter link URL:")),this.quill.format("link",x,r.default.sources.USER)},list:function(x){var N=this.quill.getSelection(),M=this.quill.getFormat(N);x==="check"?M.list==="checked"||M.list==="unchecked"?this.quill.format("list",!1,r.default.sources.USER):this.quill.format("list","unchecked",r.default.sources.USER):this.quill.format("list",x,r.default.sources.USER)}}},n.default=S,n.addControls=L},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function c(d,E){for(var v=0;v<E.length;v++){var y=E[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,E,v){return E&&c(d.prototype,E),v&&c(d,v),d}}(),w=function c(d,E,v){d===null&&(d=Function.prototype);var y=Object.getOwnPropertyDescriptor(d,E);if(y===void 0){var u=Object.getPrototypeOf(d);return u===null?void 0:c(u,E,v)}else{if("value"in y)return y.value;var l=y.get;return l===void 0?void 0:l.call(v)}},g=a(28),h=m(g);function m(c){return c&&c.__esModule?c:{default:c}}function _(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function r(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var s=function(c){r(d,c);function d(E,v){_(this,d);var y=o(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,E));return y.label.innerHTML=v,y.container.classList.add("ql-color-picker"),[].slice.call(y.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(u){u.classList.add("ql-primary")}),y}return p(d,[{key:"buildItem",value:function(v){var y=w(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"buildItem",this).call(this,v);return y.style.backgroundColor=v.getAttribute("value")||"",y}},{key:"selectItem",value:function(v,y){w(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"selectItem",this).call(this,v,y);var u=this.label.querySelector(".ql-color-label"),l=v&&v.getAttribute("data-value")||"";u&&(u.tagName==="line"?u.style.stroke=l:u.style.fill=l)}}]),d}(h.default);n.default=s},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function c(d,E){for(var v=0;v<E.length;v++){var y=E[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,E,v){return E&&c(d.prototype,E),v&&c(d,v),d}}(),w=function c(d,E,v){d===null&&(d=Function.prototype);var y=Object.getOwnPropertyDescriptor(d,E);if(y===void 0){var u=Object.getPrototypeOf(d);return u===null?void 0:c(u,E,v)}else{if("value"in y)return y.value;var l=y.get;return l===void 0?void 0:l.call(v)}},g=a(28),h=m(g);function m(c){return c&&c.__esModule?c:{default:c}}function _(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function r(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var s=function(c){r(d,c);function d(E,v){_(this,d);var y=o(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,E));return y.container.classList.add("ql-icon-picker"),[].forEach.call(y.container.querySelectorAll(".ql-picker-item"),function(u){u.innerHTML=v[u.getAttribute("data-value")||""]}),y.defaultItem=y.container.querySelector(".ql-selected"),y.selectItem(y.defaultItem),y}return p(d,[{key:"selectItem",value:function(v,y){w(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"selectItem",this).call(this,v,y),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),d}(h.default);n.default=s},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function h(m,_){for(var o=0;o<_.length;o++){var r=_[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(m,r.key,r)}}return function(m,_,o){return _&&h(m.prototype,_),o&&h(m,o),m}}();function w(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}var g=function(){function h(m,_){var o=this;w(this,h),this.quill=m,this.boundsContainer=_||document.body,this.root=m.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){o.root.style.marginTop=-1*o.quill.root.scrollTop+"px"}),this.hide()}return p(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(_){var o=_.left+_.width/2-this.root.offsetWidth/2,r=_.bottom+this.quill.root.scrollTop;this.root.style.left=o+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var s=this.boundsContainer.getBoundingClientRect(),c=this.root.getBoundingClientRect(),d=0;if(c.right>s.right&&(d=s.right-c.right,this.root.style.left=o+d+"px"),c.left<s.left&&(d=s.left-c.left,this.root.style.left=o+d+"px"),c.bottom>s.bottom){var E=c.bottom-c.top,v=_.bottom-_.top+E;this.root.style.top=r-v+"px",this.root.classList.add("ql-flip")}return d}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();n.default=g},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function A(k,x){var N=[],M=!0,I=!1,U=void 0;try{for(var Y=k[Symbol.iterator](),nt;!(M=(nt=Y.next()).done)&&(N.push(nt.value),!(x&&N.length===x));M=!0);}catch(z){I=!0,U=z}finally{try{!M&&Y.return&&Y.return()}finally{if(I)throw U}}return N}return function(k,x){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return A(k,x);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function A(k,x,N){k===null&&(k=Function.prototype);var M=Object.getOwnPropertyDescriptor(k,x);if(M===void 0){var I=Object.getPrototypeOf(k);return I===null?void 0:A(I,x,N)}else{if("value"in M)return M.value;var U=M.get;return U===void 0?void 0:U.call(N)}},g=function(){function A(k,x){for(var N=0;N<x.length;N++){var M=x[N];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(k,M.key,M)}}return function(k,x,N){return x&&A(k.prototype,x),N&&A(k,N),k}}(),h=a(3),m=u(h),_=a(8),o=u(_),r=a(43),s=u(r),c=a(27),d=u(c),E=a(15),v=a(41),y=u(v);function u(A){return A&&A.__esModule?A:{default:A}}function l(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}function b(A,k){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:A}function O(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(A,k):A.__proto__=k)}var S=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],C=function(A){O(k,A);function k(x,N){l(this,k),N.modules.toolbar!=null&&N.modules.toolbar.container==null&&(N.modules.toolbar.container=S);var M=b(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x,N));return M.quill.container.classList.add("ql-snow"),M}return g(k,[{key:"extendToolbar",value:function(N){N.container.classList.add("ql-snow"),this.buildButtons([].slice.call(N.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(N.container.querySelectorAll("select")),y.default),this.tooltip=new L(this.quill,this.options.bounds),N.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(M,I){N.handlers.link.call(N,!I.format.link)})}}]),k}(s.default);C.DEFAULTS=(0,m.default)(!0,{},s.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var x=this.quill.getSelection();if(x==null||x.length==0)return;var N=this.quill.getText(x);/^\S+@\S+\.\S+$/.test(N)&&N.indexOf("mailto:")!==0&&(N="mailto:"+N);var M=this.quill.theme.tooltip;M.edit("link",N)}else this.quill.format("link",!1)}}}}});var L=function(A){O(k,A);function k(x,N){l(this,k);var M=b(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,x,N));return M.preview=M.root.querySelector("a.ql-preview"),M}return g(k,[{key:"listen",value:function(){var N=this;w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(M){N.root.classList.contains("ql-editing")?N.save():N.edit("link",N.preview.textContent),M.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(M){if(N.linkRange!=null){var I=N.linkRange;N.restoreFocus(),N.quill.formatText(I,"link",!1,o.default.sources.USER),delete N.linkRange}M.preventDefault(),N.hide()}),this.quill.on(o.default.events.SELECTION_CHANGE,function(M,I,U){if(M!=null){if(M.length===0&&U===o.default.sources.USER){var Y=N.quill.scroll.descendant(d.default,M.index),nt=p(Y,2),z=nt[0],V=nt[1];if(z!=null){N.linkRange=new E.Range(M.index-V,z.length());var P=d.default.formats(z.domNode);N.preview.textContent=P,N.preview.setAttribute("href",P),N.show(),N.position(N.quill.getBounds(N.linkRange));return}}else delete N.linkRange;N.hide()}})}},{key:"show",value:function(){w(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k}(r.BaseTooltip);L.TEMPLATE=['<a class="ql-preview" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=C},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(29),w=R(p),g=a(36),h=a(38),m=a(64),_=a(65),o=R(_),r=a(66),s=R(r),c=a(67),d=R(c),E=a(37),v=a(26),y=a(39),u=a(40),l=a(56),b=R(l),O=a(68),S=R(O),C=a(27),L=R(C),A=a(69),k=R(A),x=a(70),N=R(x),M=a(71),I=R(M),U=a(72),Y=R(U),nt=a(73),z=R(nt),V=a(13),P=R(V),H=a(74),F=R(H),J=a(75),j=R(J),q=a(57),K=R(q),B=a(41),W=R(B),it=a(28),ot=R(it),st=a(59),ct=R(st),ht=a(60),Z=R(ht),et=a(61),lt=R(et),X=a(108),D=R(X),f=a(62),T=R(f);function R($){return $&&$.__esModule?$:{default:$}}w.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":g.AlignClass,"attributors/class/background":E.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":y.FontClass,"attributors/class/size":u.SizeClass,"attributors/style/align":g.AlignStyle,"attributors/style/background":E.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":y.FontStyle,"attributors/style/size":u.SizeStyle},!0),w.default.register({"formats/align":g.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":m.IndentClass,"formats/background":E.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":y.FontClass,"formats/size":u.SizeClass,"formats/blockquote":o.default,"formats/code-block":P.default,"formats/header":s.default,"formats/list":d.default,"formats/bold":b.default,"formats/code":V.Code,"formats/italic":S.default,"formats/link":L.default,"formats/script":k.default,"formats/strike":N.default,"formats/underline":I.default,"formats/image":Y.default,"formats/video":z.default,"formats/list/item":c.ListItem,"modules/formula":F.default,"modules/syntax":j.default,"modules/toolbar":K.default,"themes/bubble":D.default,"themes/snow":T.default,"ui/icons":W.default,"ui/picker":ot.default,"ui/icon-picker":Z.default,"ui/color-picker":ct.default,"ui/tooltip":lt.default},!0),n.default=w.default},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var p=function(){function d(E,v){for(var y=0;y<v.length;y++){var u=v[y];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(E,u.key,u)}}return function(E,v,y){return v&&d(E.prototype,v),y&&d(E,y),E}}(),w=function d(E,v,y){E===null&&(E=Function.prototype);var u=Object.getOwnPropertyDescriptor(E,v);if(u===void 0){var l=Object.getPrototypeOf(E);return l===null?void 0:d(l,v,y)}else{if("value"in u)return u.value;var b=u.get;return b===void 0?void 0:b.call(y)}},g=a(0),h=m(g);function m(d){return d&&d.__esModule?d:{default:d}}function _(d,E){if(!(d instanceof E))throw new TypeError("Cannot call a class as a function")}function o(d,E){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:d}function r(d,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);d.prototype=Object.create(E&&E.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(d,E):d.__proto__=E)}var s=function(d){r(E,d);function E(){return _(this,E),o(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return p(E,[{key:"add",value:function(y,u){if(u==="+1"||u==="-1"){var l=this.value(y)||0;u=u==="+1"?l+1:l-1}return u===0?(this.remove(y),!0):w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"add",this).call(this,y,u)}},{key:"canAdd",value:function(y,u){return w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,y,u)||w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"canAdd",this).call(this,y,parseInt(u))}},{key:"value",value:function(y){return parseInt(w(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"value",this).call(this,y))||void 0}}]),E}(h.default.Attributor.Class),c=new s("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=c},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(4),w=g(p);function g(r){return r&&r.__esModule?r:{default:r}}function h(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function m(r,s){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:r}function _(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(r,s):r.__proto__=s)}var o=function(r){_(s,r);function s(){return h(this,s),m(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(w.default);o.blotName="blockquote",o.tagName="blockquote",n.default=o},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function s(c,d){for(var E=0;E<d.length;E++){var v=d[E];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(c,v.key,v)}}return function(c,d,E){return d&&s(c.prototype,d),E&&s(c,E),c}}(),w=a(4),g=h(w);function h(s){return s&&s.__esModule?s:{default:s}}function m(s,c){if(!(s instanceof c))throw new TypeError("Cannot call a class as a function")}function _(s,c){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:s}function o(s,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);s.prototype=Object.create(c&&c.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(s,c):s.__proto__=c)}var r=function(s){o(c,s);function c(){return m(this,c),_(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return p(c,null,[{key:"formats",value:function(E){return this.tagName.indexOf(E.tagName)+1}}]),c}(g.default);r.blotName="header",r.tagName=["H1","H2","H3","H4","H5","H6"],n.default=r},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var p=function(){function l(b,O){for(var S=0;S<O.length;S++){var C=O[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(b,C.key,C)}}return function(b,O,S){return O&&l(b.prototype,O),S&&l(b,S),b}}(),w=function l(b,O,S){b===null&&(b=Function.prototype);var C=Object.getOwnPropertyDescriptor(b,O);if(C===void 0){var L=Object.getPrototypeOf(b);return L===null?void 0:l(L,O,S)}else{if("value"in C)return C.value;var A=C.get;return A===void 0?void 0:A.call(S)}},g=a(0),h=s(g),m=a(4),_=s(m),o=a(24),r=s(o);function s(l){return l&&l.__esModule?l:{default:l}}function c(l,b,O){return b in l?Object.defineProperty(l,b,{value:O,enumerable:!0,configurable:!0,writable:!0}):l[b]=O,l}function d(l,b){if(!(l instanceof b))throw new TypeError("Cannot call a class as a function")}function E(l,b){if(!l)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:l}function v(l,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);l.prototype=Object.create(b&&b.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(l,b):l.__proto__=b)}var y=function(l){v(b,l);function b(){return d(this,b),E(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return p(b,[{key:"format",value:function(S,C){S===u.blotName&&!C?this.replaceWith(h.default.create(this.statics.scope)):w(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,S,C)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():w(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(S,C){return this.parent.isolate(this.offset(this.parent),this.length()),S===this.parent.statics.blotName?(this.parent.replaceWith(S,C),this):(this.parent.unwrap(),w(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replaceWith",this).call(this,S,C))}}],[{key:"formats",value:function(S){return S.tagName===this.tagName?void 0:w(b.__proto__||Object.getPrototypeOf(b),"formats",this).call(this,S)}}]),b}(_.default);y.blotName="list-item",y.tagName="LI";var u=function(l){v(b,l),p(b,null,[{key:"create",value:function(S){var C=S==="ordered"?"OL":"UL",L=w(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,C);return(S==="checked"||S==="unchecked")&&L.setAttribute("data-checked",S==="checked"),L}},{key:"formats",value:function(S){if(S.tagName==="OL")return"ordered";if(S.tagName==="UL")return S.hasAttribute("data-checked")?S.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function b(O){d(this,b);var S=E(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,O)),C=function(A){if(A.target.parentNode===O){var k=S.statics.formats(O),x=h.default.find(A.target);k==="checked"?x.format("list","unchecked"):k==="unchecked"&&x.format("list","checked")}};return O.addEventListener("touchstart",C),O.addEventListener("mousedown",C),S}return p(b,[{key:"format",value:function(S,C){this.children.length>0&&this.children.tail.format(S,C)}},{key:"formats",value:function(){return c({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(S,C){if(S instanceof y)w(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertBefore",this).call(this,S,C);else{var L=C==null?this.length():C.offset(this),A=this.split(L);A.parent.insertBefore(S,A)}}},{key:"optimize",value:function(S){w(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,S);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&C.domNode.tagName===this.domNode.tagName&&C.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(C.moveChildren(this),C.remove())}},{key:"replace",value:function(S){if(S.statics.blotName!==this.statics.blotName){var C=h.default.create(this.statics.defaultChild);S.moveChildren(C),this.appendChild(C)}w(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"replace",this).call(this,S)}}]),b}(r.default);u.blotName="list",u.scope=h.default.Scope.BLOCK_BLOT,u.tagName=["OL","UL"],u.defaultChild="list-item",u.allowedChildren=[y],n.ListItem=y,n.default=u},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(56),w=g(p);function g(r){return r&&r.__esModule?r:{default:r}}function h(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function m(r,s){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:r}function _(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(r,s):r.__proto__=s)}var o=function(r){_(s,r);function s(){return h(this,s),m(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(w.default);o.blotName="italic",o.tagName=["EM","I"],n.default=o},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function c(d,E){for(var v=0;v<E.length;v++){var y=E[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(d,y.key,y)}}return function(d,E,v){return E&&c(d.prototype,E),v&&c(d,v),d}}(),w=function c(d,E,v){d===null&&(d=Function.prototype);var y=Object.getOwnPropertyDescriptor(d,E);if(y===void 0){var u=Object.getPrototypeOf(d);return u===null?void 0:c(u,E,v)}else{if("value"in y)return y.value;var l=y.get;return l===void 0?void 0:l.call(v)}},g=a(6),h=m(g);function m(c){return c&&c.__esModule?c:{default:c}}function _(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function o(c,d){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:c}function r(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);c.prototype=Object.create(d&&d.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(c,d):c.__proto__=d)}var s=function(c){r(d,c);function d(){return _(this,d),o(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return p(d,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):w(d.__proto__||Object.getPrototypeOf(d),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),d}(h.default);s.blotName="script",s.tagName=["SUB","SUP"],n.default=s},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(6),w=g(p);function g(r){return r&&r.__esModule?r:{default:r}}function h(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function m(r,s){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:r}function _(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(r,s):r.__proto__=s)}var o=function(r){_(s,r);function s(){return h(this,s),m(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(w.default);o.blotName="strike",o.tagName="S",n.default=o},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=a(6),w=g(p);function g(r){return r&&r.__esModule?r:{default:r}}function h(r,s){if(!(r instanceof s))throw new TypeError("Cannot call a class as a function")}function m(r,s){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:r}function _(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(r,s):r.__proto__=s)}var o=function(r){_(s,r);function s(){return h(this,s),m(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return s}(w.default);o.blotName="underline",o.tagName="U",n.default=o},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function E(v,y){for(var u=0;u<y.length;u++){var l=y[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(v,l.key,l)}}return function(v,y,u){return y&&E(v.prototype,y),u&&E(v,u),v}}(),w=function E(v,y,u){v===null&&(v=Function.prototype);var l=Object.getOwnPropertyDescriptor(v,y);if(l===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:E(b,y,u)}else{if("value"in l)return l.value;var O=l.get;return O===void 0?void 0:O.call(u)}},g=a(0),h=_(g),m=a(27);function _(E){return E&&E.__esModule?E:{default:E}}function o(E,v){if(!(E instanceof v))throw new TypeError("Cannot call a class as a function")}function r(E,v){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:E}function s(E,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);E.prototype=Object.create(v&&v.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(E,v):E.__proto__=v)}var c=["alt","height","width"],d=function(E){s(v,E);function v(){return o(this,v),r(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return p(v,[{key:"format",value:function(u,l){c.indexOf(u)>-1?l?this.domNode.setAttribute(u,l):this.domNode.removeAttribute(u):w(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,u,l)}}],[{key:"create",value:function(u){var l=w(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,u);return typeof u=="string"&&l.setAttribute("src",this.sanitize(u)),l}},{key:"formats",value:function(u){return c.reduce(function(l,b){return u.hasAttribute(b)&&(l[b]=u.getAttribute(b)),l},{})}},{key:"match",value:function(u){return/\.(jpe?g|gif|png)$/.test(u)||/^data:image\/.+;base64/.test(u)}},{key:"sanitize",value:function(u){return(0,m.sanitize)(u,["http","https","data"])?u:"//:0"}},{key:"value",value:function(u){return u.getAttribute("src")}}]),v}(h.default.Embed);d.blotName="image",d.tagName="IMG",n.default=d},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function E(v,y){for(var u=0;u<y.length;u++){var l=y[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(v,l.key,l)}}return function(v,y,u){return y&&E(v.prototype,y),u&&E(v,u),v}}(),w=function E(v,y,u){v===null&&(v=Function.prototype);var l=Object.getOwnPropertyDescriptor(v,y);if(l===void 0){var b=Object.getPrototypeOf(v);return b===null?void 0:E(b,y,u)}else{if("value"in l)return l.value;var O=l.get;return O===void 0?void 0:O.call(u)}},g=a(4),h=a(27),m=_(h);function _(E){return E&&E.__esModule?E:{default:E}}function o(E,v){if(!(E instanceof v))throw new TypeError("Cannot call a class as a function")}function r(E,v){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:E}function s(E,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);E.prototype=Object.create(v&&v.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(E,v):E.__proto__=v)}var c=["height","width"],d=function(E){s(v,E);function v(){return o(this,v),r(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return p(v,[{key:"format",value:function(u,l){c.indexOf(u)>-1?l?this.domNode.setAttribute(u,l):this.domNode.removeAttribute(u):w(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,u,l)}}],[{key:"create",value:function(u){var l=w(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,u);return l.setAttribute("frameborder","0"),l.setAttribute("allowfullscreen",!0),l.setAttribute("src",this.sanitize(u)),l}},{key:"formats",value:function(u){return c.reduce(function(l,b){return u.hasAttribute(b)&&(l[b]=u.getAttribute(b)),l},{})}},{key:"sanitize",value:function(u){return m.default.sanitize(u)}},{key:"value",value:function(u){return u.getAttribute("src")}}]),v}(g.BlockEmbed);d.blotName="video",d.className="ql-video",d.tagName="IFRAME",n.default=d},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var p=function(){function u(l,b){for(var O=0;O<b.length;O++){var S=b[O];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(l,S.key,S)}}return function(l,b,O){return b&&u(l.prototype,b),O&&u(l,O),l}}(),w=function u(l,b,O){l===null&&(l=Function.prototype);var S=Object.getOwnPropertyDescriptor(l,b);if(S===void 0){var C=Object.getPrototypeOf(l);return C===null?void 0:u(C,b,O)}else{if("value"in S)return S.value;var L=S.get;return L===void 0?void 0:L.call(O)}},g=a(25),h=s(g),m=a(5),_=s(m),o=a(9),r=s(o);function s(u){return u&&u.__esModule?u:{default:u}}function c(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function d(u,l){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:u}function E(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);u.prototype=Object.create(l&&l.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(u,l):u.__proto__=l)}var v=function(u){E(l,u);function l(){return c(this,l),d(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return p(l,null,[{key:"create",value:function(O){var S=w(l.__proto__||Object.getPrototypeOf(l),"create",this).call(this,O);return typeof O=="string"&&(window.katex.render(O,S,{throwOnError:!1,errorColor:"#f00"}),S.setAttribute("data-value",O)),S}},{key:"value",value:function(O){return O.getAttribute("data-value")}}]),l}(h.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var y=function(u){E(l,u),p(l,null,[{key:"register",value:function(){_.default.register(v,!0)}}]);function l(){c(this,l);var b=d(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return b}return l}(r.default);n.FormulaBlot=v,n.default=y},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var p=function(){function O(S,C){for(var L=0;L<C.length;L++){var A=C[L];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(S,A.key,A)}}return function(S,C,L){return C&&O(S.prototype,C),L&&O(S,L),S}}(),w=function O(S,C,L){S===null&&(S=Function.prototype);var A=Object.getOwnPropertyDescriptor(S,C);if(A===void 0){var k=Object.getPrototypeOf(S);return k===null?void 0:O(k,C,L)}else{if("value"in A)return A.value;var x=A.get;return x===void 0?void 0:x.call(L)}},g=a(0),h=d(g),m=a(5),_=d(m),o=a(9),r=d(o),s=a(13),c=d(s);function d(O){return O&&O.__esModule?O:{default:O}}function E(O,S){if(!(O instanceof S))throw new TypeError("Cannot call a class as a function")}function v(O,S){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:O}function y(O,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);O.prototype=Object.create(S&&S.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(O,S):O.__proto__=S)}var u=function(O){y(S,O);function S(){return E(this,S),v(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return p(S,[{key:"replaceWith",value:function(L){this.domNode.textContent=this.domNode.textContent,this.attach(),w(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,L)}},{key:"highlight",value:function(L){var A=this.domNode.textContent;this.cachedText!==A&&((A.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=L(A),this.domNode.normalize(),this.attach()),this.cachedText=A)}}]),S}(c.default);u.className="ql-syntax";var l=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),b=function(O){y(S,O),p(S,null,[{key:"register",value:function(){_.default.register(l,!0),_.default.register(u,!0)}}]);function S(C,L){E(this,S);var A=v(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,C,L));if(typeof A.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return A.quill.on(_.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){A.highlight(),k=null},A.options.interval)}),A.highlight(),A}return p(S,[{key:"highlight",value:function(){var L=this;if(!this.quill.selection.composing){this.quill.update(_.default.sources.USER);var A=this.quill.getSelection();this.quill.scroll.descendants(u).forEach(function(k){k.highlight(L.options.highlight)}),this.quill.update(_.default.sources.SILENT),A!=null&&this.quill.setSelection(A,_.default.sources.SILENT)}}}]),S}(r.default);b.DEFAULTS={highlight:function(){return window.hljs==null?null:function(O){var S=window.hljs.highlightAuto(O);return S.value}}(),interval:1e3},n.CodeBlock=u,n.CodeToken=l,n.default=b},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,n){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,n){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,n){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,n){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,n){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,n,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var p=function S(C,L,A){C===null&&(C=Function.prototype);var k=Object.getOwnPropertyDescriptor(C,L);if(k===void 0){var x=Object.getPrototypeOf(C);return x===null?void 0:S(x,L,A)}else{if("value"in k)return k.value;var N=k.get;return N===void 0?void 0:N.call(A)}},w=function(){function S(C,L){for(var A=0;A<L.length;A++){var k=L[A];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(C,k.key,k)}}return function(C,L,A){return L&&S(C.prototype,L),A&&S(C,A),C}}(),g=a(3),h=E(g),m=a(8),_=E(m),o=a(43),r=E(o),s=a(15),c=a(41),d=E(c);function E(S){return S&&S.__esModule?S:{default:S}}function v(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")}function y(S,C){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:S}function u(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);S.prototype=Object.create(C&&C.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(S,C):S.__proto__=C)}var l=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],b=function(S){u(C,S);function C(L,A){v(this,C),A.modules.toolbar!=null&&A.modules.toolbar.container==null&&(A.modules.toolbar.container=l);var k=y(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,L,A));return k.quill.container.classList.add("ql-bubble"),k}return w(C,[{key:"extendToolbar",value:function(A){this.tooltip=new O(this.quill,this.options.bounds),this.tooltip.root.appendChild(A.container),this.buildButtons([].slice.call(A.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(A.container.querySelectorAll("select")),d.default)}}]),C}(r.default);b.DEFAULTS=(0,h.default)(!0,{},r.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(C){C?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var O=function(S){u(C,S);function C(L,A){v(this,C);var k=y(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,L,A));return k.quill.on(_.default.events.EDITOR_CHANGE,function(x,N,M,I){if(x===_.default.events.SELECTION_CHANGE)if(N!=null&&N.length>0&&I===_.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var U=k.quill.getLines(N.index,N.length);if(U.length===1)k.position(k.quill.getBounds(N));else{var Y=U[U.length-1],nt=k.quill.getIndex(Y),z=Math.min(Y.length()-1,N.index+N.length-nt),V=k.quill.getBounds(new s.Range(nt,z));k.position(V)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return w(C,[{key:"listen",value:function(){var A=this;p(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){A.root.classList.remove("ql-editing")}),this.quill.on(_.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!A.root.classList.contains("ql-hidden")){var k=A.quill.getSelection();k!=null&&A.position(A.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(A){var k=p(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"position",this).call(this,A),x=this.root.querySelector(".ql-tooltip-arrow");if(x.style.marginLeft="",k===0)return k;x.style.marginLeft=-1*k-x.offsetWidth/2+"px"}}]),C}(o.BaseTooltip);O.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=O,n.default=b},function(e,n,a){e.exports=a(63)}]).default})})(Wo);var rl=Wo.exports;const ho=Mi(rl);var Go={exports:{}};/*! For license information please see quill-cursors.js.LICENSE.txt */(function(i,t){(function(e,n){i.exports=n()})(self,()=>(()=>{var e={582:(w,g,h)=>{h.d(g,{Z:()=>s});var m=h(81),_=h.n(m),o=h(645),r=h.n(o)()(_());r.push([w.id,".ql-container{position:relative;overflow:hidden}@media(pointer: coarse){.ql-cursor-caret-container{z-index:-1}}.ql-cursor.hidden{display:none}.ql-cursor .ql-cursor-caret-container,.ql-cursor .ql-cursor-flag{position:absolute}.ql-cursor .ql-cursor-flag{z-index:1;transform:translate3d(-1px, -100%, 0);opacity:0;visibility:hidden;color:#fff;padding-bottom:2px;border-radius:0 3px 3px 0}.ql-cursor .ql-cursor-flag.flag-flipped{border-radius:3px 0 0 3px;transform:translate3d(calc(-100% + 1px ), -100%, 0)}@media screen{.ql-cursor .ql-cursor-flag{transition:opacity 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms,visibility 0ms cubic-bezier(0.25, 0.46, 0.45, 0.94) 0ms}}.ql-cursor .ql-cursor-flag .ql-cursor-name{margin-left:5px;margin-right:5px;display:inline-block;margin-top:-2px;white-space:nowrap}.ql-cursor .ql-cursor-flag.no-delay[style]{transition-delay:unset !important}.ql-cursor .ql-cursor-caret-container{cursor:text;margin-left:-9px;padding:0 9px}.ql-cursor .ql-cursor-caret-container.hover+.ql-cursor-flag{opacity:1;visibility:visible;transition:none}.ql-cursor .ql-cursor-caret-container.no-pointer{pointer-events:none}.ql-cursor .ql-cursor-caret-container .ql-cursor-caret{position:absolute;top:0;bottom:0;width:2px;margin-left:-1px;background-color:attr(data-color)}.ql-cursor .ql-cursor-selection-block{position:absolute;pointer-events:none}",""]);const s=r},645:w=>{w.exports=function(g){var h=[];return h.toString=function(){return this.map(function(m){var _="",o=m[5]!==void 0;return m[4]&&(_+="@supports (".concat(m[4],") {")),m[2]&&(_+="@media ".concat(m[2]," {")),o&&(_+="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {")),_+=g(m),o&&(_+="}"),m[2]&&(_+="}"),m[4]&&(_+="}"),_}).join("")},h.i=function(m,_,o,r,s){typeof m=="string"&&(m=[[null,m,void 0]]);var c={};if(o)for(var d=0;d<this.length;d++){var E=this[d][0];E!=null&&(c[E]=!0)}for(var v=0;v<m.length;v++){var y=[].concat(m[v]);o&&c[y[0]]||(s!==void 0&&(y[5]===void 0||(y[1]="@layer".concat(y[5].length>0?" ".concat(y[5]):""," {").concat(y[1],"}")),y[5]=s),_&&(y[2]&&(y[1]="@media ".concat(y[2]," {").concat(y[1],"}")),y[2]=_),r&&(y[4]?(y[1]="@supports (".concat(y[4],") {").concat(y[1],"}"),y[4]=r):y[4]="".concat(r)),h.push(y))}},h}},81:w=>{w.exports=function(g){return g[1]}},529:w=>{var g=-1;function h(u,l,b,O){if(u===l)return u?[[0,u]]:[];if(b!=null){var S=function(x,N,M){var I=typeof M=="number"?{index:M,length:0}:M.oldRange,U=typeof M=="number"?null:M.newRange,Y=x.length,nt=N.length;if(I.length===0&&(U===null||U.length===0)){var z=I.index,V=x.slice(0,z),P=x.slice(z),H=U?U.index:null,F=z+nt-Y;if((H===null||H===F)&&!(F<0||F>nt)){var J=N.slice(0,F);if((K=N.slice(F))===P){var j=Math.min(z,F);if((W=V.slice(0,j))===(ot=J.slice(0,j)))return v(W,V.slice(j),J.slice(j),P)}}if(H===null||H===z){var q=z,K=(J=N.slice(0,q),N.slice(q));if(J===V){var B=Math.min(Y-q,nt-q);if((it=P.slice(P.length-B))===(st=K.slice(K.length-B)))return v(V,P.slice(0,P.length-B),K.slice(0,K.length-B),it)}}}if(I.length>0&&U&&U.length===0){var W=x.slice(0,I.index),it=x.slice(I.index+I.length);if(!(nt<(j=W.length)+(B=it.length))){var ot=N.slice(0,j),st=N.slice(nt-B);if(W===ot&&it===st)return v(W,x.slice(j,Y-B),N.slice(j,nt-B),it)}}return null}(u,l,b);if(S)return S}var C=_(u,l),L=u.substring(0,C);C=o(u=u.substring(C),l=l.substring(C));var A=u.substring(u.length-C),k=function(x,N){var M;if(!x)return[[1,N]];if(!N)return[[g,x]];var I=x.length>N.length?x:N,U=x.length>N.length?N:x,Y=I.indexOf(U);if(Y!==-1)return M=[[1,I.substring(0,Y)],[0,U],[1,I.substring(Y+U.length)]],x.length>N.length&&(M[0][0]=M[2][0]=g),M;if(U.length===1)return[[g,x],[1,N]];var nt=function(q,K){var B=q.length>K.length?q:K,W=q.length>K.length?K:q;if(B.length<4||2*W.length<B.length)return null;function it(X,D,f){for(var T,R,$,G,Q=X.substring(f,f+Math.floor(X.length/4)),ft=-1,gt="";(ft=D.indexOf(Q,ft+1))!==-1;){var mt=_(X.substring(f),D.substring(ft)),_t=o(X.substring(0,f),D.substring(0,ft));gt.length<_t+mt&&(gt=D.substring(ft-_t,ft)+D.substring(ft,ft+mt),T=X.substring(0,f-_t),R=X.substring(f+mt),$=D.substring(0,ft-_t),G=D.substring(ft+mt))}return 2*gt.length>=X.length?[T,R,$,G,gt]:null}var ot,st,ct,ht,Z,et=it(B,W,Math.ceil(B.length/4)),lt=it(B,W,Math.ceil(B.length/2));return et||lt?(ot=lt?et&&et[4].length>lt[4].length?et:lt:et,q.length>K.length?(st=ot[0],ct=ot[1],ht=ot[2],Z=ot[3]):(ht=ot[0],Z=ot[1],st=ot[2],ct=ot[3]),[st,ct,ht,Z,ot[4]]):null}(x,N);if(nt){var z=nt[0],V=nt[1],P=nt[2],H=nt[3],F=nt[4],J=h(z,P),j=h(V,H);return J.concat([[0,F]],j)}return function(q,K){for(var B=q.length,W=K.length,it=Math.ceil((B+W)/2),ot=it,st=2*it,ct=new Array(st),ht=new Array(st),Z=0;Z<st;Z++)ct[Z]=-1,ht[Z]=-1;ct[ot+1]=0,ht[ot+1]=0;for(var et=B-W,lt=et%2!=0,X=0,D=0,f=0,T=0,R=0;R<it;R++){for(var $=-R+X;$<=R-D;$+=2){for(var G=ot+$,Q=(yt=$===-R||$!==R&&ct[G-1]<ct[G+1]?ct[G+1]:ct[G-1]+1)-$;yt<B&&Q<W&&q.charAt(yt)===K.charAt(Q);)yt++,Q++;if(ct[G]=yt,yt>B)D+=2;else if(Q>W)X+=2;else if(lt&&(mt=ot+et-$)>=0&&mt<st&&ht[mt]!==-1&&yt>=(gt=B-ht[mt]))return m(q,K,yt,Q)}for(var ft=-R+f;ft<=R-T;ft+=2){for(var gt,mt=ot+ft,_t=(gt=ft===-R||ft!==R&&ht[mt-1]<ht[mt+1]?ht[mt+1]:ht[mt-1]+1)-ft;gt<B&&_t<W&&q.charAt(B-gt-1)===K.charAt(W-_t-1);)gt++,_t++;if(ht[mt]=gt,gt>B)T+=2;else if(_t>W)f+=2;else if(!lt){var yt;if((G=ot+et-ft)>=0&&G<st&&ct[G]!==-1&&(Q=ot+(yt=ct[G])-G,yt>=(gt=B-gt)))return m(q,K,yt,Q)}}}return[[g,q],[1,K]]}(x,N)}(u=u.substring(0,u.length-C),l=l.substring(0,l.length-C));return L&&k.unshift([0,L]),A&&k.push([0,A]),r(k,O),k}function m(u,l,b,O){var S=u.substring(0,b),C=l.substring(0,O),L=u.substring(b),A=l.substring(O),k=h(S,C),x=h(L,A);return k.concat(x)}function _(u,l){if(!u||!l||u.charAt(0)!==l.charAt(0))return 0;for(var b=0,O=Math.min(u.length,l.length),S=O,C=0;b<S;)u.substring(C,S)==l.substring(C,S)?C=b=S:O=S,S=Math.floor((O-b)/2+b);return s(u.charCodeAt(S-1))&&S--,S}function o(u,l){if(!u||!l||u.slice(-1)!==l.slice(-1))return 0;for(var b=0,O=Math.min(u.length,l.length),S=O,C=0;b<S;)u.substring(u.length-S,u.length-C)==l.substring(l.length-S,l.length-C)?C=b=S:O=S,S=Math.floor((O-b)/2+b);return c(u.charCodeAt(u.length-S))&&S--,S}function r(u,l){u.push([0,""]);for(var b,O=0,S=0,C=0,L="",A="";O<u.length;)if(O<u.length-1&&!u[O][1])u.splice(O,1);else switch(u[O][0]){case 1:C++,A+=u[O][1],O++;break;case g:S++,L+=u[O][1],O++;break;case 0:var k=O-C-S-1;if(l){if(k>=0&&E(u[k][1])){var x=u[k][1].slice(-1);if(u[k][1]=u[k][1].slice(0,-1),L=x+L,A=x+A,!u[k][1]){u.splice(k,1),O--;var N=k-1;u[N]&&u[N][0]===1&&(C++,A=u[N][1]+A,N--),u[N]&&u[N][0]===g&&(S++,L=u[N][1]+L,N--),k=N}}d(u[O][1])&&(x=u[O][1].charAt(0),u[O][1]=u[O][1].slice(1),L+=x,A+=x)}if(O<u.length-1&&!u[O][1]){u.splice(O,1);break}if(L.length>0||A.length>0){L.length>0&&A.length>0&&((b=_(A,L))!==0&&(k>=0?u[k][1]+=A.substring(0,b):(u.splice(0,0,[0,A.substring(0,b)]),O++),A=A.substring(b),L=L.substring(b)),(b=o(A,L))!==0&&(u[O][1]=A.substring(A.length-b)+u[O][1],A=A.substring(0,A.length-b),L=L.substring(0,L.length-b)));var M=C+S;L.length===0&&A.length===0?(u.splice(O-M,M),O-=M):L.length===0?(u.splice(O-M,M,[1,A]),O=O-M+1):A.length===0?(u.splice(O-M,M,[g,L]),O=O-M+1):(u.splice(O-M,M,[g,L],[1,A]),O=O-M+2)}O!==0&&u[O-1][0]===0?(u[O-1][1]+=u[O][1],u.splice(O,1)):O++,C=0,S=0,L="",A=""}u[u.length-1][1]===""&&u.pop();var I=!1;for(O=1;O<u.length-1;)u[O-1][0]===0&&u[O+1][0]===0&&(u[O][1].substring(u[O][1].length-u[O-1][1].length)===u[O-1][1]?(u[O][1]=u[O-1][1]+u[O][1].substring(0,u[O][1].length-u[O-1][1].length),u[O+1][1]=u[O-1][1]+u[O+1][1],u.splice(O-1,1),I=!0):u[O][1].substring(0,u[O+1][1].length)==u[O+1][1]&&(u[O-1][1]+=u[O+1][1],u[O][1]=u[O][1].substring(u[O+1][1].length)+u[O+1][1],u.splice(O+1,1),I=!0)),O++;I&&r(u,l)}function s(u){return u>=55296&&u<=56319}function c(u){return u>=56320&&u<=57343}function d(u){return c(u.charCodeAt(0))}function E(u){return s(u.charCodeAt(u.length-1))}function v(u,l,b,O){return E(u)||d(O)?null:function(S){for(var C=[],L=0;L<S.length;L++)S[L][1].length>0&&C.push(S[L]);return C}([[0,u],[g,l],[1,b],[0,O]])}function y(u,l,b){return h(u,l,b,!0)}y.INSERT=1,y.DELETE=g,y.EQUAL=0,w.exports=y},465:(w,g,h)=>{w=h.nmd(w);var m="__lodash_hash_undefined__",_=9007199254740991,o="[object Arguments]",r="[object Boolean]",s="[object Date]",c="[object Function]",d="[object GeneratorFunction]",E="[object Map]",v="[object Number]",y="[object Object]",u="[object Promise]",l="[object RegExp]",b="[object Set]",O="[object String]",S="[object Symbol]",C="[object WeakMap]",L="[object ArrayBuffer]",A="[object DataView]",k="[object Float32Array]",x="[object Float64Array]",N="[object Int8Array]",M="[object Int16Array]",I="[object Int32Array]",U="[object Uint8Array]",Y="[object Uint8ClampedArray]",nt="[object Uint16Array]",z="[object Uint32Array]",V=/\w*$/,P=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,F={};F[o]=F["[object Array]"]=F[L]=F[A]=F[r]=F[s]=F[k]=F[x]=F[N]=F[M]=F[I]=F[E]=F[v]=F[y]=F[l]=F[b]=F[O]=F[S]=F[U]=F[Y]=F[nt]=F[z]=!0,F["[object Error]"]=F[c]=F[C]=!1;var J=typeof h.g=="object"&&h.g&&h.g.Object===Object&&h.g,j=typeof self=="object"&&self&&self.Object===Object&&self,q=J||j||Function("return this")(),K=g&&!g.nodeType&&g,B=K&&w&&!w.nodeType&&w,W=B&&B.exports===K;function it(tt,at){return tt.set(at[0],at[1]),tt}function ot(tt,at){return tt.add(at),tt}function st(tt,at,pt,vt){var kt=-1,Mt=tt?tt.length:0;for(vt&&Mt&&(pt=tt[++kt]);++kt<Mt;)pt=at(pt,tt[kt],kt,tt);return pt}function ct(tt){var at=!1;if(tt!=null&&typeof tt.toString!="function")try{at=!!(tt+"")}catch{}return at}function ht(tt){var at=-1,pt=Array(tt.size);return tt.forEach(function(vt,kt){pt[++at]=[kt,vt]}),pt}function Z(tt,at){return function(pt){return tt(at(pt))}}function et(tt){var at=-1,pt=Array(tt.size);return tt.forEach(function(vt){pt[++at]=vt}),pt}var lt,X=Array.prototype,D=Function.prototype,f=Object.prototype,T=q["__core-js_shared__"],R=(lt=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+lt:"",$=D.toString,G=f.hasOwnProperty,Q=f.toString,ft=RegExp("^"+$.call(G).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=W?q.Buffer:void 0,mt=q.Symbol,_t=q.Uint8Array,yt=Z(Object.getPrototypeOf,Object),qt=Object.create,Rt=f.propertyIsEnumerable,Yt=X.splice,ke=Object.getOwnPropertySymbols,Ae=gt?gt.isBuffer:void 0,Te=Z(Object.keys,Object),$n=Re(q,"DataView"),Ze=Re(q,"Map"),ln=Re(q,"Promise"),he=Re(q,"Set"),ie=Re(q,"WeakMap"),oe=Re(Object,"create"),kn=Le($n),Ce=Le(Ze),An=Le(ln),un=Le(he),mr=Le(ie),Kn=mt?mt.prototype:void 0,Wn=Kn?Kn.valueOf:void 0;function xe(tt){var at=-1,pt=tt?tt.length:0;for(this.clear();++at<pt;){var vt=tt[at];this.set(vt[0],vt[1])}}function re(tt){var at=-1,pt=tt?tt.length:0;for(this.clear();++at<pt;){var vt=tt[at];this.set(vt[0],vt[1])}}function se(tt){var at=-1,pt=tt?tt.length:0;for(this.clear();++at<pt;){var vt=tt[at];this.set(vt[0],vt[1])}}function Je(tt){this.__data__=new re(tt)}function de(tt,at,pt){var vt=tt[at];G.call(tt,at)&&wr(vt,pt)&&(pt!==void 0||at in tt)||(tt[at]=pt)}function Tn(tt,at){for(var pt=tt.length;pt--;)if(wr(tt[pt][0],at))return pt;return-1}function pe(tt,at,pt,vt,kt,Mt,Pt){var xt;if(vt&&(xt=Mt?vt(tt,kt,Mt,Pt):vt(tt)),xt!==void 0)return xt;if(!Dt(tt))return tt;var $t=rt(tt);if($t){if(xt=function(Et){var It=Et.length,Kt=Et.constructor(It);return It&&typeof Et[0]=="string"&&G.call(Et,"index")&&(Kt.index=Et.index,Kt.input=Et.input),Kt}(tt),!at)return function(Et,It){var Kt=-1,Ct=Et.length;for(It||(It=Array(Ct));++Kt<Ct;)It[Kt]=Et[Kt];return It}(tt,xt)}else{var Ft=Ne(tt),De=Ft==c||Ft==d;if(dt(tt))return function(Et,It){if(It)return Et.slice();var Kt=new Et.constructor(Et.length);return Et.copy(Kt),Kt}(tt,at);if(Ft==y||Ft==o||De&&!Mt){if(ct(tt))return Mt?tt:{};if(xt=function(Et){return typeof Et.constructor!="function"||Xe(Et)?{}:Dt(It=yt(Et))?qt(It):{};var It}(De?{}:tt),!at)return function(Et,It){return br(Et,Gn(Et),It)}(tt,function(Et,It){return Et&&br(It,At(It),Et)}(xt,tt))}else{if(!F[Ft])return Mt?tt:{};xt=function(Et,It,Kt,Ct){var Lt,ge=Et.constructor;switch(It){case L:return Cn(Et);case r:case s:return new ge(+Et);case A:return function(Nt,Jt){var Ht=Jt?Cn(Nt.buffer):Nt.buffer;return new Nt.constructor(Ht,Nt.byteOffset,Nt.byteLength)}(Et,Ct);case k:case x:case N:case M:case I:case U:case Y:case nt:case z:return function(Nt,Jt){var Ht=Jt?Cn(Nt.buffer):Nt.buffer;return new Nt.constructor(Ht,Nt.byteOffset,Nt.length)}(Et,Ct);case E:return function(Nt,Jt,Ht){return st(Jt?Ht(ht(Nt),!0):ht(Nt),it,new Nt.constructor)}(Et,Ct,Kt);case v:case O:return new ge(Et);case l:return function(Nt){var Jt=new Nt.constructor(Nt.source,V.exec(Nt));return Jt.lastIndex=Nt.lastIndex,Jt}(Et);case b:return function(Nt,Jt,Ht){return st(Jt?Ht(et(Nt),!0):et(Nt),ot,new Nt.constructor)}(Et,Ct,Kt);case S:return Lt=Et,Wn?Object(Wn.call(Lt)):{}}}(tt,Ft,pe,at)}}Pt||(Pt=new Je);var ze=Pt.get(tt);if(ze)return ze;if(Pt.set(tt,xt),!$t)var Qe=pt?function(Et){return function(It,Kt,Ct){var Lt=Kt(It);return rt(It)?Lt:function(ge,Nt){for(var Jt=-1,Ht=Nt.length,ye=ge.length;++Jt<Ht;)ge[ye+Jt]=Nt[Jt];return ge}(Lt,Ct(It))}(Et,At,Gn)}(tt):At(tt);return function(Et,It){for(var Kt=-1,Ct=Et?Et.length:0;++Kt<Ct&&It(Et[Kt],Kt)!==!1;);}(Qe||tt,function(Et,It){Qe&&(Et=tt[It=Et]),de(xt,It,pe(Et,at,pt,vt,It,tt,Pt))}),xt}function Cn(tt){var at=new tt.constructor(tt.byteLength);return new _t(at).set(new _t(tt)),at}function br(tt,at,pt,vt){pt||(pt={});for(var kt=-1,Mt=at.length;++kt<Mt;){var Pt=at[kt],xt=vt?vt(pt[Pt],tt[Pt],Pt,pt,tt):void 0;de(pt,Pt,xt===void 0?tt[Pt]:xt)}return pt}function He(tt,at){var pt,vt,kt=tt.__data__;return((vt=typeof(pt=at))=="string"||vt=="number"||vt=="symbol"||vt=="boolean"?pt!=="__proto__":pt===null)?kt[typeof at=="string"?"string":"hash"]:kt.map}function Re(tt,at){var pt=function(vt,kt){return vt==null?void 0:vt[kt]}(tt,at);return function(vt){return!(!Dt(vt)||(kt=vt,R&&R in kt))&&(bt(vt)||ct(vt)?ft:P).test(Le(vt));var kt}(pt)?pt:void 0}xe.prototype.clear=function(){this.__data__=oe?oe(null):{}},xe.prototype.delete=function(tt){return this.has(tt)&&delete this.__data__[tt]},xe.prototype.get=function(tt){var at=this.__data__;if(oe){var pt=at[tt];return pt===m?void 0:pt}return G.call(at,tt)?at[tt]:void 0},xe.prototype.has=function(tt){var at=this.__data__;return oe?at[tt]!==void 0:G.call(at,tt)},xe.prototype.set=function(tt,at){return this.__data__[tt]=oe&&at===void 0?m:at,this},re.prototype.clear=function(){this.__data__=[]},re.prototype.delete=function(tt){var at=this.__data__,pt=Tn(at,tt);return!(pt<0||(pt==at.length-1?at.pop():Yt.call(at,pt,1),0))},re.prototype.get=function(tt){var at=this.__data__,pt=Tn(at,tt);return pt<0?void 0:at[pt][1]},re.prototype.has=function(tt){return Tn(this.__data__,tt)>-1},re.prototype.set=function(tt,at){var pt=this.__data__,vt=Tn(pt,tt);return vt<0?pt.push([tt,at]):pt[vt][1]=at,this},se.prototype.clear=function(){this.__data__={hash:new xe,map:new(Ze||re),string:new xe}},se.prototype.delete=function(tt){return He(this,tt).delete(tt)},se.prototype.get=function(tt){return He(this,tt).get(tt)},se.prototype.has=function(tt){return He(this,tt).has(tt)},se.prototype.set=function(tt,at){return He(this,tt).set(tt,at),this},Je.prototype.clear=function(){this.__data__=new re},Je.prototype.delete=function(tt){return this.__data__.delete(tt)},Je.prototype.get=function(tt){return this.__data__.get(tt)},Je.prototype.has=function(tt){return this.__data__.has(tt)},Je.prototype.set=function(tt,at){var pt=this.__data__;if(pt instanceof re){var vt=pt.__data__;if(!Ze||vt.length<199)return vt.push([tt,at]),this;pt=this.__data__=new se(vt)}return pt.set(tt,at),this};var Gn=ke?Z(ke,Object):function(){return[]},Ne=function(tt){return Q.call(tt)};function _r(tt,at){return!!(at=at??_)&&(typeof tt=="number"||H.test(tt))&&tt>-1&&tt%1==0&&tt<at}function Xe(tt){var at=tt&&tt.constructor;return tt===(typeof at=="function"&&at.prototype||f)}function Le(tt){if(tt!=null){try{return $.call(tt)}catch{}try{return tt+""}catch{}}return""}function wr(tt,at){return tt===at||tt!=tt&&at!=at}($n&&Ne(new $n(new ArrayBuffer(1)))!=A||Ze&&Ne(new Ze)!=E||ln&&Ne(ln.resolve())!=u||he&&Ne(new he)!=b||ie&&Ne(new ie)!=C)&&(Ne=function(tt){var at=Q.call(tt),pt=at==y?tt.constructor:void 0,vt=pt?Le(pt):void 0;if(vt)switch(vt){case kn:return A;case Ce:return E;case An:return u;case un:return b;case mr:return C}return at});var rt=Array.isArray;function ut(tt){return tt!=null&&function(at){return typeof at=="number"&&at>-1&&at%1==0&&at<=_}(tt.length)&&!bt(tt)}var dt=Ae||function(){return!1};function bt(tt){var at=Dt(tt)?Q.call(tt):"";return at==c||at==d}function Dt(tt){var at=typeof tt;return!!tt&&(at=="object"||at=="function")}function At(tt){return ut(tt)?function(at,pt){var vt=rt(at)||function(xt){return function($t){return function(Ft){return!!Ft&&typeof Ft=="object"}($t)&&ut($t)}(xt)&&G.call(xt,"callee")&&(!Rt.call(xt,"callee")||Q.call(xt)==o)}(at)?function(xt,$t){for(var Ft=-1,De=Array(xt);++Ft<xt;)De[Ft]=$t(Ft);return De}(at.length,String):[],kt=vt.length,Mt=!!kt;for(var Pt in at)!pt&&!G.call(at,Pt)||Mt&&(Pt=="length"||_r(Pt,kt))||vt.push(Pt);return vt}(tt):function(at){if(!Xe(at))return Te(at);var pt=[];for(var vt in Object(at))G.call(at,vt)&&vt!="constructor"&&pt.push(vt);return pt}(tt)}w.exports=function(tt){return pe(tt,!0,!0)}},307:(w,g,h)=>{w=h.nmd(w);var m="__lodash_hash_undefined__",_=9007199254740991,o="[object Arguments]",r="[object Array]",s="[object Boolean]",c="[object Date]",d="[object Error]",E="[object Function]",v="[object Map]",y="[object Number]",u="[object Object]",l="[object Promise]",b="[object RegExp]",O="[object Set]",S="[object String]",C="[object WeakMap]",L="[object ArrayBuffer]",A="[object DataView]",k=/^\[object .+?Constructor\]$/,x=/^(?:0|[1-9]\d*)$/,N={};N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N[o]=N[r]=N[L]=N[s]=N[A]=N[c]=N[d]=N[E]=N[v]=N[y]=N[u]=N[b]=N[O]=N[S]=N[C]=!1;var M=typeof h.g=="object"&&h.g&&h.g.Object===Object&&h.g,I=typeof self=="object"&&self&&self.Object===Object&&self,U=M||I||Function("return this")(),Y=g&&!g.nodeType&&g,nt=Y&&w&&!w.nodeType&&w,z=nt&&nt.exports===Y,V=z&&M.process,P=function(){try{return V&&V.binding&&V.binding("util")}catch{}}(),H=P&&P.isTypedArray;function F(rt,ut){for(var dt=-1,bt=rt==null?0:rt.length;++dt<bt;)if(ut(rt[dt],dt,rt))return!0;return!1}function J(rt){var ut=-1,dt=Array(rt.size);return rt.forEach(function(bt,Dt){dt[++ut]=[Dt,bt]}),dt}function j(rt){var ut=-1,dt=Array(rt.size);return rt.forEach(function(bt){dt[++ut]=bt}),dt}var q,K,B,W=Array.prototype,it=Function.prototype,ot=Object.prototype,st=U["__core-js_shared__"],ct=it.toString,ht=ot.hasOwnProperty,Z=(q=/[^.]+$/.exec(st&&st.keys&&st.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",et=ot.toString,lt=RegExp("^"+ct.call(ht).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),X=z?U.Buffer:void 0,D=U.Symbol,f=U.Uint8Array,T=ot.propertyIsEnumerable,R=W.splice,$=D?D.toStringTag:void 0,G=Object.getOwnPropertySymbols,Q=X?X.isBuffer:void 0,ft=(K=Object.keys,B=Object,function(rt){return K(B(rt))}),gt=se(U,"DataView"),mt=se(U,"Map"),_t=se(U,"Promise"),yt=se(U,"Set"),qt=se(U,"WeakMap"),Rt=se(Object,"create"),Yt=pe(gt),ke=pe(mt),Ae=pe(_t),Te=pe(yt),$n=pe(qt),Ze=D?D.prototype:void 0,ln=Ze?Ze.valueOf:void 0;function he(rt){var ut=-1,dt=rt==null?0:rt.length;for(this.clear();++ut<dt;){var bt=rt[ut];this.set(bt[0],bt[1])}}function ie(rt){var ut=-1,dt=rt==null?0:rt.length;for(this.clear();++ut<dt;){var bt=rt[ut];this.set(bt[0],bt[1])}}function oe(rt){var ut=-1,dt=rt==null?0:rt.length;for(this.clear();++ut<dt;){var bt=rt[ut];this.set(bt[0],bt[1])}}function kn(rt){var ut=-1,dt=rt==null?0:rt.length;for(this.__data__=new oe;++ut<dt;)this.add(rt[ut])}function Ce(rt){var ut=this.__data__=new ie(rt);this.size=ut.size}function An(rt,ut){for(var dt=rt.length;dt--;)if(Cn(rt[dt][0],ut))return dt;return-1}function un(rt){return rt==null?rt===void 0?"[object Undefined]":"[object Null]":$&&$ in Object(rt)?function(ut){var dt=ht.call(ut,$),bt=ut[$];try{ut[$]=void 0;var Dt=!0}catch{}var At=et.call(ut);return Dt&&(dt?ut[$]=bt:delete ut[$]),At}(rt):function(ut){return et.call(ut)}(rt)}function mr(rt){return Xe(rt)&&un(rt)==o}function Kn(rt,ut,dt,bt,Dt){return rt===ut||(rt==null||ut==null||!Xe(rt)&&!Xe(ut)?rt!=rt&&ut!=ut:function(At,tt,at,pt,vt,kt){var Mt=He(At),Pt=He(tt),xt=Mt?r:de(At),$t=Pt?r:de(tt),Ft=(xt=xt==o?u:xt)==u,De=($t=$t==o?u:$t)==u,ze=xt==$t;if(ze&&Re(At)){if(!Re(tt))return!1;Mt=!0,Ft=!1}if(ze&&!Ft)return kt||(kt=new Ce),Mt||Le(At)?Wn(At,tt,at,pt,vt,kt):function(Ct,Lt,ge,Nt,Jt,Ht,ye){switch(ge){case A:if(Ct.byteLength!=Lt.byteLength||Ct.byteOffset!=Lt.byteOffset)return!1;Ct=Ct.buffer,Lt=Lt.buffer;case L:return!(Ct.byteLength!=Lt.byteLength||!Ht(new f(Ct),new f(Lt)));case s:case c:case y:return Cn(+Ct,+Lt);case d:return Ct.name==Lt.name&&Ct.message==Lt.message;case b:case S:return Ct==Lt+"";case v:var tn=J;case O:var Yn=1&Nt;if(tn||(tn=j),Ct.size!=Lt.size&&!Yn)return!1;var cn=ye.get(Ct);if(cn)return cn==Lt;Nt|=2,ye.set(Ct,Lt);var Ve=Wn(tn(Ct),tn(Lt),Nt,Jt,Ht,ye);return ye.delete(Ct),Ve;case"[object Symbol]":if(ln)return ln.call(Ct)==ln.call(Lt)}return!1}(At,tt,xt,at,pt,vt,kt);if(!(1&at)){var Qe=Ft&&ht.call(At,"__wrapped__"),Et=De&&ht.call(tt,"__wrapped__");if(Qe||Et){var It=Qe?At.value():At,Kt=Et?tt.value():tt;return kt||(kt=new Ce),vt(It,Kt,at,pt,kt)}}return!!ze&&(kt||(kt=new Ce),function(Ct,Lt,ge,Nt,Jt,Ht){var ye=1&ge,tn=xe(Ct),Yn=tn.length;if(Yn!=xe(Lt).length&&!ye)return!1;for(var cn=Yn;cn--;){var Ve=tn[cn];if(!(ye?Ve in Lt:ht.call(Lt,Ve)))return!1}var uo=Ht.get(Ct);if(uo&&Ht.get(Lt))return uo==Lt;var Er=!0;Ht.set(Ct,Lt),Ht.set(Lt,Ct);for(var si=ye;++cn<Yn;){var Sr=Ct[Ve=tn[cn]],Or=Lt[Ve];if(Nt)var co=ye?Nt(Or,Sr,Ve,Lt,Ct,Ht):Nt(Sr,Or,Ve,Ct,Lt,Ht);if(!(co===void 0?Sr===Or||Jt(Sr,Or,ge,Nt,Ht):co)){Er=!1;break}si||(si=Ve=="constructor")}if(Er&&!si){var kr=Ct.constructor,Ar=Lt.constructor;kr==Ar||!("constructor"in Ct)||!("constructor"in Lt)||typeof kr=="function"&&kr instanceof kr&&typeof Ar=="function"&&Ar instanceof Ar||(Er=!1)}return Ht.delete(Ct),Ht.delete(Lt),Er}(At,tt,at,pt,vt,kt))}(rt,ut,dt,bt,Kn,Dt))}function Wn(rt,ut,dt,bt,Dt,At){var tt=1&dt,at=rt.length,pt=ut.length;if(at!=pt&&!(tt&&pt>at))return!1;var vt=At.get(rt);if(vt&&At.get(ut))return vt==ut;var kt=-1,Mt=!0,Pt=2&dt?new kn:void 0;for(At.set(rt,ut),At.set(ut,rt);++kt<at;){var xt=rt[kt],$t=ut[kt];if(bt)var Ft=tt?bt($t,xt,kt,ut,rt,At):bt(xt,$t,kt,rt,ut,At);if(Ft!==void 0){if(Ft)continue;Mt=!1;break}if(Pt){if(!F(ut,function(De,ze){if(Qe=ze,!Pt.has(Qe)&&(xt===De||Dt(xt,De,dt,bt,At)))return Pt.push(ze);var Qe})){Mt=!1;break}}else if(xt!==$t&&!Dt(xt,$t,dt,bt,At)){Mt=!1;break}}return At.delete(rt),At.delete(ut),Mt}function xe(rt){return function(ut,dt,bt){var Dt=dt(ut);return He(ut)?Dt:function(At,tt){for(var at=-1,pt=tt.length,vt=At.length;++at<pt;)At[vt+at]=tt[at];return At}(Dt,bt(ut))}(rt,wr,Je)}function re(rt,ut){var dt,bt,Dt=rt.__data__;return((bt=typeof(dt=ut))=="string"||bt=="number"||bt=="symbol"||bt=="boolean"?dt!=="__proto__":dt===null)?Dt[typeof ut=="string"?"string":"hash"]:Dt.map}function se(rt,ut){var dt=function(bt,Dt){return bt==null?void 0:bt[Dt]}(rt,ut);return function(bt){return!(!_r(bt)||function(Dt){return!!Z&&Z in Dt}(bt))&&(Gn(bt)?lt:k).test(pe(bt))}(dt)?dt:void 0}he.prototype.clear=function(){this.__data__=Rt?Rt(null):{},this.size=0},he.prototype.delete=function(rt){var ut=this.has(rt)&&delete this.__data__[rt];return this.size-=ut?1:0,ut},he.prototype.get=function(rt){var ut=this.__data__;if(Rt){var dt=ut[rt];return dt===m?void 0:dt}return ht.call(ut,rt)?ut[rt]:void 0},he.prototype.has=function(rt){var ut=this.__data__;return Rt?ut[rt]!==void 0:ht.call(ut,rt)},he.prototype.set=function(rt,ut){var dt=this.__data__;return this.size+=this.has(rt)?0:1,dt[rt]=Rt&&ut===void 0?m:ut,this},ie.prototype.clear=function(){this.__data__=[],this.size=0},ie.prototype.delete=function(rt){var ut=this.__data__,dt=An(ut,rt);return!(dt<0||(dt==ut.length-1?ut.pop():R.call(ut,dt,1),--this.size,0))},ie.prototype.get=function(rt){var ut=this.__data__,dt=An(ut,rt);return dt<0?void 0:ut[dt][1]},ie.prototype.has=function(rt){return An(this.__data__,rt)>-1},ie.prototype.set=function(rt,ut){var dt=this.__data__,bt=An(dt,rt);return bt<0?(++this.size,dt.push([rt,ut])):dt[bt][1]=ut,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new he,map:new(mt||ie),string:new he}},oe.prototype.delete=function(rt){var ut=re(this,rt).delete(rt);return this.size-=ut?1:0,ut},oe.prototype.get=function(rt){return re(this,rt).get(rt)},oe.prototype.has=function(rt){return re(this,rt).has(rt)},oe.prototype.set=function(rt,ut){var dt=re(this,rt),bt=dt.size;return dt.set(rt,ut),this.size+=dt.size==bt?0:1,this},kn.prototype.add=kn.prototype.push=function(rt){return this.__data__.set(rt,m),this},kn.prototype.has=function(rt){return this.__data__.has(rt)},Ce.prototype.clear=function(){this.__data__=new ie,this.size=0},Ce.prototype.delete=function(rt){var ut=this.__data__,dt=ut.delete(rt);return this.size=ut.size,dt},Ce.prototype.get=function(rt){return this.__data__.get(rt)},Ce.prototype.has=function(rt){return this.__data__.has(rt)},Ce.prototype.set=function(rt,ut){var dt=this.__data__;if(dt instanceof ie){var bt=dt.__data__;if(!mt||bt.length<199)return bt.push([rt,ut]),this.size=++dt.size,this;dt=this.__data__=new oe(bt)}return dt.set(rt,ut),this.size=dt.size,this};var Je=G?function(rt){return rt==null?[]:(rt=Object(rt),function(ut,dt){for(var bt=-1,Dt=ut==null?0:ut.length,At=0,tt=[];++bt<Dt;){var at=ut[bt];pt=at,T.call(rt,pt)&&(tt[At++]=at)}var pt;return tt}(G(rt)))}:function(){return[]},de=un;function Tn(rt,ut){return!!(ut=ut??_)&&(typeof rt=="number"||x.test(rt))&&rt>-1&&rt%1==0&&rt<ut}function pe(rt){if(rt!=null){try{return ct.call(rt)}catch{}try{return rt+""}catch{}}return""}function Cn(rt,ut){return rt===ut||rt!=rt&&ut!=ut}(gt&&de(new gt(new ArrayBuffer(1)))!=A||mt&&de(new mt)!=v||_t&&de(_t.resolve())!=l||yt&&de(new yt)!=O||qt&&de(new qt)!=C)&&(de=function(rt){var ut=un(rt),dt=ut==u?rt.constructor:void 0,bt=dt?pe(dt):"";if(bt)switch(bt){case Yt:return A;case ke:return v;case Ae:return l;case Te:return O;case $n:return C}return ut});var br=mr(function(){return arguments}())?mr:function(rt){return Xe(rt)&&ht.call(rt,"callee")&&!T.call(rt,"callee")},He=Array.isArray,Re=Q||function(){return!1};function Gn(rt){if(!_r(rt))return!1;var ut=un(rt);return ut==E||ut=="[object GeneratorFunction]"||ut=="[object AsyncFunction]"||ut=="[object Proxy]"}function Ne(rt){return typeof rt=="number"&&rt>-1&&rt%1==0&&rt<=_}function _r(rt){var ut=typeof rt;return rt!=null&&(ut=="object"||ut=="function")}function Xe(rt){return rt!=null&&typeof rt=="object"}var Le=H?function(rt){return function(ut){return rt(ut)}}(H):function(rt){return Xe(rt)&&Ne(rt.length)&&!!N[un(rt)]};function wr(rt){return(ut=rt)!=null&&Ne(ut.length)&&!Gn(ut)?function(dt,bt){var Dt=He(dt),At=!Dt&&br(dt),tt=!Dt&&!At&&Re(dt),at=!Dt&&!At&&!tt&&Le(dt),pt=Dt||At||tt||at,vt=pt?function(Pt,xt){for(var $t=-1,Ft=Array(Pt);++$t<Pt;)Ft[$t]=xt($t);return Ft}(dt.length,String):[],kt=vt.length;for(var Mt in dt)!bt&&!ht.call(dt,Mt)||pt&&(Mt=="length"||tt&&(Mt=="offset"||Mt=="parent")||at&&(Mt=="buffer"||Mt=="byteLength"||Mt=="byteOffset")||Tn(Mt,kt))||vt.push(Mt);return vt}(rt):function(dt){if(Dt=(bt=dt)&&bt.constructor,bt!==(typeof Dt=="function"&&Dt.prototype||ot))return ft(dt);var bt,Dt,At=[];for(var tt in Object(dt))ht.call(dt,tt)&&tt!="constructor"&&At.push(tt);return At}(rt);var ut}w.exports=function(rt,ut){return Kn(rt,ut)}},210:function(w,g,h){var m=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(g,"__esModule",{value:!0});var _,o=m(h(465)),r=m(h(307));(function(s){s.compose=function(c,d,E){c===void 0&&(c={}),d===void 0&&(d={}),typeof c!="object"&&(c={}),typeof d!="object"&&(d={});var v=o.default(d);for(var y in E||(v=Object.keys(v).reduce(function(u,l){return v[l]!=null&&(u[l]=v[l]),u},{})),c)c[y]!==void 0&&d[y]===void 0&&(v[y]=c[y]);return Object.keys(v).length>0?v:void 0},s.diff=function(c,d){c===void 0&&(c={}),d===void 0&&(d={}),typeof c!="object"&&(c={}),typeof d!="object"&&(d={});var E=Object.keys(c).concat(Object.keys(d)).reduce(function(v,y){return r.default(c[y],d[y])||(v[y]=d[y]===void 0?null:d[y]),v},{});return Object.keys(E).length>0?E:void 0},s.invert=function(c,d){c===void 0&&(c={}),d===void 0&&(d={}),c=c||{};var E=Object.keys(d).reduce(function(v,y){return d[y]!==c[y]&&c[y]!==void 0&&(v[y]=d[y]),v},{});return Object.keys(c).reduce(function(v,y){return c[y]!==d[y]&&d[y]===void 0&&(v[y]=null),v},E)},s.transform=function(c,d,E){if(E===void 0&&(E=!1),typeof c!="object")return d;if(typeof d=="object"){if(!E)return d;var v=Object.keys(d).reduce(function(y,u){return c[u]===void 0&&(y[u]=d[u]),y},{});return Object.keys(v).length>0?v:void 0}}})(_||(_={})),g.default=_},895:function(w,g,h){var m=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}},_=m(h(529)),o=m(h(465)),r=m(h(307)),s=m(h(210)),c=m(h(430)),d=String.fromCharCode(0),E=function(){function v(y){Array.isArray(y)?this.ops=y:y!=null&&Array.isArray(y.ops)?this.ops=y.ops:this.ops=[]}return v.prototype.insert=function(y,u){var l={};return typeof y=="string"&&y.length===0?this:(l.insert=y,u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(l.attributes=u),this.push(l))},v.prototype.delete=function(y){return y<=0?this:this.push({delete:y})},v.prototype.retain=function(y,u){if(y<=0)return this;var l={retain:y};return u!=null&&typeof u=="object"&&Object.keys(u).length>0&&(l.attributes=u),this.push(l)},v.prototype.push=function(y){var u=this.ops.length,l=this.ops[u-1];if(y=o.default(y),typeof l=="object"){if(typeof y.delete=="number"&&typeof l.delete=="number")return this.ops[u-1]={delete:l.delete+y.delete},this;if(typeof l.delete=="number"&&y.insert!=null&&(u-=1,typeof(l=this.ops[u-1])!="object"))return this.ops.unshift(y),this;if(r.default(y.attributes,l.attributes)){if(typeof y.insert=="string"&&typeof l.insert=="string")return this.ops[u-1]={insert:l.insert+y.insert},typeof y.attributes=="object"&&(this.ops[u-1].attributes=y.attributes),this;if(typeof y.retain=="number"&&typeof l.retain=="number")return this.ops[u-1]={retain:l.retain+y.retain},typeof y.attributes=="object"&&(this.ops[u-1].attributes=y.attributes),this}}return u===this.ops.length?this.ops.push(y):this.ops.splice(u,0,y),this},v.prototype.chop=function(){var y=this.ops[this.ops.length-1];return y&&y.retain&&!y.attributes&&this.ops.pop(),this},v.prototype.filter=function(y){return this.ops.filter(y)},v.prototype.forEach=function(y){this.ops.forEach(y)},v.prototype.map=function(y){return this.ops.map(y)},v.prototype.partition=function(y){var u=[],l=[];return this.forEach(function(b){(y(b)?u:l).push(b)}),[u,l]},v.prototype.reduce=function(y,u){return this.ops.reduce(y,u)},v.prototype.changeLength=function(){return this.reduce(function(y,u){return u.insert?y+c.default.length(u):u.delete?y-u.delete:y},0)},v.prototype.length=function(){return this.reduce(function(y,u){return y+c.default.length(u)},0)},v.prototype.slice=function(y,u){y===void 0&&(y=0),u===void 0&&(u=1/0);for(var l=[],b=c.default.iterator(this.ops),O=0;O<u&&b.hasNext();){var S=void 0;O<y?S=b.next(y-O):(S=b.next(u-O),l.push(S)),O+=c.default.length(S)}return new v(l)},v.prototype.compose=function(y){var u=c.default.iterator(this.ops),l=c.default.iterator(y.ops),b=[],O=l.peek();if(O!=null&&typeof O.retain=="number"&&O.attributes==null){for(var S=O.retain;u.peekType()==="insert"&&u.peekLength()<=S;)S-=u.peekLength(),b.push(u.next());O.retain-S>0&&l.next(O.retain-S)}for(var C=new v(b);u.hasNext()||l.hasNext();)if(l.peekType()==="insert")C.push(l.next());else if(u.peekType()==="delete")C.push(u.next());else{var L=Math.min(u.peekLength(),l.peekLength()),A=u.next(L),k=l.next(L);if(typeof k.retain=="number"){var x={};typeof A.retain=="number"?x.retain=L:x.insert=A.insert;var N=s.default.compose(A.attributes,k.attributes,typeof A.retain=="number");if(N&&(x.attributes=N),C.push(x),!l.hasNext()&&r.default(C.ops[C.ops.length-1],x)){var M=new v(u.rest());return C.concat(M).chop()}}else typeof k.delete=="number"&&typeof A.retain=="number"&&C.push(k)}return C.chop()},v.prototype.concat=function(y){var u=new v(this.ops.slice());return y.ops.length>0&&(u.push(y.ops[0]),u.ops=u.ops.concat(y.ops.slice(1))),u},v.prototype.diff=function(y,u){if(this.ops===y.ops)return new v;var l=[this,y].map(function(L){return L.map(function(A){if(A.insert!=null)return typeof A.insert=="string"?A.insert:d;throw new Error("diff() called "+(L===y?"on":"with")+" non-document")}).join("")}),b=new v,O=_.default(l[0],l[1],u),S=c.default.iterator(this.ops),C=c.default.iterator(y.ops);return O.forEach(function(L){for(var A=L[1].length;A>0;){var k=0;switch(L[0]){case _.default.INSERT:k=Math.min(C.peekLength(),A),b.push(C.next(k));break;case _.default.DELETE:k=Math.min(A,S.peekLength()),S.next(k),b.delete(k);break;case _.default.EQUAL:k=Math.min(S.peekLength(),C.peekLength(),A);var x=S.next(k),N=C.next(k);r.default(x.insert,N.insert)?b.retain(k,s.default.diff(x.attributes,N.attributes)):b.push(N).delete(k)}A-=k}}),b.chop()},v.prototype.eachLine=function(y,u){u===void 0&&(u=`
`);for(var l=c.default.iterator(this.ops),b=new v,O=0;l.hasNext();){if(l.peekType()!=="insert")return;var S=l.peek(),C=c.default.length(S)-l.peekLength(),L=typeof S.insert=="string"?S.insert.indexOf(u,C)-C:-1;if(L<0)b.push(l.next());else if(L>0)b.push(l.next(L));else{if(y(b,l.next(1).attributes||{},O)===!1)return;O+=1,b=new v}}b.length()>0&&y(b,{},O)},v.prototype.invert=function(y){var u=new v;return this.reduce(function(l,b){if(b.insert)u.delete(c.default.length(b));else{if(b.retain&&b.attributes==null)return u.retain(b.retain),l+b.retain;if(b.delete||b.retain&&b.attributes){var O=b.delete||b.retain;return y.slice(l,l+O).forEach(function(S){b.delete?u.push(S):b.retain&&b.attributes&&u.retain(c.default.length(S),s.default.invert(b.attributes,S.attributes))}),l+O}}return l},0),u.chop()},v.prototype.transform=function(y,u){if(u===void 0&&(u=!1),u=!!u,typeof y=="number")return this.transformPosition(y,u);for(var l=y,b=c.default.iterator(this.ops),O=c.default.iterator(l.ops),S=new v;b.hasNext()||O.hasNext();)if(b.peekType()!=="insert"||!u&&O.peekType()==="insert")if(O.peekType()==="insert")S.push(O.next());else{var C=Math.min(b.peekLength(),O.peekLength()),L=b.next(C),A=O.next(C);if(L.delete)continue;A.delete?S.push(A):S.retain(C,s.default.transform(L.attributes,A.attributes,u))}else S.retain(c.default.length(b.next()));return S.chop()},v.prototype.transformPosition=function(y,u){u===void 0&&(u=!1),u=!!u;for(var l=c.default.iterator(this.ops),b=0;l.hasNext()&&b<=y;){var O=l.peekLength(),S=l.peekType();l.next(),S!=="delete"?(S==="insert"&&(b<y||!u)&&(y+=O),b+=O):y-=Math.min(O,y-b)}return y},v.Op=c.default,v.AttributeMap=s.default,v}();w.exports=E},977:function(w,g,h){var m=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(g,"__esModule",{value:!0});var _=m(h(430)),o=function(){function r(s){this.ops=s,this.index=0,this.offset=0}return r.prototype.hasNext=function(){return this.peekLength()<1/0},r.prototype.next=function(s){s||(s=1/0);var c=this.ops[this.index];if(c){var d=this.offset,E=_.default.length(c);if(s>=E-d?(s=E-d,this.index+=1,this.offset=0):this.offset+=s,typeof c.delete=="number")return{delete:s};var v={};return c.attributes&&(v.attributes=c.attributes),typeof c.retain=="number"?v.retain=s:typeof c.insert=="string"?v.insert=c.insert.substr(d,s):v.insert=c.insert,v}return{retain:1/0}},r.prototype.peek=function(){return this.ops[this.index]},r.prototype.peekLength=function(){return this.ops[this.index]?_.default.length(this.ops[this.index])-this.offset:1/0},r.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},r.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var s=this.offset,c=this.index,d=this.next(),E=this.ops.slice(this.index);return this.offset=s,this.index=c,[d].concat(E)}return[]},r}();g.default=o},430:function(w,g,h){var m=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(g,"__esModule",{value:!0});var _,o=m(h(977));(function(r){r.iterator=function(s){return new o.default(s)},r.length=function(s){return typeof s.delete=="number"?s.delete:typeof s.retain=="number"?s.retain:typeof s.insert=="string"?s.insert.length:1}})(_||(_={})),g.default=_},165:function(w,g,h){var m,_;(_=typeof(m=function(){var o,r={};function s(E,v,y){var u=E.getClientRects();if(u.length===2){var l=E.getBoundingClientRect();return u[v][y]<l[y]}return!1}function c(E){if(!E||screen.deviceXDPI===screen.logicalXDPI)return E;if("length"in E)return Array.prototype.map.call(E,c);var v=screen.deviceXDPI/screen.logicalXDPI;return{top:E.top/v,bottom:E.bottom/v,left:E.left/v,right:E.right/v,width:E.width/v,height:E.height/v}}function d(E,v){var y,u=0,l=1024;if(l>=v.length)return Array.prototype.push.apply(E,v);for(;u<v.length;)y=Array.prototype.push.apply(E,Array.prototype.slice.call(v,u,u+l)),u+=l;return y}return r.isBroken=function(){if(o===void 0){var E=document.createElement("p"),v=document.createElement("span"),y=document.createTextNode("aa"),u=document.createTextNode("aa"),l=document.createElement("img");l.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");var b=document.createRange();if(o={},E.appendChild(y),E.appendChild(v),v.appendChild(l),v.appendChild(u),document.body.appendChild(E),b.setStart(y,1),b.setEnd(v,0),o.getClientRects=o.getBoundingClientRect=b.getClientRects().length>1,o.getClientRects||(b.setEnd(u,1),o.getClientRects=o.getBoundingClientRect=b.getClientRects().length===2),!o.getBoundingClientRect){b.setEnd(b.startContainer,b.startOffset);var O=b.getBoundingClientRect();o.getBoundingClientRect=O.top===0&&O.left===0}if(document.body.removeChild(E),!o.getBoundingClientRect){var S=document.createElement("p");S.style.width="0px",S.style.fontSize="20px",S.style.whiteSpace="normal",S.style.wordBreak="normal";var C=document.createTextNode("m mm");S.appendChild(C),document.body.appendChild(S),b.setStart(C,1),b.setEnd(C,2),s(b,1,"left")?o.getBoundingClientRect=!0:(b.setStart(C,1),b.setEnd(C,3),s(b,0,"top")&&(o.getBoundingClientRect=!0)),document.body.removeChild(S)}var L=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")();o.ieZoom=!!L&&L<=10}return o},r.getClientRects=function(E){var v=this.isBroken();if(v.ieZoom)return c(E.getClientRects());if(!v.getClientRects)return E.getClientRects();var y=[],u=[],l=E.endContainer,b=E.endOffset,O=document.createRange();function S(C){for(var L=0;C=C.previousSibling;)L++;return L}for(;l!==E.commonAncestorContainer;)O.setStart(l,0),O.setEnd(l,b),d(u,O.getClientRects()),b=S(l),l=l.parentNode;return(O=E.cloneRange()).setEnd(l,b),d(y,O.getClientRects()),d(y,u),y},r.getBoundingClientRect=function(E){var v=this.getClientRects(E);if(v.length===0)return null;var y,u=E.getBoundingClientRect(),l=this.isBroken();if(l.ieZoom)return c(u);if(!l.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return v[0];for(var b=0,O=v.length;b<O;b++){var S=v[b];y?(y.left=Math.min(y.left,S.left),y.top=Math.min(y.top,S.top),y.right=Math.max(y.right,S.right),y.bottom=Math.max(y.bottom,S.bottom)):y={left:S.left,top:S.top,right:S.right,bottom:S.bottom}}return y&&(y.width=y.right-y.left,y.height=y.bottom-y.top),y},r})=="function"?m.call(g,h,g,w):m)===void 0||(w.exports=_)},33:(w,g,h)=>{h.r(g),h.d(g,{default:()=>N});var m=function(){if(typeof Map<"u")return Map;function M(I,U){var Y=-1;return I.some(function(nt,z){return nt[0]===U&&(Y=z,!0)}),Y}return function(){function I(){this.__entries__=[]}return Object.defineProperty(I.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),I.prototype.get=function(U){var Y=M(this.__entries__,U),nt=this.__entries__[Y];return nt&&nt[1]},I.prototype.set=function(U,Y){var nt=M(this.__entries__,U);~nt?this.__entries__[nt][1]=Y:this.__entries__.push([U,Y])},I.prototype.delete=function(U){var Y=this.__entries__,nt=M(Y,U);~nt&&Y.splice(nt,1)},I.prototype.has=function(U){return!!~M(this.__entries__,U)},I.prototype.clear=function(){this.__entries__.splice(0)},I.prototype.forEach=function(U,Y){Y===void 0&&(Y=null);for(var nt=0,z=this.__entries__;nt<z.length;nt++){var V=z[nt];U.call(Y,V[1],V[0])}},I}()}(),_=typeof window<"u"&&typeof document<"u"&&window.document===document,o=h.g!==void 0&&h.g.Math===Math?h.g:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")(),r=typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(o):function(M){return setTimeout(function(){return M(Date.now())},1e3/60)},s=["top","right","bottom","left","width","height","size","weight"],c=typeof MutationObserver<"u",d=function(){function M(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(I,U){var Y=!1,nt=!1,z=0;function V(){Y&&(Y=!1,I()),nt&&H()}function P(){r(V)}function H(){var F=Date.now();if(Y){if(F-z<2)return;nt=!0}else Y=!0,nt=!1,setTimeout(P,20);z=F}return H}(this.refresh.bind(this))}return M.prototype.addObserver=function(I){~this.observers_.indexOf(I)||this.observers_.push(I),this.connected_||this.connect_()},M.prototype.removeObserver=function(I){var U=this.observers_,Y=U.indexOf(I);~Y&&U.splice(Y,1),!U.length&&this.connected_&&this.disconnect_()},M.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},M.prototype.updateObservers_=function(){var I=this.observers_.filter(function(U){return U.gatherActive(),U.hasActive()});return I.forEach(function(U){return U.broadcastActive()}),I.length>0},M.prototype.connect_=function(){_&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},M.prototype.disconnect_=function(){_&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},M.prototype.onTransitionEnd_=function(I){var U=I.propertyName,Y=U===void 0?"":U;s.some(function(nt){return!!~Y.indexOf(nt)})&&this.refresh()},M.getInstance=function(){return this.instance_||(this.instance_=new M),this.instance_},M.instance_=null,M}(),E=function(M,I){for(var U=0,Y=Object.keys(I);U<Y.length;U++){var nt=Y[U];Object.defineProperty(M,nt,{value:I[nt],enumerable:!1,writable:!1,configurable:!0})}return M},v=function(M){return M&&M.ownerDocument&&M.ownerDocument.defaultView||o},y=S(0,0,0,0);function u(M){return parseFloat(M)||0}function l(M){for(var I=[],U=1;U<arguments.length;U++)I[U-1]=arguments[U];return I.reduce(function(Y,nt){return Y+u(M["border-"+nt+"-width"])},0)}var b=typeof SVGGraphicsElement<"u"?function(M){return M instanceof v(M).SVGGraphicsElement}:function(M){return M instanceof v(M).SVGElement&&typeof M.getBBox=="function"};function O(M){return _?b(M)?function(I){var U=I.getBBox();return S(0,0,U.width,U.height)}(M):function(I){var U=I.clientWidth,Y=I.clientHeight;if(!U&&!Y)return y;var nt=v(I).getComputedStyle(I),z=function(q){for(var K={},B=0,W=["top","right","bottom","left"];B<W.length;B++){var it=W[B],ot=q["padding-"+it];K[it]=u(ot)}return K}(nt),V=z.left+z.right,P=z.top+z.bottom,H=u(nt.width),F=u(nt.height);if(nt.boxSizing==="border-box"&&(Math.round(H+V)!==U&&(H-=l(nt,"left","right")+V),Math.round(F+P)!==Y&&(F-=l(nt,"top","bottom")+P)),!function(q){return q===v(q).document.documentElement}(I)){var J=Math.round(H+V)-U,j=Math.round(F+P)-Y;Math.abs(J)!==1&&(H-=J),Math.abs(j)!==1&&(F-=j)}return S(z.left,z.top,H,F)}(M):y}function S(M,I,U,Y){return{x:M,y:I,width:U,height:Y}}var C=function(){function M(I){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=S(0,0,0,0),this.target=I}return M.prototype.isActive=function(){var I=O(this.target);return this.contentRect_=I,I.width!==this.broadcastWidth||I.height!==this.broadcastHeight},M.prototype.broadcastRect=function(){var I=this.contentRect_;return this.broadcastWidth=I.width,this.broadcastHeight=I.height,I},M}(),L=function(M,I){var U,Y,nt,z,V,P,H,F=(Y=(U=I).x,nt=U.y,z=U.width,V=U.height,P=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,H=Object.create(P.prototype),E(H,{x:Y,y:nt,width:z,height:V,top:nt,right:Y+z,bottom:V+nt,left:Y}),H);E(this,{target:M,contentRect:F})},A=function(){function M(I,U,Y){if(this.activeObservations_=[],this.observations_=new m,typeof I!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=I,this.controller_=U,this.callbackCtx_=Y}return M.prototype.observe=function(I){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(I instanceof v(I).Element))throw new TypeError('parameter 1 is not of type "Element".');var U=this.observations_;U.has(I)||(U.set(I,new C(I)),this.controller_.addObserver(this),this.controller_.refresh())}},M.prototype.unobserve=function(I){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(typeof Element<"u"&&Element instanceof Object){if(!(I instanceof v(I).Element))throw new TypeError('parameter 1 is not of type "Element".');var U=this.observations_;U.has(I)&&(U.delete(I),U.size||this.controller_.removeObserver(this))}},M.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},M.prototype.gatherActive=function(){var I=this;this.clearActive(),this.observations_.forEach(function(U){U.isActive()&&I.activeObservations_.push(U)})},M.prototype.broadcastActive=function(){if(this.hasActive()){var I=this.callbackCtx_,U=this.activeObservations_.map(function(Y){return new L(Y.target,Y.broadcastRect())});this.callback_.call(I,U,I),this.clearActive()}},M.prototype.clearActive=function(){this.activeObservations_.splice(0)},M.prototype.hasActive=function(){return this.activeObservations_.length>0},M}(),k=typeof WeakMap<"u"?new WeakMap:new m,x=function M(I){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var U=d.getInstance(),Y=new A(I,U,this);k.set(this,Y)};["observe","unobserve","disconnect"].forEach(function(M){x.prototype[M]=function(){var I;return(I=k.get(this))[M].apply(I,arguments)}});const N=o.ResizeObserver!==void 0?o.ResizeObserver:x},413:(w,g,h)=>{h.r(g),h.d(g,{default:()=>S});var m=h(379),_=h.n(m),o=h(795),r=h.n(o),s=h(569),c=h.n(s),d=h(565),E=h.n(d),v=h(216),y=h.n(v),u=h(589),l=h.n(u),b=h(582),O={};O.styleTagTransform=l(),O.setAttributes=E(),O.insert=c().bind(null,"head"),O.domAPI=r(),O.insertStyleElement=y(),_()(b.Z,O);const S=b.Z&&b.Z.locals?b.Z.locals:void 0},379:w=>{var g=[];function h(o){for(var r=-1,s=0;s<g.length;s++)if(g[s].identifier===o){r=s;break}return r}function m(o,r){for(var s={},c=[],d=0;d<o.length;d++){var E=o[d],v=r.base?E[0]+r.base:E[0],y=s[v]||0,u="".concat(v," ").concat(y);s[v]=y+1;var l=h(u),b={css:E[1],media:E[2],sourceMap:E[3],supports:E[4],layer:E[5]};if(l!==-1)g[l].references++,g[l].updater(b);else{var O=_(b,r);r.byIndex=d,g.splice(d,0,{identifier:u,updater:O,references:1})}c.push(u)}return c}function _(o,r){var s=r.domAPI(r);return s.update(o),function(c){if(c){if(c.css===o.css&&c.media===o.media&&c.sourceMap===o.sourceMap&&c.supports===o.supports&&c.layer===o.layer)return;s.update(o=c)}else s.remove()}}w.exports=function(o,r){var s=m(o=o||[],r=r||{});return function(c){c=c||[];for(var d=0;d<s.length;d++){var E=h(s[d]);g[E].references--}for(var v=m(c,r),y=0;y<s.length;y++){var u=h(s[y]);g[u].references===0&&(g[u].updater(),g.splice(u,1))}s=v}}},569:w=>{var g={};w.exports=function(h,m){var _=function(o){if(g[o]===void 0){var r=document.querySelector(o);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch{r=null}g[o]=r}return g[o]}(h);if(!_)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");_.appendChild(m)}},216:w=>{w.exports=function(g){var h=document.createElement("style");return g.setAttributes(h,g.attributes),g.insert(h,g.options),h}},565:(w,g,h)=>{w.exports=function(m){var _=h.nc;_&&m.setAttribute("nonce",_)}},795:w=>{w.exports=function(g){var h=g.insertStyleElement(g);return{update:function(m){(function(_,o,r){var s="";r.supports&&(s+="@supports (".concat(r.supports,") {")),r.media&&(s+="@media ".concat(r.media," {"));var c=r.layer!==void 0;c&&(s+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),s+=r.css,c&&(s+="}"),r.media&&(s+="}"),r.supports&&(s+="}");var d=r.sourceMap;d&&typeof btoa<"u"&&(s+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(d))))," */")),o.styleTagTransform(s,_,o.options)})(h,g,m)},remove:function(){(function(m){if(m.parentNode===null)return!1;m.parentNode.removeChild(m)})(h)}}}},589:w=>{w.exports=function(g,h){if(h.styleSheet)h.styleSheet.cssText=g;else{for(;h.firstChild;)h.removeChild(h.firstChild);h.appendChild(document.createTextNode(g))}}},607:function(w,g,h){var m=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(g,"__esModule",{value:!0}),g.Cursor=g.default=void 0;var _=m(h(678));g.default=_.default;var o=m(h(353));g.Cursor=o.default,h(413)},353:(w,g,h)=>{Object.defineProperty(g,"__esModule",{value:!0});var m=h(207),_=function(){function o(r,s,c){this.id=r,this.name=s,this.color=c,this.toggleNearCursor=this.toggleNearCursor.bind(this),this._toggleOpenedCursor=this._toggleOpenedCursor.bind(this),this._setHoverState=this._setHoverState.bind(this)}return o.prototype.build=function(r){var s=document.createElement(o.CONTAINER_ELEMENT_TAG);s.classList.add(o.CURSOR_CLASS),s.id="ql-cursor-".concat(this.id),s.innerHTML=r.template;var c=s.getElementsByClassName(o.SELECTION_CLASS)[0],d=s.getElementsByClassName(o.CARET_CONTAINER_CLASS)[0],E=d.getElementsByClassName(o.CARET_CLASS)[0],v=s.getElementsByClassName(o.FLAG_CLASS)[0];return v.style.backgroundColor=this.color,E.style.backgroundColor=this.color,s.getElementsByClassName(o.NAME_CLASS)[0].textContent=this.name,this._hideDelay="".concat(r.hideDelayMs,"ms"),this._hideSpeedMs=r.hideSpeedMs,this._positionFlag=r.positionFlag,v.style.transitionDelay=this._hideDelay,v.style.transitionDuration="".concat(this._hideSpeedMs,"ms"),this._el=s,this._selectionEl=c,this._caretEl=d,this._flagEl=v,d.addEventListener("mouseover",this._setHoverState),this._el},o.prototype.show=function(){this._el.classList.remove(o.HIDDEN_CLASS)},o.prototype.hide=function(){this._el.classList.add(o.HIDDEN_CLASS)},o.prototype.remove=function(){this._el.parentNode.removeChild(this._el)},o.prototype.toggleNearCursor=function(r,s){var c=this._getCoordinates(),d=c.left,E=c.right,v=c.top,y=c.bottom,u=r>=d&&r<=E&&s>=v&&s<=y;return this._caretEl.classList.toggle(o.CONTAINER_HOVER_CLASS,u),u},o.prototype.toggleFlag=function(r){var s=this;this._caretEl.classList.toggle(o.CONTAINER_HOVER_CLASS,r)||(this._flagEl.classList.add(o.NO_DELAY_CLASS),setTimeout(function(){return s._flagEl.classList.remove(o.NO_DELAY_CLASS)},this._hideSpeedMs))},o.prototype.updateCaret=function(r,s){this._caretEl.style.top="".concat(r.top,"px"),this._caretEl.style.left="".concat(r.left,"px"),this._caretEl.style.height="".concat(r.height,"px"),this._positionFlag?this._positionFlag(this._flagEl,r,s):this._updateCaretFlag(r,s)},o.prototype.updateSelection=function(r,s){var c=this;this._clearSelection(),r=r||[],r=Array.from(r),r=this._sanitize(r),(r=this._sortByDomPosition(r)).forEach(function(d){return c._addSelection(d,s)})},o.prototype._setHoverState=function(){document.addEventListener("mousemove",this._toggleOpenedCursor)},o.prototype._toggleOpenedCursor=function(r){var s=this.toggleNearCursor(r.clientX,r.clientY);this._caretEl.classList.toggle(o.CONTAINER_NO_POINTER_CLASS,s),s||document.removeEventListener("mousemove",this._toggleOpenedCursor)},o.prototype._getCoordinates=function(){return this._caretEl.getBoundingClientRect()},o.prototype._updateCaretFlag=function(r,s){this._flagEl.style.width="";var c=this._flagEl.getBoundingClientRect();this._flagEl.classList.remove(o.FLAG_FLIPPED_CLASS),r.left>s.width-c.width&&this._flagEl.classList.add(o.FLAG_FLIPPED_CLASS),this._flagEl.style.left="".concat(r.left,"px"),this._flagEl.style.top="".concat(r.top,"px"),this._flagEl.style.width="".concat(Math.ceil(c.width),"px")},o.prototype._clearSelection=function(){this._selectionEl.innerHTML=""},o.prototype._addSelection=function(r,s){var c=this._selectionBlock(r,s);this._selectionEl.appendChild(c)},o.prototype._selectionBlock=function(r,s){var c=document.createElement(o.SELECTION_ELEMENT_TAG);return c.classList.add(o.SELECTION_BLOCK_CLASS),c.style.top="".concat(r.top-s.top,"px"),c.style.left="".concat(r.left-s.left,"px"),c.style.width="".concat(r.width,"px"),c.style.height="".concat(r.height,"px"),c.style.backgroundColor=m(this.color).setAlpha(.3).toString(),c},o.prototype._sortByDomPosition=function(r){return r.sort(function(s,c){return s.top===c.top?s.left-c.left:s.top-c.top})},o.prototype._sanitize=function(r){var s=this,c=new Set;return r.filter(function(d){if(!d.width||!d.height)return!1;var E=s._serialize(d);return!c.has(E)&&(c.add(E),!0)})},o.prototype._serialize=function(r){return["top:".concat(r.top),"right:".concat(r.right),"bottom:".concat(r.bottom),"left:".concat(r.left)].join(";")},o.CONTAINER_ELEMENT_TAG="SPAN",o.SELECTION_ELEMENT_TAG="SPAN",o.CURSOR_CLASS="ql-cursor",o.SELECTION_CLASS="ql-cursor-selections",o.SELECTION_BLOCK_CLASS="ql-cursor-selection-block",o.CARET_CLASS="ql-cursor-caret",o.CARET_CONTAINER_CLASS="ql-cursor-caret-container",o.CONTAINER_HOVER_CLASS="hover",o.CONTAINER_NO_POINTER_CLASS="no-pointer",o.FLAG_CLASS="ql-cursor-flag",o.FLAG_FLIPPED_CLASS="flag-flipped",o.NAME_CLASS="ql-cursor-name",o.HIDDEN_CLASS="hidden",o.NO_DELAY_CLASS="no-delay",o}();g.default=_},678:function(w,g,h){var m=this&&this.__createBinding||(Object.create?function(u,l,b,O){O===void 0&&(O=b);var S=Object.getOwnPropertyDescriptor(l,b);S&&!("get"in S?!l.__esModule:S.writable||S.configurable)||(S={enumerable:!0,get:function(){return l[b]}}),Object.defineProperty(u,O,S)}:function(u,l,b,O){O===void 0&&(O=b),u[O]=l[b]}),_=this&&this.__setModuleDefault||(Object.create?function(u,l){Object.defineProperty(u,"default",{enumerable:!0,value:l})}:function(u,l){u.default=l}),o=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var l={};if(u!=null)for(var b in u)b!=="default"&&Object.prototype.hasOwnProperty.call(u,b)&&m(l,u,b);return _(l,u),l},r=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(g,"__esModule",{value:!0});var s=r(h(353)),c=o(h(165)),d=r(h(338)),E=r(h(33)),v=h(895),y=function(){function u(l,b){b===void 0&&(b={}),this._cursors={},this._isObserving=!1,this._handleCursorTouch=this._handleCursorTouch.bind(this),this.quill=l,this.options=this._setDefaults(b),this._container=this.quill.addContainer(this.options.containerClass),this._boundsContainer=this.options.boundsContainer||this.quill.container,this._currentSelection=this.quill.getSelection(),this._registerSelectionChangeListeners(),this._registerTextChangeListener(),this._registerDomListeners()}return u.prototype.createCursor=function(l,b,O){var S=this._cursors[l];if(!S){S=new s.default(l,b,O),this._cursors[l]=S;var C=S.build(this.options);this._container.appendChild(C)}return S},u.prototype.moveCursor=function(l,b){var O=this._cursors[l];O&&(O.range=b,this._updateCursor(O))},u.prototype.removeCursor=function(l){var b=this._cursors[l];b&&(b.remove(),delete this._cursors[l])},u.prototype.update=function(){var l=this;this.cursors().forEach(function(b){return l._updateCursor(b)})},u.prototype.clearCursors=function(){var l=this;this.cursors().forEach(function(b){return l.removeCursor(b.id)})},u.prototype.toggleFlag=function(l,b){var O=this._cursors[l];O&&O.toggleFlag(b)},u.prototype.cursors=function(){var l=this;return Object.keys(this._cursors).map(function(b){return l._cursors[b]})},u.prototype._registerSelectionChangeListeners=function(){var l=this;this.quill.on(this.quill.constructor.events.SELECTION_CHANGE,function(b){l._currentSelection=b})},u.prototype._registerTextChangeListener=function(){var l=this;this.quill.on(this.quill.constructor.events.TEXT_CHANGE,function(b){return l._handleTextChange(b)})},u.prototype._registerDomListeners=function(){var l=this,b=this.quill.container.getElementsByClassName("ql-editor")[0];b.addEventListener("scroll",function(){return l.update()}),b.addEventListener("touchstart",this._handleCursorTouch)},u.prototype._handleCursorTouch=function(l){var b=this;this.cursors().forEach(function(O){O.toggleNearCursor(l.pageX,l.pageY),setTimeout(function(){return O.toggleFlag(!1)},b.options.hideDelayMs)})},u.prototype._registerResizeObserver=function(){var l=this;if(!this._isObserving){var b=this.quill.container.getElementsByClassName("ql-editor")[0],O=new E.default(function(S){if(!S[0].target.isConnected)return O.disconnect(),void(l._isObserving=!1);l.update()});O.observe(b),this._isObserving=!0}},u.prototype._updateCursor=function(l){if(this._registerResizeObserver(),!l.range)return l.hide();var b=this._indexWithinQuillBounds(l.range.index),O=this._indexWithinQuillBounds(l.range.index+l.range.length),S=this.quill.getLeaf(b),C=this.quill.getLeaf(O);if(!this._leafIsValid(S)||!this._leafIsValid(C))return l.hide();l.show();var L=this._boundsContainer.getBoundingClientRect(),A=this.quill.getBounds(O);l.updateCaret(A,L);var k=this._lineRanges(l,S,C).reduce(function(x,N){return x.concat(Array.from(c.getClientRects(N)))},[]);l.updateSelection(k,L)},u.prototype._indexWithinQuillBounds=function(l){var b=this.quill.getLength(),O=b?b-1:0;return l=Math.max(l,0),Math.min(l,O)},u.prototype._leafIsValid=function(l){return l&&l[0]&&l[0].domNode&&l[1]>=0},u.prototype._handleTextChange=function(l){var b=this;window.setTimeout(function(){b.options.transformOnTextChange&&b._transformCursors(l),b.options.selectionChangeSource&&(b._emitSelection(),b.update())})},u.prototype._emitSelection=function(){this.quill.emitter.emit(this.quill.constructor.events.SELECTION_CHANGE,this.quill.getSelection(),this._currentSelection,this.options.selectionChangeSource)},u.prototype._setDefaults=function(l){return(l=Object.assign({},l)).template||(l.template=u.DEFAULTS.template),l.containerClass||(l.containerClass=u.DEFAULTS.containerClass),l.selectionChangeSource!==null&&(l.selectionChangeSource||(l.selectionChangeSource=u.DEFAULTS.selectionChangeSource)),l.hideDelayMs=Number.isInteger(l.hideDelayMs)?l.hideDelayMs:u.DEFAULTS.hideDelayMs,l.hideSpeedMs=Number.isInteger(l.hideSpeedMs)?l.hideSpeedMs:u.DEFAULTS.hideSpeedMs,l.transformOnTextChange=!!l.transformOnTextChange,l},u.prototype._lineRanges=function(l,b,O){var S=this.quill.getLines(l.range);return S.reduce(function(C,L,A){if(!L.children){var k=document.createRange();return k.selectNode(L.domNode),C.concat(k)}var x=A===0?b:L.path(0).pop(),N=x[0],M=x[1],I=A===S.length-1?O:L.path(L.length()-1).pop(),U=I[0],Y=I[1],nt=document.createRange();return N.domNode.nodeType===Node.TEXT_NODE?nt.setStart(N.domNode,M):nt.setStartBefore(N.domNode),U.domNode.nodeType===Node.TEXT_NODE?nt.setEnd(U.domNode,Y):nt.setEndAfter(U.domNode),C.concat(nt)},[])},u.prototype._transformCursors=function(l){var b=this;l=new v(l),this.cursors().filter(function(O){return O.range}).forEach(function(O){O.range.index=l.transformPosition(O.range.index),b._updateCursor(O)})},u.DEFAULTS={template:d.default,containerClass:"ql-cursors",selectionChangeSource:"api",hideDelayMs:3e3,hideSpeedMs:400},u}();g.default=y},338:function(w,g,h){var m=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(g,"__esModule",{value:!0});var _=m(h(353)),o=`
  <span class="`.concat(_.default.SELECTION_CLASS,`"></span>
  <span class="`).concat(_.default.CARET_CONTAINER_CLASS,`">
    <span class="`).concat(_.default.CARET_CLASS,`"></span>
  </span>
  <div class="`).concat(_.default.FLAG_CLASS,`">
    <small class="`).concat(_.default.NAME_CLASS,`"></small>
  </div>
`);g.default=o},207:function(w){w.exports=function(){const g=/^\s+/,h=/\s+$/;function m(j,q){if(q=q||{},(j=j||"")instanceof m)return j;if(!(this instanceof m))return new m(j,q);var K=function(B){var W={r:0,g:0,b:0},it=1,ot=null,st=null,ct=null,ht=!1,Z=!1;return typeof B=="string"&&(B=function(D){D=D.replace(g,"").replace(h,"").toLowerCase();var f,T=!1;if(A[D])D=A[D],T=!0;else if(D=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(f=F.rgb.exec(D))?{r:f[1],g:f[2],b:f[3]}:(f=F.rgba.exec(D))?{r:f[1],g:f[2],b:f[3],a:f[4]}:(f=F.hsl.exec(D))?{h:f[1],s:f[2],l:f[3]}:(f=F.hsla.exec(D))?{h:f[1],s:f[2],l:f[3],a:f[4]}:(f=F.hsv.exec(D))?{h:f[1],s:f[2],v:f[3]}:(f=F.hsva.exec(D))?{h:f[1],s:f[2],v:f[3],a:f[4]}:(f=F.hex8.exec(D))?{r:I(f[1]),g:I(f[2]),b:I(f[3]),a:z(f[4]),format:T?"name":"hex8"}:(f=F.hex6.exec(D))?{r:I(f[1]),g:I(f[2]),b:I(f[3]),format:T?"name":"hex"}:(f=F.hex4.exec(D))?{r:I(f[1]+""+f[1]),g:I(f[2]+""+f[2]),b:I(f[3]+""+f[3]),a:z(f[4]+""+f[4]),format:T?"name":"hex8"}:!!(f=F.hex3.exec(D))&&{r:I(f[1]+""+f[1]),g:I(f[2]+""+f[2]),b:I(f[3]+""+f[3]),format:T?"name":"hex"}}(B)),typeof B=="object"&&(J(B.r)&&J(B.g)&&J(B.b)?(et=B.r,lt=B.g,X=B.b,W={r:255*N(et,255),g:255*N(lt,255),b:255*N(X,255)},ht=!0,Z=String(B.r).substr(-1)==="%"?"prgb":"rgb"):J(B.h)&&J(B.s)&&J(B.v)?(ot=Y(B.s),st=Y(B.v),W=function(D,f,T){D=6*N(D,360),f=N(f,100),T=N(T,100);var R=Math.floor(D),$=D-R,G=T*(1-f),Q=T*(1-$*f),ft=T*(1-(1-$)*f),gt=R%6;return{r:255*[T,Q,G,G,ft,T][gt],g:255*[ft,T,T,Q,G,G][gt],b:255*[G,G,ft,T,T,Q][gt]}}(B.h,ot,st),ht=!0,Z="hsv"):J(B.h)&&J(B.s)&&J(B.l)&&(ot=Y(B.s),ct=Y(B.l),W=function(D,f,T){var R,$,G;function Q(mt,_t,yt){return yt<0&&(yt+=1),yt>1&&(yt-=1),yt<1/6?mt+6*(_t-mt)*yt:yt<.5?_t:yt<2/3?mt+(_t-mt)*(2/3-yt)*6:mt}if(D=N(D,360),f=N(f,100),T=N(T,100),f===0)R=$=G=T;else{var ft=T<.5?T*(1+f):T+f-T*f,gt=2*T-ft;R=Q(gt,ft,D+1/3),$=Q(gt,ft,D),G=Q(gt,ft,D-1/3)}return{r:255*R,g:255*$,b:255*G}}(B.h,ot,ct),ht=!0,Z="hsl"),B.hasOwnProperty("a")&&(it=B.a)),it=x(it),{ok:ht,format:B.format||Z,r:Math.min(255,Math.max(W.r,0)),g:Math.min(255,Math.max(W.g,0)),b:Math.min(255,Math.max(W.b,0)),a:it};var et,lt,X}(j);this._originalInput=j,this._r=K.r,this._g=K.g,this._b=K.b,this._a=K.a,this._roundA=Math.round(100*this._a)/100,this._format=q.format||K.format,this._gradientType=q.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=K.ok}function _(j,q,K){j=N(j,255),q=N(q,255),K=N(K,255);var B,W,it=Math.max(j,q,K),ot=Math.min(j,q,K),st=(it+ot)/2;if(it==ot)B=W=0;else{var ct=it-ot;switch(W=st>.5?ct/(2-it-ot):ct/(it+ot),it){case j:B=(q-K)/ct+(q<K?6:0);break;case q:B=(K-j)/ct+2;break;case K:B=(j-q)/ct+4}B/=6}return{h:B,s:W,l:st}}function o(j,q,K){j=N(j,255),q=N(q,255),K=N(K,255);var B,W,it=Math.max(j,q,K),ot=Math.min(j,q,K),st=it,ct=it-ot;if(W=it===0?0:ct/it,it==ot)B=0;else{switch(it){case j:B=(q-K)/ct+(q<K?6:0);break;case q:B=(K-j)/ct+2;break;case K:B=(j-q)/ct+4}B/=6}return{h:B,s:W,v:st}}function r(j,q,K,B){var W=[U(Math.round(j).toString(16)),U(Math.round(q).toString(16)),U(Math.round(K).toString(16))];return B&&W[0].charAt(0)==W[0].charAt(1)&&W[1].charAt(0)==W[1].charAt(1)&&W[2].charAt(0)==W[2].charAt(1)?W[0].charAt(0)+W[1].charAt(0)+W[2].charAt(0):W.join("")}function s(j,q,K,B){return[U(nt(B)),U(Math.round(j).toString(16)),U(Math.round(q).toString(16)),U(Math.round(K).toString(16))].join("")}function c(j,q){q=q===0?0:q||10;var K=m(j).toHsl();return K.s-=q/100,K.s=M(K.s),m(K)}function d(j,q){q=q===0?0:q||10;var K=m(j).toHsl();return K.s+=q/100,K.s=M(K.s),m(K)}function E(j){return m(j).desaturate(100)}function v(j,q){q=q===0?0:q||10;var K=m(j).toHsl();return K.l+=q/100,K.l=M(K.l),m(K)}function y(j,q){q=q===0?0:q||10;var K=m(j).toRgb();return K.r=Math.max(0,Math.min(255,K.r-Math.round(-q/100*255))),K.g=Math.max(0,Math.min(255,K.g-Math.round(-q/100*255))),K.b=Math.max(0,Math.min(255,K.b-Math.round(-q/100*255))),m(K)}function u(j,q){q=q===0?0:q||10;var K=m(j).toHsl();return K.l-=q/100,K.l=M(K.l),m(K)}function l(j,q){var K=m(j).toHsl(),B=(K.h+q)%360;return K.h=B<0?360+B:B,m(K)}function b(j){var q=m(j).toHsl();return q.h=(q.h+180)%360,m(q)}function O(j,q){if(isNaN(q)||q<=0)throw new Error("Argument to polyad must be a positive number");for(var K=m(j).toHsl(),B=[m(j)],W=360/q,it=1;it<q;it++)B.push(m({h:(K.h+it*W)%360,s:K.s,l:K.l}));return B}function S(j){var q=m(j).toHsl(),K=q.h;return[m(j),m({h:(K+72)%360,s:q.s,l:q.l}),m({h:(K+216)%360,s:q.s,l:q.l})]}function C(j,q,K){q=q||6,K=K||30;var B=m(j).toHsl(),W=360/K,it=[m(j)];for(B.h=(B.h-(W*q>>1)+720)%360;--q;)B.h=(B.h+W)%360,it.push(m(B));return it}function L(j,q){q=q||6;for(var K=m(j).toHsv(),B=K.h,W=K.s,it=K.v,ot=[],st=1/q;q--;)ot.push(m({h:B,s:W,v:it})),it=(it+st)%1;return ot}m.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var j=this.toRgb();return(299*j.r+587*j.g+114*j.b)/1e3},getLuminance:function(){var j,q,K,B=this.toRgb();return j=B.r/255,q=B.g/255,K=B.b/255,.2126*(j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4))+.7152*(q<=.03928?q/12.92:Math.pow((q+.055)/1.055,2.4))+.0722*(K<=.03928?K/12.92:Math.pow((K+.055)/1.055,2.4))},setAlpha:function(j){return this._a=x(j),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var j=o(this._r,this._g,this._b);return{h:360*j.h,s:j.s,v:j.v,a:this._a}},toHsvString:function(){var j=o(this._r,this._g,this._b),q=Math.round(360*j.h),K=Math.round(100*j.s),B=Math.round(100*j.v);return this._a==1?"hsv("+q+", "+K+"%, "+B+"%)":"hsva("+q+", "+K+"%, "+B+"%, "+this._roundA+")"},toHsl:function(){var j=_(this._r,this._g,this._b);return{h:360*j.h,s:j.s,l:j.l,a:this._a}},toHslString:function(){var j=_(this._r,this._g,this._b),q=Math.round(360*j.h),K=Math.round(100*j.s),B=Math.round(100*j.l);return this._a==1?"hsl("+q+", "+K+"%, "+B+"%)":"hsla("+q+", "+K+"%, "+B+"%, "+this._roundA+")"},toHex:function(j){return r(this._r,this._g,this._b,j)},toHexString:function(j){return"#"+this.toHex(j)},toHex8:function(j){return function(q,K,B,W,it){var ot=[U(Math.round(q).toString(16)),U(Math.round(K).toString(16)),U(Math.round(B).toString(16)),U(nt(W))];return it&&ot[0].charAt(0)==ot[0].charAt(1)&&ot[1].charAt(0)==ot[1].charAt(1)&&ot[2].charAt(0)==ot[2].charAt(1)&&ot[3].charAt(0)==ot[3].charAt(1)?ot[0].charAt(0)+ot[1].charAt(0)+ot[2].charAt(0)+ot[3].charAt(0):ot.join("")}(this._r,this._g,this._b,this._a,j)},toHex8String:function(j){return"#"+this.toHex8(j)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*N(this._r,255))+"%",g:Math.round(100*N(this._g,255))+"%",b:Math.round(100*N(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*N(this._r,255))+"%, "+Math.round(100*N(this._g,255))+"%, "+Math.round(100*N(this._b,255))+"%)":"rgba("+Math.round(100*N(this._r,255))+"%, "+Math.round(100*N(this._g,255))+"%, "+Math.round(100*N(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(k[r(this._r,this._g,this._b,!0)]||!1)},toFilter:function(j){var q="#"+s(this._r,this._g,this._b,this._a),K=q,B=this._gradientType?"GradientType = 1, ":"";if(j){var W=m(j);K="#"+s(W._r,W._g,W._b,W._a)}return"progid:DXImageTransform.Microsoft.gradient("+B+"startColorstr="+q+",endColorstr="+K+")"},toString:function(j){var q=!!j;j=j||this._format;var K=!1,B=this._a<1&&this._a>=0;return q||!B||j!=="hex"&&j!=="hex6"&&j!=="hex3"&&j!=="hex4"&&j!=="hex8"&&j!=="name"?(j==="rgb"&&(K=this.toRgbString()),j==="prgb"&&(K=this.toPercentageRgbString()),j!=="hex"&&j!=="hex6"||(K=this.toHexString()),j==="hex3"&&(K=this.toHexString(!0)),j==="hex4"&&(K=this.toHex8String(!0)),j==="hex8"&&(K=this.toHex8String()),j==="name"&&(K=this.toName()),j==="hsl"&&(K=this.toHslString()),j==="hsv"&&(K=this.toHsvString()),K||this.toHexString()):j==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return m(this.toString())},_applyModification:function(j,q){var K=j.apply(null,[this].concat([].slice.call(q)));return this._r=K._r,this._g=K._g,this._b=K._b,this.setAlpha(K._a),this},lighten:function(){return this._applyModification(v,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(u,arguments)},desaturate:function(){return this._applyModification(c,arguments)},saturate:function(){return this._applyModification(d,arguments)},greyscale:function(){return this._applyModification(E,arguments)},spin:function(){return this._applyModification(l,arguments)},_applyCombination:function(j,q){return j.apply(null,[this].concat([].slice.call(q)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(L,arguments)},splitcomplement:function(){return this._applyCombination(S,arguments)},triad:function(){return this._applyCombination(O,[3])},tetrad:function(){return this._applyCombination(O,[4])}},m.fromRatio=function(j,q){if(typeof j=="object"){var K={};for(var B in j)j.hasOwnProperty(B)&&(K[B]=B==="a"?j[B]:Y(j[B]));j=K}return m(j,q)},m.equals=function(j,q){return!(!j||!q)&&m(j).toRgbString()==m(q).toRgbString()},m.random=function(){return m.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},m.mix=function(j,q,K){K=K===0?0:K||50;var B=m(j).toRgb(),W=m(q).toRgb(),it=K/100;return m({r:(W.r-B.r)*it+B.r,g:(W.g-B.g)*it+B.g,b:(W.b-B.b)*it+B.b,a:(W.a-B.a)*it+B.a})},m.readability=function(j,q){var K=m(j),B=m(q);return(Math.max(K.getLuminance(),B.getLuminance())+.05)/(Math.min(K.getLuminance(),B.getLuminance())+.05)},m.isReadable=function(j,q,K){var B,W,it,ot,st,ct=m.readability(j,q);switch(W=!1,(it=K,(ot=((it=it||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&ot!=="AAA"&&(ot="AA"),(st=(it.size||"small").toLowerCase())!=="small"&&st!=="large"&&(st="small"),B={level:ot,size:st}).level+B.size){case"AAsmall":case"AAAlarge":W=ct>=4.5;break;case"AAlarge":W=ct>=3;break;case"AAAsmall":W=ct>=7}return W},m.mostReadable=function(j,q,K){var B,W,it,ot,st=null,ct=0;W=(K=K||{}).includeFallbackColors,it=K.level,ot=K.size;for(var ht=0;ht<q.length;ht++)(B=m.readability(j,q[ht]))>ct&&(ct=B,st=m(q[ht]));return m.isReadable(j,st,{level:it,size:ot})||!W?st:(K.includeFallbackColors=!1,m.mostReadable(j,["#fff","#000"],K))};var A=m.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=m.hexNames=function(j){var q={};for(var K in j)j.hasOwnProperty(K)&&(q[j[K]]=K);return q}(A);function x(j){return j=parseFloat(j),(isNaN(j)||j<0||j>1)&&(j=1),j}function N(j,q){(function(B){return typeof B=="string"&&B.indexOf(".")!=-1&&parseFloat(B)===1})(j)&&(j="100%");var K=function(B){return typeof B=="string"&&B.indexOf("%")!=-1}(j);return j=Math.min(q,Math.max(0,parseFloat(j))),K&&(j=parseInt(j*q,10)/100),Math.abs(j-q)<1e-6?1:j%q/parseFloat(q)}function M(j){return Math.min(1,Math.max(0,j))}function I(j){return parseInt(j,16)}function U(j){return j.length==1?"0"+j:""+j}function Y(j){return j<=1&&(j=100*j+"%"),j}function nt(j){return Math.round(255*parseFloat(j)).toString(16)}function z(j){return I(j)/255}var V,P,H,F=(P="[\\s|\\(]+("+(V="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",H="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",{CSS_UNIT:new RegExp(V),rgb:new RegExp("rgb"+P),rgba:new RegExp("rgba"+H),hsl:new RegExp("hsl"+P),hsla:new RegExp("hsla"+H),hsv:new RegExp("hsv"+P),hsva:new RegExp("hsva"+H),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function J(j){return!!F.CSS_UNIT.exec(j)}return m}()}},n={};function a(w){var g=n[w];if(g!==void 0)return g.exports;var h=n[w]={id:w,loaded:!1,exports:{}};return e[w].call(h.exports,h,h.exports,a),h.loaded=!0,h.exports}a.n=w=>{var g=w&&w.__esModule?()=>w.default:()=>w;return a.d(g,{a:g}),g},a.d=(w,g)=>{for(var h in g)a.o(g,h)&&!a.o(w,h)&&Object.defineProperty(w,h,{enumerable:!0,get:g[h]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(w,g)=>Object.prototype.hasOwnProperty.call(w,g),a.r=w=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(w,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(w,"__esModule",{value:!0})},a.nmd=w=>(w.paths=[],w.children||(w.children=[]),w),a.nc=void 0;var p=a(607);return p.default})())})(Go);var il=Go.exports;const ol=Mi(il);const sl=i=>{const t=/[\ud800-\udbff][\udc00-\udfff]/g;return i=i.replace(t,e=>{let n,a,p,w;return e.length===2?(n=e.charCodeAt(0),a=e.charCodeAt(1),p=(n-55296)*1024+65536+a-56320,w=`&#${p};`):w=e,w}),i},al=i=>{const t=/&#\d+;/g,e=i.match(t)||[];let n,a,p;for(let w=0;w<e.length;w+=1){p=e[w],p=p.replace("&#","").replace(";",""),n=Math.floor((p-65536)/1024)+55296,a=(p-65536)%1024+56320,p=`&#${p};`;const g=String.fromCharCode(n,a);i=i.replace(p,g)}return i};class ll{constructor(t){ho.register("modules/cursors",ol),this.quill=new ho(t,{modules:{cursors:!0},placeholder:"请输入内容..."})}focus(){this.quill.focus()}undo(){this.quill.history.undo()}redo(){this.quill.history.redo()}clear(){this.quill.setText(`
`),this.focus()}insertText(t){let{index:e}=this.quill.getSelection(!0);this.quill.insertText(e,t)}getCurrentCursor(){return this.quill.getSelection(!0).index}format(t,e){var n=this.quill.getSelection(!0);if(!n)return console.warn("User cursor is not in editor");let{index:a,length:p}=n,{bold:w,italic:g,strike:h,underline:m}=this.quill.getFormat(a,p);t==="icon-cuti"&&this.quill.formatText(a,p,"bold",!w),t==="icon-italic"&&this.quill.formatText(a,p,"italic",!g),t==="icon-strikethrough"&&this.quill.formatText(a,p,"strike",!h),t==="icon-zitixiahuaxian"&&this.quill.formatText(a,p,"underline",!m),t==="color"&&this.quill.formatText(a,p,"color",e)}insertEmbed(t,e,n){this.quill.insertEmbed(t||this.getCurrentCursor(),e,n)}getDetail(){return this.quill.getContents()}init(t){let e=t.replace(/[\r]/g,"#r#").replace(/[\n]/g,"#n#").replace(/[\t]/g,"#t#"),n=JSON.parse(e);n.forEach((a,p)=>{a.insert=al(a.insert.toString().replace(/#n#/g,`
`).replace(/#r#/g,"\r").replace(/#t#/g,"	"))}),this.quill.setContents(n)}}const Ee=()=>new Map,bi=i=>{const t=Ee();return i.forEach((e,n)=>{t.set(n,e)}),t},fe=(i,t,e)=>{let n=i.get(t);return n===void 0&&i.set(t,n=e()),n},ul=(i,t)=>{const e=[];for(const[n,a]of i)e.push(t(a,n));return e},cl=(i,t)=>{for(const[e,n]of i)if(t(n,e))return!0;return!1},yn=()=>new Set,ai=i=>i[i.length-1],fl=(i,t)=>{for(let e=0;e<t.length;e++)i.push(t[e])},sn=Array.from,hl=Array.isArray;class hr{constructor(){this._observers=Ee()}on(t,e){fe(this._observers,t,yn).add(e)}once(t,e){const n=(...a)=>{this.off(t,n),e(...a)};this.on(t,n)}off(t,e){const n=this._observers.get(t);n!==void 0&&(n.delete(e),n.size===0&&this._observers.delete(t))}emit(t,e){return sn((this._observers.get(t)||Ee()).values()).forEach(n=>n(...e))}destroy(){this._observers=Ee()}}const Pe=Math.floor,Mr=Math.abs,dl=Math.log10,Ii=(i,t)=>i<t?i:t,En=(i,t)=>i>t?i:t,Yo=i=>i!==0?i<0:1/i<0,pl=String.fromCharCode,gl=i=>i.toLowerCase(),yl=/^\s*/g,vl=i=>i.replace(yl,""),ml=/([A-Z])/g,po=(i,t)=>vl(i.replace(ml,e=>`${t}${gl(e)}`)),bl=i=>{const t=unescape(encodeURIComponent(i)),e=t.length,n=new Uint8Array(e);for(let a=0;a<e;a++)n[a]=t.codePointAt(a);return n},rr=typeof TextEncoder<"u"?new TextEncoder:null,_l=i=>rr.encode(i),_i=rr?_l:bl;let Qn=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Qn&&Qn.decode(new Uint8Array).length===1&&(Qn=null);const go=i=>i===void 0?null:i;class wl{constructor(){this.map=new Map}setItem(t,e){this.map.set(t,e)}getItem(t){return this.map.get(t)}}let Zo=new wl,ji=!0;try{typeof localStorage<"u"&&(Zo=localStorage,ji=!1)}catch{}const Jo=Zo,El=i=>ji||addEventListener("storage",i),Sl=i=>ji||removeEventListener("storage",i),Ol=Object.assign,kl=Object.keys,Al=(i,t)=>{for(const e in i)t(i[e],e)},Br=i=>kl(i).length,Tl=i=>{for(const t in i)return!1;return!0},Cl=(i,t)=>{for(const e in i)if(!t(i[e],e))return!1;return!0},Xo=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),xl=(i,t)=>i===t||Br(i)===Br(t)&&Cl(i,(e,n)=>(e!==void 0||Xo(t,n))&&t[n]===e),Pi=(i,t,e=0)=>{try{for(;e<i.length;e++)i[e](...t)}finally{e<i.length&&Pi(i,t,e+1)}},Rl=()=>{},Nl=i=>i,Ll=(i,t)=>i===t,tr=(i,t)=>{if(i==null||t==null)return Ll(i,t);if(i.constructor!==t.constructor)return!1;if(i===t)return!0;switch(i.constructor){case ArrayBuffer:i=new Uint8Array(i),t=new Uint8Array(t);case Uint8Array:{if(i.byteLength!==t.byteLength)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;break}case Set:{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;break}case Map:{if(i.size!==t.size)return!1;for(const e of i.keys())if(!t.has(e)||!tr(i.get(e),t.get(e)))return!1;break}case Object:if(Br(i)!==Br(t))return!1;for(const e in i)if(!Xo(i,e)||!tr(i[e],t[e]))return!1;break;case Array:if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(!tr(i[e],t[e]))return!1;break;default:return!1}return!0},Dl=(i,t)=>t.includes(i),Mn=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),Qo=typeof window<"u"&&typeof document<"u"&&!Mn;let Me;const Ml=()=>{if(Me===void 0)if(Mn){Me=Ee();const i=process.argv;let t=null;for(let e=0;e<i.length;e++){const n=i[e];n[0]==="-"?(t!==null&&Me.set(t,""),t=n):t!==null&&(Me.set(t,n),t=null)}t!==null&&Me.set(t,"")}else typeof location=="object"?(Me=Ee(),(location.search||"?").slice(1).split("&").forEach(i=>{if(i.length!==0){const[t,e]=i.split("=");Me.set(`--${po(t,"-")}`,e),Me.set(`-${po(t,"-")}`,e)}})):Me=Ee();return Me},wi=i=>Ml().has(i),Fr=i=>go(Mn?process.env[i.toUpperCase()]:Jo.getItem(i)),Il=i=>wi("--"+i)||Fr(i)!==null;Il("production");const yo=Mn&&Dl({}.FORCE_COLOR,["true","1","2"]),jl=!wi("no-colors")&&(!Mn||process.stdout.isTTY||yo)&&(!Mn||wi("color")||yo||Fr("COLORTERM")!==null||(Fr("TERM")||"").includes("color")),vo=1,mo=2,li=4,ui=8,ir=32,Ke=64,ae=128,Xr=31,Ei=63,dn=127,Pl=2147483647,ts=Number.MAX_SAFE_INTEGER,ql=Number.isInteger||(i=>typeof i=="number"&&isFinite(i)&&Pe(i)===i),Se=i=>new Error(i),Ie=()=>{throw Se("Method unimplemented")},Oe=()=>{throw Se("Unexpected case")},es=Se("Unexpected end of array"),ns=Se("Integer out of Range");class Qr{constructor(t){this.arr=t,this.pos=0}}const Fe=i=>new Qr(i),Bl=i=>i.pos!==i.arr.length,Fl=(i,t)=>{const e=Fi(i.arr.buffer,i.pos+i.arr.byteOffset,t);return i.pos+=t,e},Qt=i=>Fl(i,St(i)),vn=i=>i.arr[i.pos++],St=i=>{let t=0,e=1;const n=i.arr.length;for(;i.pos<n;){const a=i.arr[i.pos++];if(t=t+(a&dn)*e,e*=128,a<ae)return t;if(t>ts)throw ns}throw es},qi=i=>{let t=i.arr[i.pos++],e=t&Ei,n=64;const a=(t&Ke)>0?-1:1;if(!(t&ae))return a*e;const p=i.arr.length;for(;i.pos<p;){if(t=i.arr[i.pos++],e=e+(t&dn)*n,n*=128,t<ae)return a*e;if(e>ts)throw ns}throw es},Ul=i=>{let t=St(i);if(t===0)return"";{let e=String.fromCodePoint(vn(i));if(--t<100)for(;t--;)e+=String.fromCodePoint(vn(i));else for(;t>0;){const n=t<1e4?t:1e4,a=i.arr.subarray(i.pos,i.pos+n);i.pos+=n,e+=String.fromCodePoint.apply(null,a),t-=n}return decodeURIComponent(escape(e))}},Hl=i=>Qn.decode(Qt(i)),We=Qn?Hl:Ul,Bi=(i,t)=>{const e=new DataView(i.arr.buffer,i.arr.byteOffset+i.pos,t);return i.pos+=t,e},zl=i=>Bi(i,4).getFloat32(0,!1),Vl=i=>Bi(i,8).getFloat64(0,!1),$l=i=>Bi(i,8).getBigInt64(0,!1),Kl=[i=>{},i=>null,qi,zl,Vl,$l,i=>!1,i=>!0,We,i=>{const t=St(i),e={};for(let n=0;n<t;n++){const a=We(i);e[a]=In(i)}return e},i=>{const t=St(i),e=[];for(let n=0;n<t;n++)e.push(In(i));return e},Qt],In=i=>Kl[127-vn(i)](i);class bo extends Qr{constructor(t,e){super(t),this.reader=e,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Bl(this)?this.count=St(this)+1:this.count=-1),this.count--,this.s}}class Ir extends Qr{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=qi(this);const t=Yo(this.s);this.count=1,t&&(this.s=-this.s,this.count=St(this)+2)}return this.count--,this.s}}class ci extends Qr{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=qi(this),e=t&1;this.diff=Pe(t/2),this.count=1,e&&(this.count=St(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Wl{constructor(t){this.decoder=new Ir(t),this.str=We(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),e=this.str.slice(this.spos,t);return this.spos=t,e}}const rs=i=>new Uint8Array(i),Fi=(i,t,e)=>new Uint8Array(i,t,e),Gl=i=>new Uint8Array(i),Yl=i=>{let t="";for(let e=0;e<i.byteLength;e++)t+=pl(i[e]);return btoa(t)},Zl=i=>Buffer.from(i.buffer,i.byteOffset,i.byteLength).toString("base64"),Jl=i=>{const t=atob(i),e=rs(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e},Xl=i=>{const t=Buffer.from(i,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},is=Qo?Yl:Zl,os=Qo?Jl:Xl,Ql=i=>{const t=rs(i.byteLength);return t.set(i),t};class dr{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const te=()=>new dr,tu=i=>{let t=i.cpos;for(let e=0;e<i.bufs.length;e++)t+=i.bufs[e].length;return t},Ut=i=>{const t=new Uint8Array(tu(i));let e=0;for(let n=0;n<i.bufs.length;n++){const a=i.bufs[n];t.set(a,e),e+=a.length}return t.set(Fi(i.cbuf.buffer,0,i.cpos),e),t},eu=(i,t)=>{const e=i.cbuf.length;e-i.cpos<t&&(i.bufs.push(Fi(i.cbuf.buffer,0,i.cpos)),i.cbuf=new Uint8Array(En(e,t)*2),i.cpos=0)},Xt=(i,t)=>{const e=i.cbuf.length;i.cpos===e&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(e*2),i.cpos=0),i.cbuf[i.cpos++]=t},or=Xt,wt=(i,t)=>{for(;t>dn;)Xt(i,ae|dn&t),t=Pe(t/128);Xt(i,dn&t)},Ui=(i,t)=>{const e=Yo(t);for(e&&(t=-t),Xt(i,(t>Ei?ae:0)|(e?Ke:0)|Ei&t),t=Pe(t/64);t>0;)Xt(i,(t>dn?ae:0)|dn&t),t=Pe(t/128)},Si=new Uint8Array(3e4),nu=Si.length/3,ru=(i,t)=>{if(t.length<nu){const e=rr.encodeInto(t,Si).written||0;wt(i,e);for(let n=0;n<e;n++)Xt(i,Si[n])}else zt(i,_i(t))},iu=(i,t)=>{const e=unescape(encodeURIComponent(t)),n=e.length;wt(i,n);for(let a=0;a<n;a++)Xt(i,e.codePointAt(a))},je=rr&&rr.encodeInto?ru:iu,ti=(i,t)=>{const e=i.cbuf.length,n=i.cpos,a=Ii(e-n,t.length),p=t.length-a;i.cbuf.set(t.subarray(0,a),n),i.cpos+=a,p>0&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(En(e*2,p)),i.cbuf.set(t.subarray(a)),i.cpos=p)},zt=(i,t)=>{wt(i,t.byteLength),ti(i,t)},Hi=(i,t)=>{eu(i,t);const e=new DataView(i.cbuf.buffer,i.cpos,t);return i.cpos+=t,e},ou=(i,t)=>Hi(i,4).setFloat32(0,t,!1),su=(i,t)=>Hi(i,8).setFloat64(0,t,!1),au=(i,t)=>Hi(i,8).setBigInt64(0,t,!1),_o=new DataView(new ArrayBuffer(4)),lu=i=>(_o.setFloat32(0,i),_o.getFloat32(0)===i),jn=(i,t)=>{switch(typeof t){case"string":Xt(i,119),je(i,t);break;case"number":ql(t)&&Mr(t)<=Pl?(Xt(i,125),Ui(i,t)):lu(t)?(Xt(i,124),ou(i,t)):(Xt(i,123),su(i,t));break;case"bigint":Xt(i,122),au(i,t);break;case"object":if(t===null)Xt(i,126);else if(hl(t)){Xt(i,117),wt(i,t.length);for(let e=0;e<t.length;e++)jn(i,t[e])}else if(t instanceof Uint8Array)Xt(i,116),zt(i,t);else{Xt(i,118);const e=Object.keys(t);wt(i,e.length);for(let n=0;n<e.length;n++){const a=e[n];je(i,a),jn(i,t[a])}}break;case"boolean":Xt(i,t?120:121);break;default:Xt(i,127)}};class wo extends dr{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&wt(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const Eo=i=>{i.count>0&&(Ui(i.encoder,i.count===1?i.s:-i.s),i.count>1&&wt(i.encoder,i.count-2))};class jr{constructor(){this.encoder=new dr,this.s=0,this.count=0}write(t){this.s===t?this.count++:(Eo(this),this.count=1,this.s=t)}toUint8Array(){return Eo(this),Ut(this.encoder)}}const So=i=>{if(i.count>0){const t=i.diff*2+(i.count===1?0:1);Ui(i.encoder,t),i.count>1&&wt(i.encoder,i.count-2)}};class fi{constructor(){this.encoder=new dr,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(So(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return So(this),Ut(this.encoder)}}class uu{constructor(){this.sarr=[],this.s="",this.lensE=new jr}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new dr;return this.sarr.push(this.s),this.s="",je(t,this.sarr.join("")),ti(t,this.lensE.toUint8Array()),Ut(t)}}const cu=crypto.getRandomValues.bind(crypto),fu=Math.random,ss=()=>cu(new Uint32Array(1))[0],hu=[1e7]+-1e3+-4e3+-8e3+-1e11,as=()=>hu.replace(/[018]/g,i=>(i^ss()&15>>i/4).toString(16)),Ge=Date.now,Pn=i=>new Promise(i);Promise.all.bind(Promise);const du=i=>Promise.reject(i),zi=i=>Promise.resolve(i);class pu{constructor(t,e){this.left=t,this.right=e}}const $e=(i,t)=>new pu(i,t);typeof DOMParser<"u"&&new DOMParser;const gu=i=>ul(i,(t,e)=>`${e}:${t};`).join(""),Ye=Symbol,ce=Ye(),mn=Ye(),ls=Ye(),Vi=Ye(),us=Ye(),cs=Ye(),fs=Ye(),$i=Ye(),ei=Ye(),yu=i=>{const t=[];let e=0;for(;e<i.length;e++){const n=i[e];n.constructor===String||n.constructor===Number||n.constructor===Object&&t.push(JSON.stringify(n))}return t},Oo=[us,fs,$i,ls];let hi=0,ko=Ge();const vu=(i,t)=>{const e=Oo[hi],n=Fr("log"),a=n!==null&&(n==="*"||n==="true"||new RegExp(n,"gi").test(t));return hi=(hi+1)%Oo.length,t+=": ",a?(...p)=>{const w=Ge(),g=w-ko;ko=w,i(e,t,ei,...p.map(h=>typeof h=="string"||typeof h=="symbol"?h:JSON.stringify(h)),e," +"+g+"ms")}:Rl},mu={[ce]:$e("font-weight","bold"),[mn]:$e("font-weight","normal"),[ls]:$e("color","blue"),[us]:$e("color","green"),[Vi]:$e("color","grey"),[cs]:$e("color","red"),[fs]:$e("color","purple"),[$i]:$e("color","orange"),[ei]:$e("color","black")},bu=i=>{const t=[],e=[],n=Ee();let a=[],p=0;for(;p<i.length;p++){const w=i[p],g=mu[w];if(g!==void 0)n.set(g.left,g.right);else if(w.constructor===String||w.constructor===Number){const h=gu(n);p>0||h.length>0?(t.push("%c"+w),e.push(h)):t.push(w)}else break}for(p>0&&(a=e,a.unshift(t.join("")));p<i.length;p++){const w=i[p];w instanceof Symbol||a.push(w)}return a},_u=jl?bu:yu,hs=(...i)=>{console.log(..._u(i)),wu.forEach(t=>t.print(i))},wu=yn(),Eu=i=>vu(hs,i),ds=i=>({[Symbol.iterator](){return this},next:i}),Su=(i,t)=>ds(()=>{let e;do e=i.next();while(!e.done&&!t(e.value));return e}),di=(i,t)=>ds(()=>{const{done:e,value:n}=i.next();return{done:e,value:e?void 0:t(n)}});class Ki{constructor(t,e){this.clock=t,this.len=e}}class pr{constructor(){this.clients=new Map}}const ps=(i,t,e)=>t.clients.forEach((n,a)=>{const p=i.doc.store.clients.get(a);for(let w=0;w<n.length;w++){const g=n[w];Rs(i,p,g.clock,g.len,e)}}),Ou=(i,t)=>{let e=0,n=i.length-1;for(;e<=n;){const a=Pe((e+n)/2),p=i[a],w=p.clock;if(w<=t){if(t<w+p.len)return a;e=a+1}else n=a-1}return null},gs=(i,t)=>{const e=i.clients.get(t.client);return e!==void 0&&Ou(e,t.clock)!==null},Wi=i=>{i.clients.forEach(t=>{t.sort((a,p)=>a.clock-p.clock);let e,n;for(e=1,n=1;e<t.length;e++){const a=t[n-1],p=t[e];a.clock+a.len>=p.clock?a.len=En(a.len,p.clock+p.len-a.clock):(n<e&&(t[n]=p),n++)}t.length=n})},ku=i=>{const t=new pr;for(let e=0;e<i.length;e++)i[e].clients.forEach((n,a)=>{if(!t.clients.has(a)){const p=n.slice();for(let w=e+1;w<i.length;w++)fl(p,i[w].clients.get(a)||[]);t.clients.set(a,p)}});return Wi(t),t},Ur=(i,t,e,n)=>{fe(i.clients,t,()=>[]).push(new Ki(e,n))},Au=()=>new pr,Tu=i=>{const t=Au();return i.clients.forEach((e,n)=>{const a=[];for(let p=0;p<e.length;p++){const w=e[p];if(w.deleted){const g=w.id.clock;let h=w.length;if(p+1<e.length)for(let m=e[p+1];p+1<e.length&&m.deleted;m=e[++p+1])h+=m.length;a.push(new Ki(g,h))}}a.length>0&&t.clients.set(n,a)}),t},Hn=(i,t)=>{wt(i.restEncoder,t.clients.size),sn(t.clients.entries()).sort((e,n)=>n[0]-e[0]).forEach(([e,n])=>{i.resetDsCurVal(),wt(i.restEncoder,e);const a=n.length;wt(i.restEncoder,a);for(let p=0;p<a;p++){const w=n[p];i.writeDsClock(w.clock),i.writeDsLen(w.len)}})},Gi=i=>{const t=new pr,e=St(i.restDecoder);for(let n=0;n<e;n++){i.resetDsCurVal();const a=St(i.restDecoder),p=St(i.restDecoder);if(p>0){const w=fe(t.clients,a,()=>[]);for(let g=0;g<p;g++)w.push(new Ki(i.readDsClock(),i.readDsLen()))}}return t},Ao=(i,t,e)=>{const n=new pr,a=St(i.restDecoder);for(let p=0;p<a;p++){i.resetDsCurVal();const w=St(i.restDecoder),g=St(i.restDecoder),h=e.clients.get(w)||[],m=Gt(e,w);for(let _=0;_<g;_++){const o=i.readDsClock(),r=o+i.readDsLen();if(o<m){m<r&&Ur(n,w,m,r-m);let s=qe(h,o),c=h[s];for(!c.deleted&&c.id.clock<o&&(h.splice(s+1,0,Gr(t,c,o-c.id.clock)),s++);s<h.length&&(c=h[s++],c.id.clock<r);)c.deleted||(r<c.id.clock+c.length&&h.splice(s,0,Gr(t,c,r-c.id.clock)),c.delete(t))}else Ur(n,w,o,r-o)}}if(n.clients.size>0){const p=new bn;return wt(p.restEncoder,0),Hn(p,n),p.toUint8Array()}return null},ys=ss;class zn extends hr{constructor({guid:t=as(),collectionid:e=null,gc:n=!0,gcFilter:a=()=>!0,meta:p=null,autoLoad:w=!1,shouldLoad:g=!0}={}){super(),this.gc=n,this.gcFilter=a,this.clientID=ys(),this.guid=t,this.collectionid=e,this.share=new Map,this.store=new Cs,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=g,this.autoLoad=w,this.meta=p,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=Pn(m=>{this.on("load",()=>{this.isLoaded=!0,m(this)})});const h=()=>Pn(m=>{const _=o=>{(o===void 0||o===!0)&&(this.off("sync",_),m())};this.on("sync",_)});this.on("sync",m=>{m===!1&&this.isSynced&&(this.whenSynced=h()),this.isSynced=m===void 0||m===!0,this.isLoaded||this.emit("load",[])}),this.whenSynced=h()}load(){const t=this._item;t!==null&&!this.shouldLoad&&jt(t.parent.doc,e=>{e.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(sn(this.subdocs).map(t=>t.guid))}transact(t,e=null){return jt(this,t,e)}get(t,e=ee){const n=fe(this.share,t,()=>{const p=new e;return p._integrate(this,null),p}),a=n.constructor;if(e!==ee&&a!==e)if(a===ee){const p=new e;p._map=n._map,n._map.forEach(w=>{for(;w!==null;w=w.left)w.parent=p}),p._start=n._start;for(let w=p._start;w!==null;w=w.right)w.parent=p;return p._length=n._length,this.share.set(t,p),p._integrate(this,null),p}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return n}getArray(t=""){return this.get(t,Nn)}getText(t=""){return this.get(t,Fn)}getMap(t=""){return this.get(t,Bn)}getXmlFragment(t=""){return this.get(t,_n)}toJSON(){const t={};return this.share.forEach((e,n)=>{t[n]=e.toJSON()}),t}destroy(){sn(this.subdocs).forEach(e=>e.destroy());const t=this._item;if(t!==null){this._item=null;const e=t.content;e.doc=new zn({guid:this.guid,...e.opts,shouldLoad:!1}),e.doc._item=t,jt(t.parent.doc,n=>{const a=e.doc;t.deleted||n.subdocsAdded.add(a),n.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,e){super.on(t,e)}off(t,e){super.off(t,e)}}class vs{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return St(this.restDecoder)}readDsLen(){return St(this.restDecoder)}}class ms extends vs{readLeftID(){return Tt(St(this.restDecoder),St(this.restDecoder))}readRightID(){return Tt(St(this.restDecoder),St(this.restDecoder))}readClient(){return St(this.restDecoder)}readInfo(){return vn(this.restDecoder)}readString(){return We(this.restDecoder)}readParentInfo(){return St(this.restDecoder)===1}readTypeRef(){return St(this.restDecoder)}readLen(){return St(this.restDecoder)}readAny(){return In(this.restDecoder)}readBuf(){return Ql(Qt(this.restDecoder))}readJSON(){return JSON.parse(We(this.restDecoder))}readKey(){return We(this.restDecoder)}}class Cu{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=St(this.restDecoder),this.dsCurrVal}readDsLen(){const t=St(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class qn extends Cu{constructor(t){super(t),this.keys=[],St(t),this.keyClockDecoder=new ci(Qt(t)),this.clientDecoder=new Ir(Qt(t)),this.leftClockDecoder=new ci(Qt(t)),this.rightClockDecoder=new ci(Qt(t)),this.infoDecoder=new bo(Qt(t),vn),this.stringDecoder=new Wl(Qt(t)),this.parentInfoDecoder=new bo(Qt(t),vn),this.typeRefDecoder=new Ir(Qt(t)),this.lenDecoder=new Ir(Qt(t))}readLeftID(){return new Rn(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Rn(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return In(this.restDecoder)}readBuf(){return Qt(this.restDecoder)}readJSON(){return In(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const e=this.stringDecoder.read();return this.keys.push(e),e}}}class bs{constructor(){this.restEncoder=te()}toUint8Array(){return Ut(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){wt(this.restEncoder,t)}writeDsLen(t){wt(this.restEncoder,t)}}class gr extends bs{writeLeftID(t){wt(this.restEncoder,t.client),wt(this.restEncoder,t.clock)}writeRightID(t){wt(this.restEncoder,t.client),wt(this.restEncoder,t.clock)}writeClient(t){wt(this.restEncoder,t)}writeInfo(t){or(this.restEncoder,t)}writeString(t){je(this.restEncoder,t)}writeParentInfo(t){wt(this.restEncoder,t?1:0)}writeTypeRef(t){wt(this.restEncoder,t)}writeLen(t){wt(this.restEncoder,t)}writeAny(t){jn(this.restEncoder,t)}writeBuf(t){zt(this.restEncoder,t)}writeJSON(t){je(this.restEncoder,JSON.stringify(t))}writeKey(t){je(this.restEncoder,t)}}class _s{constructor(){this.restEncoder=te(),this.dsCurrVal=0}toUint8Array(){return Ut(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const e=t-this.dsCurrVal;this.dsCurrVal=t,wt(this.restEncoder,e)}writeDsLen(t){t===0&&Oe(),wt(this.restEncoder,t-1),this.dsCurrVal+=t}}class bn extends _s{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new fi,this.clientEncoder=new jr,this.leftClockEncoder=new fi,this.rightClockEncoder=new fi,this.infoEncoder=new wo(or),this.stringEncoder=new uu,this.parentInfoEncoder=new wo(or),this.typeRefEncoder=new jr,this.lenEncoder=new jr}toUint8Array(){const t=te();return wt(t,0),zt(t,this.keyClockEncoder.toUint8Array()),zt(t,this.clientEncoder.toUint8Array()),zt(t,this.leftClockEncoder.toUint8Array()),zt(t,this.rightClockEncoder.toUint8Array()),zt(t,Ut(this.infoEncoder)),zt(t,this.stringEncoder.toUint8Array()),zt(t,Ut(this.parentInfoEncoder)),zt(t,this.typeRefEncoder.toUint8Array()),zt(t,this.lenEncoder.toUint8Array()),ti(t,Ut(this.restEncoder)),Ut(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){jn(this.restEncoder,t)}writeBuf(t){zt(this.restEncoder,t)}writeJSON(t){jn(this.restEncoder,t)}writeKey(t){const e=this.keyMap.get(t);e===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(e)}}const xu=(i,t,e,n)=>{n=En(n,t[0].id.clock);const a=qe(t,n);wt(i.restEncoder,t.length-a),i.writeClient(e),wt(i.restEncoder,n);const p=t[a];p.write(i,n-p.id.clock);for(let w=a+1;w<t.length;w++)t[w].write(i,0)},Yi=(i,t,e)=>{const n=new Map;e.forEach((a,p)=>{Gt(t,p)>a&&n.set(p,a)}),ni(t).forEach((a,p)=>{e.has(p)||n.set(p,0)}),wt(i.restEncoder,n.size),sn(n.entries()).sort((a,p)=>p[0]-a[0]).forEach(([a,p])=>{xu(i,t.clients.get(a),a,p)})},Ru=(i,t)=>{const e=Ee(),n=St(i.restDecoder);for(let a=0;a<n;a++){const p=St(i.restDecoder),w=new Array(p),g=i.readClient();let h=St(i.restDecoder);e.set(g,{i:0,refs:w});for(let m=0;m<p;m++){const _=i.readInfo();switch(Xr&_){case 0:{const o=i.readLen();w[m]=new le(Tt(g,h),o),h+=o;break}case 10:{const o=St(i.restDecoder);w[m]=new ue(Tt(g,h),o),h+=o;break}default:{const o=(_&(Ke|ae))===0,r=new Vt(Tt(g,h),null,(_&ae)===ae?i.readLeftID():null,null,(_&Ke)===Ke?i.readRightID():null,o?i.readParentInfo()?t.get(i.readString()):i.readLeftID():null,o&&(_&ir)===ir?i.readString():null,Ys(i,_));w[m]=r,h+=r.length}}}}return e},Nu=(i,t,e)=>{const n=[];let a=sn(e.keys()).sort((s,c)=>s-c);if(a.length===0)return null;const p=()=>{if(a.length===0)return null;let s=e.get(a[a.length-1]);for(;s.refs.length===s.i;)if(a.pop(),a.length>0)s=e.get(a[a.length-1]);else return null;return s};let w=p();if(w===null&&n.length===0)return null;const g=new Cs,h=new Map,m=(s,c)=>{const d=h.get(s);(d==null||d>c)&&h.set(s,c)};let _=w.refs[w.i++];const o=new Map,r=()=>{for(const s of n){const c=s.id.client,d=e.get(c);d?(d.i--,g.clients.set(c,d.refs.slice(d.i)),e.delete(c),d.i=0,d.refs=[]):g.clients.set(c,[s]),a=a.filter(E=>E!==c)}n.length=0};for(;;){if(_.constructor!==ue){const c=fe(o,_.id.client,()=>Gt(t,_.id.client))-_.id.clock;if(c<0)n.push(_),m(_.id.client,_.id.clock-1),r();else{const d=_.getMissing(i,t);if(d!==null){n.push(_);const E=e.get(d)||{refs:[],i:0};if(E.refs.length===E.i)m(d,Gt(t,d)),r();else{_=E.refs[E.i++];continue}}else(c===0||c<_.length)&&(_.integrate(i,c),o.set(_.id.client,_.id.clock+_.length))}}if(n.length>0)_=n.pop();else if(w!==null&&w.i<w.refs.length)_=w.refs[w.i++];else{if(w=p(),w===null)break;_=w.refs[w.i++]}}if(g.clients.size>0){const s=new bn;return Yi(s,g,new Map),wt(s.restEncoder,0),{missing:h,update:s.toUint8Array()}}return null},Lu=(i,t)=>Yi(i,t.doc.store,t.beforeState),Du=(i,t,e,n=new qn(i))=>jt(t,a=>{a.local=!1;let p=!1;const w=a.doc,g=w.store,h=Ru(n,w),m=Nu(a,g,h),_=g.pendingStructs;if(_){for(const[r,s]of _.missing)if(s<Gt(g,r)){p=!0;break}if(m){for(const[r,s]of m.missing){const c=_.missing.get(r);(c==null||c>s)&&_.missing.set(r,s)}_.update=Hr([_.update,m.update])}}else g.pendingStructs=m;const o=Ao(n,a,g);if(g.pendingDs){const r=new qn(Fe(g.pendingDs));St(r.restDecoder);const s=Ao(r,a,g);o&&s?g.pendingDs=Hr([o,s]):g.pendingDs=o||s}else g.pendingDs=o;if(p){const r=g.pendingStructs.update;g.pendingStructs=null,ws(a.doc,r)}},e,!1),ws=(i,t,e,n=qn)=>{const a=Fe(t);Du(a,i,e,new n(a))},Es=(i,t,e)=>ws(i,t,e,ms),Mu=(i,t,e=new Map)=>{Yi(i,t.store,e),Hn(i,Tu(t.store))},Iu=(i,t=new Uint8Array([0]),e=new bn)=>{const n=Ss(t);Mu(e,i,n);const a=[e.toUint8Array()];if(i.store.pendingDs&&a.push(i.store.pendingDs),i.store.pendingStructs&&a.push(Ju(i.store.pendingStructs.update,t)),a.length>1){if(e.constructor===gr)return Yu(a.map((p,w)=>w===0?p:Qu(p)));if(e.constructor===bn)return Hr(a)}return a[0]},Zi=(i,t)=>Iu(i,t,new gr),ju=i=>{const t=new Map,e=St(i.restDecoder);for(let n=0;n<e;n++){const a=St(i.restDecoder),p=St(i.restDecoder);t.set(a,p)}return t},Ss=i=>ju(new vs(Fe(i))),Os=(i,t)=>(wt(i.restEncoder,t.size),sn(t.entries()).sort((e,n)=>n[0]-e[0]).forEach(([e,n])=>{wt(i.restEncoder,e),wt(i.restEncoder,n)}),i),Pu=(i,t)=>Os(i,ni(t.store)),qu=(i,t=new _s)=>(i instanceof Map?Os(t,i):Pu(t,i),t.toUint8Array()),Bu=i=>qu(i,new bs);class Fu{constructor(){this.l=[]}}const To=()=>new Fu,Co=(i,t)=>i.l.push(t),xo=(i,t)=>{const e=i.l,n=e.length;i.l=e.filter(a=>t!==a),n===i.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},ks=(i,t,e)=>Pi(i.l,[t,e]);class Rn{constructor(t,e){this.client=t,this.clock=e}}const xn=(i,t)=>i===t||i!==null&&t!==null&&i.client===t.client&&i.clock===t.clock,Tt=(i,t)=>new Rn(i,t),As=i=>{for(const[t,e]of i.doc.share.entries())if(e===i)return t;throw Oe()};class Ts{constructor(t,e,n,a=0){this.type=t,this.tname=e,this.item=n,this.assoc=a}}const Ro=i=>new Ts(i.type==null?null:Tt(i.type.client,i.type.clock),i.tname||null,i.item==null?null:Tt(i.item.client,i.item.clock),i.assoc==null?0:i.assoc);class Uu{constructor(t,e,n=0){this.type=t,this.index=e,this.assoc=n}}const Hu=(i,t,e=0)=>new Uu(i,t,e),Cr=(i,t,e)=>{let n=null,a=null;return i._item===null?a=As(i):n=Tt(i._item.id.client,i._item.id.clock),new Ts(n,a,t,e)},No=(i,t,e=0)=>{let n=i._start;if(e<0){if(t===0)return Cr(i,null,e);t--}for(;n!==null;){if(!n.deleted&&n.countable){if(n.length>t)return Cr(i,Tt(n.id.client,n.id.clock+t),e);t-=n.length}if(n.right===null&&e<0)return Cr(i,n.lastId,e);n=n.right}return Cr(i,null,e)},Lo=(i,t)=>{const e=t.store,n=i.item,a=i.type,p=i.tname,w=i.assoc;let g=null,h=0;if(n!==null){if(Gt(e,n.client)<=n.clock)return null;const m=Uo(e,n),_=m.item;if(!(_ instanceof Vt))return null;if(g=_.parent,g._item===null||!g._item.deleted){h=_.deleted||!_.countable?0:m.diff+(w>=0?0:1);let o=_.left;for(;o!==null;)!o.deleted&&o.countable&&(h+=o.length),o=o.left}}else{if(p!==null)g=t.get(p);else if(a!==null){if(Gt(e,a.client)<=a.clock)return null;const{item:m}=Uo(e,a);if(m instanceof Vt&&m.content instanceof Ue)g=m.content.type;else return null}else throw Oe();w>=0?h=g._length:h=0}return Hu(g,h,i.assoc)},Do=(i,t)=>i===t||i!==null&&t!==null&&i.tname===t.tname&&xn(i.item,t.item)&&xn(i.type,t.type)&&i.assoc===t.assoc,Zn=(i,t)=>t===void 0?!i.deleted:t.sv.has(i.id.client)&&(t.sv.get(i.id.client)||0)>i.id.clock&&!gs(t.ds,i.id),Oi=(i,t)=>{const e=fe(i.meta,Oi,yn),n=i.doc.store;e.has(t)||(t.sv.forEach((a,p)=>{a<Gt(n,p)&&an(i,Tt(p,a))}),ps(i,t.ds,a=>{}),e.add(t))};class Cs{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const ni=i=>{const t=new Map;return i.clients.forEach((e,n)=>{const a=e[e.length-1];t.set(n,a.id.clock+a.length)}),t},Gt=(i,t)=>{const e=i.clients.get(t);if(e===void 0)return 0;const n=e[e.length-1];return n.id.clock+n.length},xs=(i,t)=>{let e=i.clients.get(t.id.client);if(e===void 0)e=[],i.clients.set(t.id.client,e);else{const n=e[e.length-1];if(n.id.clock+n.length!==t.id.clock)throw Oe()}e.push(t)},qe=(i,t)=>{let e=0,n=i.length-1,a=i[n],p=a.id.clock;if(p===t)return n;let w=Pe(t/(p+a.length-1)*n);for(;e<=n;){if(a=i[w],p=a.id.clock,p<=t){if(t<p+a.length)return w;e=w+1}else n=w-1;w=Pe((e+n)/2)}throw Oe()},zu=(i,t)=>{const e=i.clients.get(t.client);return e[qe(e,t.clock)]},Pr=zu,ki=(i,t,e)=>{const n=qe(t,e),a=t[n];return a.id.clock<e&&a instanceof Vt?(t.splice(n+1,0,Gr(i,a,e-a.id.clock)),n+1):n},an=(i,t)=>{const e=i.doc.store.clients.get(t.client);return e[ki(i,e,t.clock)]},Mo=(i,t,e)=>{const n=t.clients.get(e.client),a=qe(n,e.clock),p=n[a];return e.clock!==p.id.clock+p.length-1&&p.constructor!==le&&n.splice(a+1,0,Gr(i,p,e.clock-p.id.clock+1)),p},Vu=(i,t,e)=>{const n=i.clients.get(t.id.client);n[qe(n,t.id.clock)]=e},Rs=(i,t,e,n,a)=>{if(n===0)return;const p=e+n;let w=ki(i,t,e),g;do g=t[w++],p<g.id.clock+g.length&&ki(i,t,p),a(g);while(w<t.length&&t[w].id.clock<p)};class $u{constructor(t,e,n){this.doc=t,this.deleteSet=new pr,this.beforeState=ni(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=e,this.meta=new Map,this.local=n,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Io=(i,t)=>t.deleteSet.clients.size===0&&!cl(t.afterState,(e,n)=>t.beforeState.get(n)!==e)?!1:(Wi(t.deleteSet),Lu(i,t),Hn(i,t.deleteSet),!0),jo=(i,t,e)=>{const n=t._item;(n===null||n.id.clock<(i.beforeState.get(n.id.client)||0)&&!n.deleted)&&fe(i.changed,t,yn).add(e)},qr=(i,t)=>{let e=i[t],n=i[t-1],a=t;for(;a>0;e=n,n=i[--a-1]){if(n.deleted===e.deleted&&n.constructor===e.constructor&&n.mergeWith(e)){e instanceof Vt&&e.parentSub!==null&&e.parent._map.get(e.parentSub)===e&&e.parent._map.set(e.parentSub,n);continue}break}const p=t-a;return p&&i.splice(t+1-p,p),p},Ku=(i,t,e)=>{for(const[n,a]of i.clients.entries()){const p=t.clients.get(n);for(let w=a.length-1;w>=0;w--){const g=a[w],h=g.clock+g.len;for(let m=qe(p,g.clock),_=p[m];m<p.length&&_.id.clock<h;_=p[++m]){const o=p[m];if(g.clock+g.len<=o.id.clock)break;o instanceof Vt&&o.deleted&&!o.keep&&e(o)&&o.gc(t,!1)}}}},Wu=(i,t)=>{i.clients.forEach((e,n)=>{const a=t.clients.get(n);for(let p=e.length-1;p>=0;p--){const w=e[p],g=Ii(a.length-1,1+qe(a,w.clock+w.len-1));for(let h=g,m=a[h];h>0&&m.id.clock>=w.clock;m=a[h])h-=1+qr(a,h)}})},Ns=(i,t)=>{if(t<i.length){const e=i[t],n=e.doc,a=n.store,p=e.deleteSet,w=e._mergeStructs;try{Wi(p),e.afterState=ni(e.doc.store),n.emit("beforeObserverCalls",[e,n]);const g=[];e.changed.forEach((h,m)=>g.push(()=>{(m._item===null||!m._item.deleted)&&m._callObserver(e,h)})),g.push(()=>{e.changedParentTypes.forEach((h,m)=>{m._dEH.l.length>0&&(m._item===null||!m._item.deleted)&&(h=h.filter(_=>_.target._item===null||!_.target._item.deleted),h.forEach(_=>{_.currentTarget=m,_._path=null}),h.sort((_,o)=>_.path.length-o.path.length),ks(m._dEH,h,e))})}),g.push(()=>n.emit("afterTransaction",[e,n])),Pi(g,[]),e._needFormattingCleanup&&hc(e)}finally{n.gc&&Ku(p,a,n.gcFilter),Wu(p,a),e.afterState.forEach((_,o)=>{const r=e.beforeState.get(o)||0;if(r!==_){const s=a.clients.get(o),c=En(qe(s,r),1);for(let d=s.length-1;d>=c;)d-=1+qr(s,d)}});for(let _=w.length-1;_>=0;_--){const{client:o,clock:r}=w[_].id,s=a.clients.get(o),c=qe(s,r);c+1<s.length&&qr(s,c+1)>1||c>0&&qr(s,c)}if(!e.local&&e.afterState.get(n.clientID)!==e.beforeState.get(n.clientID)&&(hs($i,ce,"[yjs] ",mn,cs,"Changed the client-id because another client seems to be using it."),n.clientID=ys()),n.emit("afterTransactionCleanup",[e,n]),n._observers.has("update")){const _=new gr;Io(_,e)&&n.emit("update",[_.toUint8Array(),e.origin,n,e])}if(n._observers.has("updateV2")){const _=new bn;Io(_,e)&&n.emit("updateV2",[_.toUint8Array(),e.origin,n,e])}const{subdocsAdded:g,subdocsLoaded:h,subdocsRemoved:m}=e;(g.size>0||m.size>0||h.size>0)&&(g.forEach(_=>{_.clientID=n.clientID,_.collectionid==null&&(_.collectionid=n.collectionid),n.subdocs.add(_)}),m.forEach(_=>n.subdocs.delete(_)),n.emit("subdocs",[{loaded:h,added:g,removed:m},n,e]),m.forEach(_=>_.destroy())),i.length<=t+1?(n._transactionCleanups=[],n.emit("afterAllTransactions",[n,i])):Ns(i,t+1)}}},jt=(i,t,e=null,n=!0)=>{const a=i._transactionCleanups;let p=!1,w=null;i._transaction===null&&(p=!0,i._transaction=new $u(i,e,n),a.push(i._transaction),a.length===1&&i.emit("beforeAllTransactions",[i]),i.emit("beforeTransaction",[i._transaction,i]));try{w=t(i._transaction)}finally{if(p){const g=i._transaction===a[0];i._transaction=null,g&&Ns(a,0)}}return w};function*Gu(i){const t=St(i.restDecoder);for(let e=0;e<t;e++){const n=St(i.restDecoder),a=i.readClient();let p=St(i.restDecoder);for(let w=0;w<n;w++){const g=i.readInfo();if(g===10){const h=St(i.restDecoder);yield new ue(Tt(a,p),h),p+=h}else if(Xr&g){const h=(g&(Ke|ae))===0,m=new Vt(Tt(a,p),null,(g&ae)===ae?i.readLeftID():null,null,(g&Ke)===Ke?i.readRightID():null,h?i.readParentInfo()?i.readString():i.readLeftID():null,h&&(g&ir)===ir?i.readString():null,Ys(i,g));yield m,p+=m.length}else{const h=i.readLen();yield new le(Tt(a,p),h),p+=h}}}}class Ji{constructor(t,e){this.gen=Gu(t),this.curr=null,this.done=!1,this.filterSkips=e,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===ue);return this.curr}}class Xi{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Yu=i=>Hr(i,ms,gr),Zu=(i,t)=>{if(i.constructor===le){const{client:e,clock:n}=i.id;return new le(Tt(e,n+t),i.length-t)}else if(i.constructor===ue){const{client:e,clock:n}=i.id;return new ue(Tt(e,n+t),i.length-t)}else{const e=i,{client:n,clock:a}=e.id;return new Vt(Tt(n,a+t),null,Tt(n,a+t-1),null,e.rightOrigin,e.parent,e.parentSub,e.content.splice(t))}},Hr=(i,t=qn,e=bn)=>{if(i.length===1)return i[0];const n=i.map(_=>new t(Fe(_)));let a=n.map(_=>new Ji(_,!0)),p=null;const w=new e,g=new Xi(w);for(;a=a.filter(r=>r.curr!==null),a.sort((r,s)=>{if(r.curr.id.client===s.curr.id.client){const c=r.curr.id.clock-s.curr.id.clock;return c===0?r.curr.constructor===s.curr.constructor?0:r.curr.constructor===ue?1:-1:c}else return s.curr.id.client-r.curr.id.client}),a.length!==0;){const _=a[0],o=_.curr.id.client;if(p!==null){let r=_.curr,s=!1;for(;r!==null&&r.id.clock+r.length<=p.struct.id.clock+p.struct.length&&r.id.client>=p.struct.id.client;)r=_.next(),s=!0;if(r===null||r.id.client!==o||s&&r.id.clock>p.struct.id.clock+p.struct.length)continue;if(o!==p.struct.id.client)nn(g,p.struct,p.offset),p={struct:r,offset:0},_.next();else if(p.struct.id.clock+p.struct.length<r.id.clock)if(p.struct.constructor===ue)p.struct.length=r.id.clock+r.length-p.struct.id.clock;else{nn(g,p.struct,p.offset);const c=r.id.clock-p.struct.id.clock-p.struct.length;p={struct:new ue(Tt(o,p.struct.id.clock+p.struct.length),c),offset:0}}else{const c=p.struct.id.clock+p.struct.length-r.id.clock;c>0&&(p.struct.constructor===ue?p.struct.length-=c:r=Zu(r,c)),p.struct.mergeWith(r)||(nn(g,p.struct,p.offset),p={struct:r,offset:0},_.next())}}else p={struct:_.curr,offset:0},_.next();for(let r=_.curr;r!==null&&r.id.client===o&&r.id.clock===p.struct.id.clock+p.struct.length&&r.constructor!==ue;r=_.next())nn(g,p.struct,p.offset),p={struct:r,offset:0}}p!==null&&(nn(g,p.struct,p.offset),p=null),Qi(g);const h=n.map(_=>Gi(_)),m=ku(h);return Hn(w,m),w.toUint8Array()},Ju=(i,t,e=qn,n=bn)=>{const a=Ss(t),p=new n,w=new Xi(p),g=new e(Fe(i)),h=new Ji(g,!1);for(;h.curr;){const _=h.curr,o=_.id.client,r=a.get(o)||0;if(h.curr.constructor===ue){h.next();continue}if(_.id.clock+_.length>r)for(nn(w,_,En(r-_.id.clock,0)),h.next();h.curr&&h.curr.id.client===o;)nn(w,h.curr,0),h.next();else for(;h.curr&&h.curr.id.client===o&&h.curr.id.clock+h.curr.length<=r;)h.next()}Qi(w);const m=Gi(g);return Hn(p,m),p.toUint8Array()},Ls=i=>{i.written>0&&(i.clientStructs.push({written:i.written,restEncoder:Ut(i.encoder.restEncoder)}),i.encoder.restEncoder=te(),i.written=0)},nn=(i,t,e)=>{i.written>0&&i.currClient!==t.id.client&&Ls(i),i.written===0&&(i.currClient=t.id.client,i.encoder.writeClient(t.id.client),wt(i.encoder.restEncoder,t.id.clock+e)),t.write(i.encoder,e),i.written++},Qi=i=>{Ls(i);const t=i.encoder.restEncoder;wt(t,i.clientStructs.length);for(let e=0;e<i.clientStructs.length;e++){const n=i.clientStructs[e];wt(t,n.written),ti(t,n.restEncoder)}},Xu=(i,t,e,n)=>{const a=new e(Fe(i)),p=new Ji(a,!1),w=new n,g=new Xi(w);for(let m=p.curr;m!==null;m=p.next())nn(g,t(m),0);Qi(g);const h=Gi(a);return Hn(w,h),w.toUint8Array()},Qu=i=>Xu(i,Nl,qn,gr),Po="You must not compute changes after the event-handler fired.";class ri{constructor(t,e){this.target=t,this.currentTarget=t,this.transaction=e,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=tc(this.currentTarget,this.target))}deletes(t){return gs(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Se(Po);const t=new Map,e=this.target;this.transaction.changed.get(e).forEach(a=>{if(a!==null){const p=e._map.get(a);let w,g;if(this.adds(p)){let h=p.left;for(;h!==null&&this.adds(h);)h=h.left;if(this.deletes(p))if(h!==null&&this.deletes(h))w="delete",g=ai(h.content.getContent());else return;else h!==null&&this.deletes(h)?(w="update",g=ai(h.content.getContent())):(w="add",g=void 0)}else if(this.deletes(p))w="delete",g=ai(p.content.getContent());else return;t.set(a,{action:w,oldValue:g})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw Se(Po);const e=this.target,n=yn(),a=yn(),p=[];if(t={added:n,deleted:a,delta:p,keys:this.keys},this.transaction.changed.get(e).has(null)){let g=null;const h=()=>{g&&p.push(g)};for(let m=e._start;m!==null;m=m.right)m.deleted?this.deletes(m)&&!this.adds(m)&&((g===null||g.delete===void 0)&&(h(),g={delete:0}),g.delete+=m.length,a.add(m)):this.adds(m)?((g===null||g.insert===void 0)&&(h(),g={insert:[]}),g.insert=g.insert.concat(m.content.getContent()),n.add(m)):((g===null||g.retain===void 0)&&(h(),g={retain:0}),g.retain+=m.length);g!==null&&g.retain===void 0&&h()}this._changes=t}return t}}const tc=(i,t)=>{const e=[];for(;t._item!==null&&t!==i;){if(t._item.parentSub!==null)e.unshift(t._item.parentSub);else{let n=0,a=t._item.parent._start;for(;a!==t._item&&a!==null;)a.deleted||n++,a=a.right;e.unshift(n)}t=t._item.parent}return e},Ds=80;let to=0;class ec{constructor(t,e){t.marker=!0,this.p=t,this.index=e,this.timestamp=to++}}const nc=i=>{i.timestamp=to++},Ms=(i,t,e)=>{i.p.marker=!1,i.p=t,t.marker=!0,i.index=e,i.timestamp=to++},rc=(i,t,e)=>{if(i.length>=Ds){const n=i.reduce((a,p)=>a.timestamp<p.timestamp?a:p);return Ms(n,t,e),n}else{const n=new ec(t,e);return i.push(n),n}},ii=(i,t)=>{if(i._start===null||t===0||i._searchMarker===null)return null;const e=i._searchMarker.length===0?null:i._searchMarker.reduce((p,w)=>Mr(t-p.index)<Mr(t-w.index)?p:w);let n=i._start,a=0;for(e!==null&&(n=e.p,a=e.index,nc(e));n.right!==null&&a<t;){if(!n.deleted&&n.countable){if(t<a+n.length)break;a+=n.length}n=n.right}for(;n.left!==null&&a>t;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);for(;n.left!==null&&n.left.id.client===n.id.client&&n.left.id.clock+n.left.length===n.id.clock;)n=n.left,!n.deleted&&n.countable&&(a-=n.length);return e!==null&&Mr(e.index-a)<n.parent.length/Ds?(Ms(e,n,a),e):rc(i._searchMarker,n,a)},sr=(i,t,e)=>{for(let n=i.length-1;n>=0;n--){const a=i[n];if(e>0){let p=a.p;for(p.marker=!1;p&&(p.deleted||!p.countable);)p=p.left,p&&!p.deleted&&p.countable&&(a.index-=p.length);if(p===null||p.marker===!0){i.splice(n,1);continue}a.p=p,p.marker=!0}(t<a.index||e>0&&t===a.index)&&(a.index=En(t,a.index+e))}},oi=(i,t,e)=>{const n=i,a=t.changedParentTypes;for(;fe(a,i,()=>[]).push(e),i._item!==null;)i=i._item.parent;ks(n._eH,e,t)};class ee{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=To(),this._dEH=To(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,e){this.doc=t,this._item=e}_copy(){throw Ie()}clone(){throw Ie()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,e){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Co(this._eH,t)}observeDeep(t){Co(this._dEH,t)}unobserve(t){xo(this._eH,t)}unobserveDeep(t){xo(this._dEH,t)}toJSON(){}}const Is=(i,t,e)=>{t<0&&(t=i._length+t),e<0&&(e=i._length+e);let n=e-t;const a=[];let p=i._start;for(;p!==null&&n>0;){if(p.countable&&!p.deleted){const w=p.content.getContent();if(w.length<=t)t-=w.length;else{for(let g=t;g<w.length&&n>0;g++)a.push(w[g]),n--;t=0}}p=p.right}return a},js=i=>{const t=[];let e=i._start;for(;e!==null;){if(e.countable&&!e.deleted){const n=e.content.getContent();for(let a=0;a<n.length;a++)t.push(n[a])}e=e.right}return t},ar=(i,t)=>{let e=0,n=i._start;for(;n!==null;){if(n.countable&&!n.deleted){const a=n.content.getContent();for(let p=0;p<a.length;p++)t(a[p],e++,i)}n=n.right}},Ps=(i,t)=>{const e=[];return ar(i,(n,a)=>{e.push(t(n,a,i))}),e},ic=i=>{let t=i._start,e=null,n=0;return{[Symbol.iterator](){return this},next:()=>{if(e===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};e=t.content.getContent(),n=0,t=t.right}const a=e[n++];return e.length<=n&&(e=null),{done:!1,value:a}}}},qs=(i,t)=>{const e=ii(i,t);let n=i._start;for(e!==null&&(n=e.p,t-=e.index);n!==null;n=n.right)if(!n.deleted&&n.countable){if(t<n.length)return n.content.getContent()[t];t-=n.length}},zr=(i,t,e,n)=>{let a=e;const p=i.doc,w=p.clientID,g=p.store,h=e===null?t._start:e.right;let m=[];const _=()=>{m.length>0&&(a=new Vt(Tt(w,Gt(g,w)),a,a&&a.lastId,h,h&&h.id,t,null,new wn(m)),a.integrate(i,0),m=[])};n.forEach(o=>{if(o===null)m.push(o);else switch(o.constructor){case Number:case Object:case Boolean:case Array:case String:m.push(o);break;default:switch(_(),o.constructor){case Uint8Array:case ArrayBuffer:a=new Vt(Tt(w,Gt(g,w)),a,a&&a.lastId,h,h&&h.id,t,null,new yr(new Uint8Array(o))),a.integrate(i,0);break;case zn:a=new Vt(Tt(w,Gt(g,w)),a,a&&a.lastId,h,h&&h.id,t,null,new vr(o)),a.integrate(i,0);break;default:if(o instanceof ee)a=new Vt(Tt(w,Gt(g,w)),a,a&&a.lastId,h,h&&h.id,t,null,new Ue(o)),a.integrate(i,0);else throw new Error("Unexpected content type in insert operation")}}}),_()},Bs=Se("Length exceeded!"),Fs=(i,t,e,n)=>{if(e>t._length)throw Bs;if(e===0)return t._searchMarker&&sr(t._searchMarker,e,n.length),zr(i,t,null,n);const a=e,p=ii(t,e);let w=t._start;for(p!==null&&(w=p.p,e-=p.index,e===0&&(w=w.prev,e+=w&&w.countable&&!w.deleted?w.length:0));w!==null;w=w.right)if(!w.deleted&&w.countable){if(e<=w.length){e<w.length&&an(i,Tt(w.id.client,w.id.clock+e));break}e-=w.length}return t._searchMarker&&sr(t._searchMarker,a,n.length),zr(i,t,w,n)},oc=(i,t,e)=>{let a=(t._searchMarker||[]).reduce((p,w)=>w.index>p.index?w:p,{index:0,p:t._start}).p;if(a)for(;a.right;)a=a.right;return zr(i,t,a,e)},Us=(i,t,e,n)=>{if(n===0)return;const a=e,p=n,w=ii(t,e);let g=t._start;for(w!==null&&(g=w.p,e-=w.index);g!==null&&e>0;g=g.right)!g.deleted&&g.countable&&(e<g.length&&an(i,Tt(g.id.client,g.id.clock+e)),e-=g.length);for(;n>0&&g!==null;)g.deleted||(n<g.length&&an(i,Tt(g.id.client,g.id.clock+n)),g.delete(i),n-=g.length),g=g.right;if(n>0)throw Bs;t._searchMarker&&sr(t._searchMarker,a,-p+n)},Vr=(i,t,e)=>{const n=t._map.get(e);n!==void 0&&n.delete(i)},eo=(i,t,e,n)=>{const a=t._map.get(e)||null,p=i.doc,w=p.clientID;let g;if(n==null)g=new wn([n]);else switch(n.constructor){case Number:case Object:case Boolean:case Array:case String:g=new wn([n]);break;case Uint8Array:g=new yr(n);break;case zn:g=new vr(n);break;default:if(n instanceof ee)g=new Ue(n);else throw new Error("Unexpected content type")}new Vt(Tt(w,Gt(p.store,w)),a,a&&a.lastId,null,null,t,e,g).integrate(i,0)},no=(i,t)=>{const e=i._map.get(t);return e!==void 0&&!e.deleted?e.content.getContent()[e.length-1]:void 0},Hs=i=>{const t={};return i._map.forEach((e,n)=>{e.deleted||(t[n]=e.content.getContent()[e.length-1])}),t},zs=(i,t)=>{const e=i._map.get(t);return e!==void 0&&!e.deleted},xr=i=>Su(i.entries(),t=>!t[1].deleted);class sc extends ri{constructor(t,e){super(t,e),this._transaction=e}}class Nn extends ee{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const e=new Nn;return e.push(t),e}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Nn}clone(){const t=new Nn;return t.insert(0,this.toArray().map(e=>e instanceof ee?e.clone():e)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,e){super._callObserver(t,e),oi(this,t,new sc(this,t))}insert(t,e){this.doc!==null?jt(this.doc,n=>{Fs(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}push(t){this.doc!==null?jt(this.doc,e=>{oc(e,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,e=1){this.doc!==null?jt(this.doc,n=>{Us(n,this,t,e)}):this._prelimContent.splice(t,e)}get(t){return qs(this,t)}toArray(){return js(this)}slice(t=0,e=this.length){return Is(this,t,e)}toJSON(){return this.map(t=>t instanceof ee?t.toJSON():t)}map(t){return Ps(this,t)}forEach(t){ar(this,t)}[Symbol.iterator](){return ic(this)}_write(t){t.writeTypeRef(Rc)}}const ac=i=>new Nn;class lc extends ri{constructor(t,e,n){super(t,e),this.keysChanged=n}}class Bn extends ee{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,e){super._integrate(t,e),this._prelimContent.forEach((n,a)=>{this.set(a,n)}),this._prelimContent=null}_copy(){return new Bn}clone(){const t=new Bn;return this.forEach((e,n)=>{t.set(n,e instanceof ee?e.clone():e)}),t}_callObserver(t,e){oi(this,t,new lc(this,t,e))}toJSON(){const t={};return this._map.forEach((e,n)=>{if(!e.deleted){const a=e.content.getContent()[e.length-1];t[n]=a instanceof ee?a.toJSON():a}}),t}get size(){return[...xr(this._map)].length}keys(){return di(xr(this._map),t=>t[0])}values(){return di(xr(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return di(xr(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((e,n)=>{e.deleted||t(e.content.getContent()[e.length-1],n,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?jt(this.doc,e=>{Vr(e,this,t)}):this._prelimContent.delete(t)}set(t,e){return this.doc!==null?jt(this.doc,n=>{eo(n,this,t,e)}):this._prelimContent.set(t,e),e}get(t){return no(this,t)}has(t){return zs(this,t)}clear(){this.doc!==null?jt(this.doc,t=>{this.forEach(function(e,n,a){Vr(t,a,n)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(Nc)}}const uc=i=>new Bn,rn=(i,t)=>i===t||typeof i=="object"&&typeof t=="object"&&i&&t&&xl(i,t);class Ai{constructor(t,e,n,a){this.left=t,this.right=e,this.index=n,this.currentAttributes=a}forward(){switch(this.right===null&&Oe(),this.right.content.constructor){case Zt:this.right.deleted||Vn(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const qo=(i,t,e)=>{for(;t.right!==null&&e>0;){switch(t.right.content.constructor){case Zt:t.right.deleted||Vn(t.currentAttributes,t.right.content);break;default:t.right.deleted||(e<t.right.length&&an(i,Tt(t.right.id.client,t.right.id.clock+e)),t.index+=t.right.length,e-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Rr=(i,t,e)=>{const n=new Map,a=ii(t,e);if(a){const p=new Ai(a.p.left,a.p,a.index,n);return qo(i,p,e-a.index)}else{const p=new Ai(null,t._start,0,n);return qo(i,p,e)}},Vs=(i,t,e,n)=>{for(;e.right!==null&&(e.right.deleted===!0||e.right.content.constructor===Zt&&rn(n.get(e.right.content.key),e.right.content.value));)e.right.deleted||n.delete(e.right.content.key),e.forward();const a=i.doc,p=a.clientID;n.forEach((w,g)=>{const h=e.left,m=e.right,_=new Vt(Tt(p,Gt(a.store,p)),h,h&&h.lastId,m,m&&m.id,t,null,new Zt(g,w));_.integrate(i,0),e.right=_,e.forward()})},Vn=(i,t)=>{const{key:e,value:n}=t;n===null?i.delete(e):i.set(e,n)},$s=(i,t)=>{for(;i.right!==null;){if(!(i.right.deleted||i.right.content.constructor===Zt&&rn(t[i.right.content.key]||null,i.right.content.value)))break;i.forward()}},Ks=(i,t,e,n)=>{const a=i.doc,p=a.clientID,w=new Map;for(const g in n){const h=n[g],m=e.currentAttributes.get(g)||null;if(!rn(m,h)){w.set(g,m);const{left:_,right:o}=e;e.right=new Vt(Tt(p,Gt(a.store,p)),_,_&&_.lastId,o,o&&o.id,t,null,new Zt(g,h)),e.right.integrate(i,0),e.forward()}}return w},pi=(i,t,e,n,a)=>{e.currentAttributes.forEach((r,s)=>{a[s]===void 0&&(a[s]=null)});const p=i.doc,w=p.clientID;$s(e,a);const g=Ks(i,t,e,a),h=n.constructor===String?new Be(n):n instanceof ee?new Ue(n):new Sn(n);let{left:m,right:_,index:o}=e;t._searchMarker&&sr(t._searchMarker,e.index,h.getLength()),_=new Vt(Tt(w,Gt(p.store,w)),m,m&&m.lastId,_,_&&_.id,t,null,h),_.integrate(i,0),e.right=_,e.index=o,e.forward(),Vs(i,t,e,g)},Bo=(i,t,e,n,a)=>{const p=i.doc,w=p.clientID;$s(e,a);const g=Ks(i,t,e,a);t:for(;e.right!==null&&(n>0||g.size>0&&(e.right.deleted||e.right.content.constructor===Zt));){if(!e.right.deleted)switch(e.right.content.constructor){case Zt:{const{key:h,value:m}=e.right.content,_=a[h];if(_!==void 0){if(rn(_,m))g.delete(h);else{if(n===0)break t;g.set(h,m)}e.right.delete(i)}else e.currentAttributes.set(h,m);break}default:n<e.right.length&&an(i,Tt(e.right.id.client,e.right.id.clock+n)),n-=e.right.length;break}e.forward()}if(n>0){let h="";for(;n>0;n--)h+=`
`;e.right=new Vt(Tt(w,Gt(p.store,w)),e.left,e.left&&e.left.lastId,e.right,e.right&&e.right.id,t,null,new Be(h)),e.right.integrate(i,0),e.forward()}Vs(i,t,e,g)},Ws=(i,t,e,n,a)=>{let p=t;const w=Ee();for(;p&&(!p.countable||p.deleted);){if(!p.deleted&&p.content.constructor===Zt){const m=p.content;w.set(m.key,m)}p=p.right}let g=0,h=!1;for(;t!==p;){if(e===t&&(h=!0),!t.deleted){const m=t.content;switch(m.constructor){case Zt:{const{key:_,value:o}=m,r=n.get(_)||null;(w.get(_)!==m||r===o)&&(t.delete(i),g++,!h&&(a.get(_)||null)===o&&r!==o&&(r===null?a.delete(_):a.set(_,r))),!h&&!t.deleted&&Vn(a,m);break}}}t=t.right}return g},cc=(i,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const e=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Zt){const n=t.content.key;e.has(n)?t.delete(i):e.add(n)}t=t.left}},fc=i=>{let t=0;return jt(i.doc,e=>{let n=i._start,a=i._start,p=Ee();const w=bi(p);for(;a;){if(a.deleted===!1)switch(a.content.constructor){case Zt:Vn(w,a.content);break;default:t+=Ws(e,n,a,p,w),p=bi(w),n=a;break}a=a.right}}),t},hc=i=>{const t=new Set,e=i.doc;for(const[n,a]of i.afterState.entries()){const p=i.beforeState.get(n)||0;a!==p&&Rs(i,e.store.clients.get(n),p,a,w=>{!w.deleted&&w.content.constructor===Zt&&w.constructor!==le&&t.add(w.parent)})}jt(e,n=>{ps(i,i.deleteSet,a=>{if(a instanceof le||!a.parent._hasFormatting||t.has(a.parent))return;const p=a.parent;a.content.constructor===Zt?t.add(p):cc(n,a)});for(const a of t)fc(a)})},Fo=(i,t,e)=>{const n=e,a=bi(t.currentAttributes),p=t.right;for(;e>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Ue:case Sn:case Be:e<t.right.length&&an(i,Tt(t.right.id.client,t.right.id.clock+e)),e-=t.right.length,t.right.delete(i);break}t.forward()}p&&Ws(i,p,t.right,a,t.currentAttributes);const w=(t.left||t.right).parent;return w._searchMarker&&sr(w._searchMarker,t.index,-n+e),t};class dc extends ri{constructor(t,e,n){super(t,e),this.childListChanged=!1,this.keysChanged=new Set,n.forEach(a=>{a===null?this.childListChanged=!0:this.keysChanged.add(a)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,e=[];jt(t,n=>{const a=new Map,p=new Map;let w=this.target._start,g=null;const h={};let m="",_=0,o=0;const r=()=>{if(g!==null){let s=null;switch(g){case"delete":o>0&&(s={delete:o}),o=0;break;case"insert":(typeof m=="object"||m.length>0)&&(s={insert:m},a.size>0&&(s.attributes={},a.forEach((c,d)=>{c!==null&&(s.attributes[d]=c)}))),m="";break;case"retain":_>0&&(s={retain:_},Tl(h)||(s.attributes=Ol({},h))),_=0;break}s&&e.push(s),g=null}};for(;w!==null;){switch(w.content.constructor){case Ue:case Sn:this.adds(w)?this.deletes(w)||(r(),g="insert",m=w.content.getContent()[0],r()):this.deletes(w)?(g!=="delete"&&(r(),g="delete"),o+=1):w.deleted||(g!=="retain"&&(r(),g="retain"),_+=1);break;case Be:this.adds(w)?this.deletes(w)||(g!=="insert"&&(r(),g="insert"),m+=w.content.str):this.deletes(w)?(g!=="delete"&&(r(),g="delete"),o+=w.length):w.deleted||(g!=="retain"&&(r(),g="retain"),_+=w.length);break;case Zt:{const{key:s,value:c}=w.content;if(this.adds(w)){if(!this.deletes(w)){const d=a.get(s)||null;rn(d,c)?c!==null&&w.delete(n):(g==="retain"&&r(),rn(c,p.get(s)||null)?delete h[s]:h[s]=c)}}else if(this.deletes(w)){p.set(s,c);const d=a.get(s)||null;rn(d,c)||(g==="retain"&&r(),h[s]=d)}else if(!w.deleted){p.set(s,c);const d=h[s];d!==void 0&&(rn(d,c)?d!==null&&w.delete(n):(g==="retain"&&r(),c===null?delete h[s]:h[s]=c))}w.deleted||(g==="insert"&&r(),Vn(a,w.content));break}}w=w.right}for(r();e.length>0;){const s=e[e.length-1];if(s.retain!==void 0&&s.attributes===void 0)e.pop();else break}}),this._delta=e}return this._delta}}class Fn extends ee{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(t,e){super._integrate(t,e);try{this._pending.forEach(n=>n())}catch(n){console.error(n)}this._pending=null}_copy(){return new Fn}clone(){const t=new Fn;return t.applyDelta(this.toDelta()),t}_callObserver(t,e){super._callObserver(t,e);const n=new dc(this,t,e);oi(this,t,n),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){let t="",e=this._start;for(;e!==null;)!e.deleted&&e.countable&&e.content.constructor===Be&&(t+=e.content.str),e=e.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:e=!0}={}){this.doc!==null?jt(this.doc,n=>{const a=new Ai(null,this._start,0,new Map);for(let p=0;p<t.length;p++){const w=t[p];if(w.insert!==void 0){const g=!e&&typeof w.insert=="string"&&p===t.length-1&&a.right===null&&w.insert.slice(-1)===`
`?w.insert.slice(0,-1):w.insert;(typeof g!="string"||g.length>0)&&pi(n,this,a,g,w.attributes||{})}else w.retain!==void 0?Bo(n,this,a,w.retain,w.attributes||{}):w.delete!==void 0&&Fo(n,a,w.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,e,n){const a=[],p=new Map,w=this.doc;let g="",h=this._start;function m(){if(g.length>0){const o={};let r=!1;p.forEach((c,d)=>{r=!0,o[d]=c});const s={insert:g};r&&(s.attributes=o),a.push(s),g=""}}const _=()=>{for(;h!==null;){if(Zn(h,t)||e!==void 0&&Zn(h,e))switch(h.content.constructor){case Be:{const o=p.get("ychange");t!==void 0&&!Zn(h,t)?(o===void 0||o.user!==h.id.client||o.type!=="removed")&&(m(),p.set("ychange",n?n("removed",h.id):{type:"removed"})):e!==void 0&&!Zn(h,e)?(o===void 0||o.user!==h.id.client||o.type!=="added")&&(m(),p.set("ychange",n?n("added",h.id):{type:"added"})):o!==void 0&&(m(),p.delete("ychange")),g+=h.content.str;break}case Ue:case Sn:{m();const o={insert:h.content.getContent()[0]};if(p.size>0){const r={};o.attributes=r,p.forEach((s,c)=>{r[c]=s})}a.push(o);break}case Zt:Zn(h,t)&&(m(),Vn(p,h.content));break}h=h.right}m()};return t||e?jt(w,o=>{t&&Oi(o,t),e&&Oi(o,e),_()},"cleanup"):_(),a}insert(t,e,n){if(e.length<=0)return;const a=this.doc;a!==null?jt(a,p=>{const w=Rr(p,this,t);n||(n={},w.currentAttributes.forEach((g,h)=>{n[h]=g})),pi(p,this,w,e,n)}):this._pending.push(()=>this.insert(t,e,n))}insertEmbed(t,e,n={}){const a=this.doc;a!==null?jt(a,p=>{const w=Rr(p,this,t);pi(p,this,w,e,n)}):this._pending.push(()=>this.insertEmbed(t,e,n))}delete(t,e){if(e===0)return;const n=this.doc;n!==null?jt(n,a=>{Fo(a,Rr(a,this,t),e)}):this._pending.push(()=>this.delete(t,e))}format(t,e,n){if(e===0)return;const a=this.doc;a!==null?jt(a,p=>{const w=Rr(p,this,t);w.right!==null&&Bo(p,this,w,e,n)}):this._pending.push(()=>this.format(t,e,n))}removeAttribute(t){this.doc!==null?jt(this.doc,e=>{Vr(e,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,e){this.doc!==null?jt(this.doc,n=>{eo(n,this,t,e)}):this._pending.push(()=>this.setAttribute(t,e))}getAttribute(t){return no(this,t)}getAttributes(){return Hs(this)}_write(t){t.writeTypeRef(Lc)}}const pc=i=>new Fn;class gi{constructor(t,e=()=>!0){this._filter=e,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,e=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(e)))do if(e=t.content.type,!t.deleted&&(e.constructor===lr||e.constructor===_n)&&e._start!==null)t=e._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class _n extends ee{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,e){super._integrate(t,e),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new _n}clone(){const t=new _n;return t.insert(0,this.toArray().map(e=>e instanceof ee?e.clone():e)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new gi(this,t)}querySelector(t){t=t.toUpperCase();const n=new gi(this,a=>a.nodeName&&a.nodeName.toUpperCase()===t).next();return n.done?null:n.value}querySelectorAll(t){return t=t.toUpperCase(),sn(new gi(this,e=>e.nodeName&&e.nodeName.toUpperCase()===t))}_callObserver(t,e){oi(this,t,new vc(this,e,t))}toString(){return Ps(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,e={},n){const a=t.createDocumentFragment();return n!==void 0&&n._createAssociation(a,this),ar(this,p=>{a.insertBefore(p.toDOM(t,e,n),null)}),a}insert(t,e){this.doc!==null?jt(this.doc,n=>{Fs(n,this,t,e)}):this._prelimContent.splice(t,0,...e)}insertAfter(t,e){if(this.doc!==null)jt(this.doc,n=>{const a=t&&t instanceof ee?t._item:t;zr(n,this,a,e)});else{const n=this._prelimContent,a=t===null?0:n.findIndex(p=>p===t)+1;if(a===0&&t!==null)throw Se("Reference item not found");n.splice(a,0,...e)}}delete(t,e=1){this.doc!==null?jt(this.doc,n=>{Us(n,this,t,e)}):this._prelimContent.splice(t,e)}toArray(){return js(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return qs(this,t)}slice(t=0,e=this.length){return Is(this,t,e)}forEach(t){ar(this,t)}_write(t){t.writeTypeRef(Mc)}}const gc=i=>new _n;class lr extends _n{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,e){super._integrate(t,e),this._prelimAttrs.forEach((n,a)=>{this.setAttribute(a,n)}),this._prelimAttrs=null}_copy(){return new lr(this.nodeName)}clone(){const t=new lr(this.nodeName),e=this.getAttributes();return Al(e,(n,a)=>{typeof n=="string"&&t.setAttribute(a,n)}),t.insert(0,this.toArray().map(n=>n instanceof ee?n.clone():n)),t}toString(){const t=this.getAttributes(),e=[],n=[];for(const g in t)n.push(g);n.sort();const a=n.length;for(let g=0;g<a;g++){const h=n[g];e.push(h+'="'+t[h]+'"')}const p=this.nodeName.toLocaleLowerCase(),w=e.length>0?" "+e.join(" "):"";return`<${p}${w}>${super.toString()}</${p}>`}removeAttribute(t){this.doc!==null?jt(this.doc,e=>{Vr(e,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,e){this.doc!==null?jt(this.doc,n=>{eo(n,this,t,e)}):this._prelimAttrs.set(t,e)}getAttribute(t){return no(this,t)}hasAttribute(t){return zs(this,t)}getAttributes(){return Hs(this)}toDOM(t=document,e={},n){const a=t.createElement(this.nodeName),p=this.getAttributes();for(const w in p){const g=p[w];typeof g=="string"&&a.setAttribute(w,g)}return ar(this,w=>{a.appendChild(w.toDOM(t,e,n))}),n!==void 0&&n._createAssociation(a,this),a}_write(t){t.writeTypeRef(Dc),t.writeKey(this.nodeName)}}const yc=i=>new lr(i.readKey());class vc extends ri{constructor(t,e,n){super(t,n),this.childListChanged=!1,this.attributesChanged=new Set,e.forEach(a=>{a===null?this.childListChanged=!0:this.attributesChanged.add(a)})}}class $r extends Bn{constructor(t){super(),this.hookName=t}_copy(){return new $r(this.hookName)}clone(){const t=new $r(this.hookName);return this.forEach((e,n)=>{t.set(n,e)}),t}toDOM(t=document,e={},n){const a=e[this.hookName];let p;return a!==void 0?p=a.createDom(this):p=document.createElement(this.hookName),p.setAttribute("data-yjs-hook",this.hookName),n!==void 0&&n._createAssociation(p,this),p}_write(t){t.writeTypeRef(Ic),t.writeKey(this.hookName)}}const mc=i=>new $r(i.readKey());class Kr extends Fn{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Kr}clone(){const t=new Kr;return t.applyDelta(this.toDelta()),t}toDOM(t=document,e,n){const a=t.createTextNode(this.toString());return n!==void 0&&n._createAssociation(a,this),a}toString(){return this.toDelta().map(t=>{const e=[];for(const a in t.attributes){const p=[];for(const w in t.attributes[a])p.push({key:w,value:t.attributes[a][w]});p.sort((w,g)=>w.key<g.key?-1:1),e.push({nodeName:a,attrs:p})}e.sort((a,p)=>a.nodeName<p.nodeName?-1:1);let n="";for(let a=0;a<e.length;a++){const p=e[a];n+=`<${p.nodeName}`;for(let w=0;w<p.attrs.length;w++){const g=p.attrs[w];n+=` ${g.key}="${g.value}"`}n+=">"}n+=t.insert;for(let a=e.length-1;a>=0;a--)n+=`</${e[a].nodeName}>`;return n}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(jc)}}const bc=i=>new Kr;class ro{constructor(t,e){this.id=t,this.length=e}get deleted(){throw Ie()}mergeWith(t){return!1}write(t,e,n){throw Ie()}integrate(t,e){throw Ie()}}const _c=0;class le extends ro{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){e>0&&(this.id.clock+=e,this.length-=e),xs(t.doc.store,this)}write(t,e){t.writeInfo(_c),t.writeLen(this.length-e)}getMissing(t,e){return null}}class yr{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new yr(this.content)}splice(t){throw Ie()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeBuf(this.content)}getRef(){return 3}}const wc=i=>new yr(i.readBuf());class ur{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new ur(this.len)}splice(t){const e=new ur(this.len-t);return this.len=t,e}mergeWith(t){return this.len+=t.len,!0}integrate(t,e){Ur(t.deleteSet,e.id.client,e.id.clock,this.len),e.markDeleted()}delete(t){}gc(t){}write(t,e){t.writeLen(this.len-e)}getRef(){return 1}}const Ec=i=>new ur(i.readLen()),Gs=(i,t)=>new zn({guid:i,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class vr{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const e={};this.opts=e,t.gc||(e.gc=!1),t.autoLoad&&(e.autoLoad=!0),t.meta!==null&&(e.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new vr(Gs(this.doc.guid,this.opts))}splice(t){throw Ie()}mergeWith(t){return!1}integrate(t,e){this.doc._item=e,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,e){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const Sc=i=>new vr(Gs(i.readString(),i.readAny()));class Sn{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Sn(this.embed)}splice(t){throw Ie()}mergeWith(t){return!1}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeJSON(this.embed)}getRef(){return 5}}const Oc=i=>new Sn(i.readJSON());class Zt{constructor(t,e){this.key=t,this.value=e}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Zt(this.key,this.value)}splice(t){throw Ie()}mergeWith(t){return!1}integrate(t,e){const n=e.parent;n._searchMarker=null,n._hasFormatting=!0}delete(t){}gc(t){}write(t,e){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const kc=i=>new Zt(i.readKey(),i.readJSON());class Wr{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Wr(this.arr)}splice(t){const e=new Wr(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const p=this.arr[a];t.writeString(p===void 0?"undefined":JSON.stringify(p))}}getRef(){return 2}}const Ac=i=>{const t=i.readLen(),e=[];for(let n=0;n<t;n++){const a=i.readString();a==="undefined"?e.push(void 0):e.push(JSON.parse(a))}return new Wr(e)};class wn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new wn(this.arr)}splice(t){const e=new wn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),e}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){const n=this.arr.length;t.writeLen(n-e);for(let a=e;a<n;a++){const p=this.arr[a];t.writeAny(p)}}getRef(){return 8}}const Tc=i=>{const t=i.readLen(),e=[];for(let n=0;n<t;n++)e.push(i.readAny());return new wn(e)};class Be{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Be(this.str)}splice(t){const e=new Be(this.str.slice(t));this.str=this.str.slice(0,t);const n=this.str.charCodeAt(t-1);return n>=55296&&n<=56319&&(this.str=this.str.slice(0,t-1)+"�",e.str="�"+e.str.slice(1)),e}mergeWith(t){return this.str+=t.str,!0}integrate(t,e){}delete(t){}gc(t){}write(t,e){t.writeString(e===0?this.str:this.str.slice(e))}getRef(){return 4}}const Cc=i=>new Be(i.readString()),xc=[ac,uc,pc,yc,gc,mc,bc],Rc=0,Nc=1,Lc=2,Dc=3,Mc=4,Ic=5,jc=6;class Ue{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ue(this.type._copy())}splice(t){throw Ie()}mergeWith(t){return!1}integrate(t,e){this.type._integrate(t.doc,e)}delete(t){let e=this.type._start;for(;e!==null;)e.deleted?e.id.clock<(t.beforeState.get(e.id.client)||0)&&t._mergeStructs.push(e):e.delete(t),e=e.right;this.type._map.forEach(n=>{n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t)}),t.changed.delete(this.type)}gc(t){let e=this.type._start;for(;e!==null;)e.gc(t,!0),e=e.right;this.type._start=null,this.type._map.forEach(n=>{for(;n!==null;)n.gc(t,!0),n=n.left}),this.type._map=new Map}write(t,e){this.type._write(t)}getRef(){return 7}}const Pc=i=>new Ue(xc[i.readTypeRef()](i)),Uo=(i,t)=>{let e=t,n=0,a;do n>0&&(e=Tt(e.client,e.clock+n)),a=Pr(i,e),n=e.clock-a.id.clock,e=a.redone;while(e!==null&&a instanceof Vt);return{item:a,diff:n}},Gr=(i,t,e)=>{const{client:n,clock:a}=t.id,p=new Vt(Tt(n,a+e),t,Tt(n,a+e-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(e));return t.deleted&&p.markDeleted(),t.keep&&(p.keep=!0),t.redone!==null&&(p.redone=Tt(t.redone.client,t.redone.clock+e)),t.right=p,p.right!==null&&(p.right.left=p),i._mergeStructs.push(p),p.parentSub!==null&&p.right===null&&p.parent._map.set(p.parentSub,p),t.length=e,p};class Vt extends ro{constructor(t,e,n,a,p,w,g,h){super(t,h.getLength()),this.origin=n,this.left=e,this.right=a,this.rightOrigin=p,this.parent=w,this.parentSub=g,this.redone=null,this.content=h,this.info=this.content.isCountable()?mo:0}set marker(t){(this.info&ui)>0!==t&&(this.info^=ui)}get marker(){return(this.info&ui)>0}get keep(){return(this.info&vo)>0}set keep(t){this.keep!==t&&(this.info^=vo)}get countable(){return(this.info&mo)>0}get deleted(){return(this.info&li)>0}set deleted(t){this.deleted!==t&&(this.info^=li)}markDeleted(){this.info|=li}getMissing(t,e){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Gt(e,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Gt(e,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Rn&&this.id.client!==this.parent.client&&this.parent.clock>=Gt(e,this.parent.client))return this.parent.client;if(this.origin&&(this.left=Mo(t,e,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=an(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===le||this.right&&this.right.constructor===le)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===Vt&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Vt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Rn){const n=Pr(e,this.parent);n.constructor===le?this.parent=null:this.parent=n.content.type}return null}integrate(t,e){if(e>0&&(this.id.clock+=e,this.left=Mo(t,t.doc.store,Tt(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(e),this.length-=e),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let n=this.left,a;if(n!==null)a=n.right;else if(this.parentSub!==null)for(a=this.parent._map.get(this.parentSub)||null;a!==null&&a.left!==null;)a=a.left;else a=this.parent._start;const p=new Set,w=new Set;for(;a!==null&&a!==this.right;){if(w.add(a),p.add(a),xn(this.origin,a.origin)){if(a.id.client<this.id.client)n=a,p.clear();else if(xn(this.rightOrigin,a.rightOrigin))break}else if(a.origin!==null&&w.has(Pr(t.doc.store,a.origin)))p.has(Pr(t.doc.store,a.origin))||(n=a,p.clear());else break;a=a.right}this.left=n}if(this.left!==null){const n=this.left.right;this.right=n,this.left.right=this}else{let n;if(this.parentSub!==null)for(n=this.parent._map.get(this.parentSub)||null;n!==null&&n.left!==null;)n=n.left;else n=this.parent._start,this.parent._start=this;this.right=n}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),xs(t.doc.store,this),this.content.integrate(t,this),jo(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new le(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Tt(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&xn(t.origin,this.lastId)&&this.right===t&&xn(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const e=this.parent._searchMarker;return e&&e.forEach(n=>{n.p===t&&(n.p=this,!this.deleted&&this.countable&&(n.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const e=this.parent;this.countable&&this.parentSub===null&&(e._length-=this.length),this.markDeleted(),Ur(t.deleteSet,this.id.client,this.id.clock,this.length),jo(t,e,this.parentSub),this.content.delete(t)}}gc(t,e){if(!this.deleted)throw Oe();this.content.gc(t),e?Vu(t,this,new le(this.id,this.length)):this.content=new ur(this.length)}write(t,e){const n=e>0?Tt(this.id.client,this.id.clock+e-1):this.origin,a=this.rightOrigin,p=this.parentSub,w=this.content.getRef()&Xr|(n===null?0:ae)|(a===null?0:Ke)|(p===null?0:ir);if(t.writeInfo(w),n!==null&&t.writeLeftID(n),a!==null&&t.writeRightID(a),n===null&&a===null){const g=this.parent;if(g._item!==void 0){const h=g._item;if(h===null){const m=As(g);t.writeParentInfo(!0),t.writeString(m)}else t.writeParentInfo(!1),t.writeLeftID(h.id)}else g.constructor===String?(t.writeParentInfo(!0),t.writeString(g)):g.constructor===Rn?(t.writeParentInfo(!1),t.writeLeftID(g)):Oe();p!==null&&t.writeString(p)}this.content.write(t,e)}}const Ys=(i,t)=>qc[t&Xr](i),qc=[()=>{Oe()},Ec,Ac,wc,Cc,Oc,kc,Pc,Tc,Sc,()=>{Oe()}],Bc=10;class ue extends ro{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,e){Oe()}write(t,e){t.writeInfo(Bc),wt(t.restEncoder,this.length-e)}getMissing(t,e){return null}}const Zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Js="__ $YJS$ __";Zs[Js]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Zs[Js]=!0;const Fc=1200,Uc=2500,Yr=3e4,Ti=i=>{if(i.shouldConnect&&i.ws===null){const t=new WebSocket(i.url),e=i.binaryType;let n=null;e&&(t.binaryType=e),i.ws=t,i.connecting=!0,i.connected=!1,t.onmessage=w=>{i.lastMessageReceived=Ge();const g=w.data,h=typeof g=="string"?JSON.parse(g):g;h&&h.type==="pong"&&(clearTimeout(n),n=setTimeout(p,Yr/2)),i.emit("message",[h,i])};const a=w=>{i.ws!==null&&(i.ws=null,i.connecting=!1,i.connected?(i.connected=!1,i.emit("disconnect",[{type:"disconnect",error:w},i])):i.unsuccessfulReconnects++,setTimeout(Ti,Ii(dl(i.unsuccessfulReconnects+1)*Fc,Uc),i)),clearTimeout(n)},p=()=>{i.ws===t&&i.send({type:"ping"})};t.onclose=()=>a(null),t.onerror=w=>a(w),t.onopen=()=>{i.lastMessageReceived=Ge(),i.connecting=!1,i.connected=!0,i.unsuccessfulReconnects=0,i.emit("connect",[{type:"connect"},i]),n=setTimeout(p,Yr/2)}}};class Hc extends hr{constructor(t,{binaryType:e}={}){super(),this.url=t,this.ws=null,this.binaryType=e||null,this.connected=!1,this.connecting=!1,this.unsuccessfulReconnects=0,this.lastMessageReceived=0,this.shouldConnect=!0,this._checkInterval=setInterval(()=>{this.connected&&Yr<Ge()-this.lastMessageReceived&&this.ws.close()},Yr/2),Ti(this)}send(t){this.ws&&this.ws.send(JSON.stringify(t))}destroy(){clearInterval(this._checkInterval),this.disconnect(),super.destroy()}disconnect(){this.shouldConnect=!1,this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.connected&&this.ws===null&&Ti(this)}}const Xs=new Map;class zc{constructor(t){this.room=t,this.onmessage=null,this._onChange=e=>e.key===t&&this.onmessage!==null&&this.onmessage({data:os(e.newValue||"")}),El(this._onChange)}postMessage(t){Jo.setItem(this.room,is(Gl(t)))}close(){Sl(this._onChange)}}const Vc=typeof BroadcastChannel>"u"?zc:BroadcastChannel,io=i=>fe(Xs,i,()=>{const t=yn(),e=new Vc(i);return e.onmessage=n=>t.forEach(a=>a(n.data,"broadcastchannel")),{bc:e,subs:t}}),$c=(i,t)=>(io(i).subs.add(t),t),Kc=(i,t)=>{const e=io(i),n=e.subs.delete(t);return n&&e.subs.size===0&&(e.bc.close(),Xs.delete(i)),n},Wc=(i,t,e=null)=>{const n=io(i);n.bc.postMessage(t),n.subs.forEach(a=>a(t,e))},Gc=()=>{let i=!0;return(t,e)=>{if(i){i=!1;try{t()}finally{i=!0}}else e!==void 0&&e()}};var Qs={exports:{}};(function(i,t){(function(e){i.exports=e()})(function(){var e=Math.floor,n=Math.abs,a=Math.pow;return function(){function p(w,g,h){function m(r,s){if(!g[r]){if(!w[r]){var c=typeof Tr=="function"&&Tr;if(!s&&c)return c(r,!0);if(_)return _(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var E=g[r]={exports:{}};w[r][0].call(E.exports,function(v){var y=w[r][1][v];return m(y||v)},E,E.exports,p,w,g,h)}return g[r].exports}for(var _=typeof Tr=="function"&&Tr,o=0;o<h.length;o++)m(h[o]);return m}return p}()({1:[function(p,w,g){function h(l){var b=l.length;if(0<b%4)throw new Error("Invalid string. Length must be a multiple of 4");var O=l.indexOf("=");O===-1&&(O=b);var S=O===b?0:4-O%4;return[O,S]}function m(l,b,O){return 3*(b+O)/4-O}function _(l){var b,O,S=h(l),C=S[0],L=S[1],A=new E(m(l,C,L)),k=0,x=0<L?C-4:C;for(O=0;O<x;O+=4)b=d[l.charCodeAt(O)]<<18|d[l.charCodeAt(O+1)]<<12|d[l.charCodeAt(O+2)]<<6|d[l.charCodeAt(O+3)],A[k++]=255&b>>16,A[k++]=255&b>>8,A[k++]=255&b;return L===2&&(b=d[l.charCodeAt(O)]<<2|d[l.charCodeAt(O+1)]>>4,A[k++]=255&b),L===1&&(b=d[l.charCodeAt(O)]<<10|d[l.charCodeAt(O+1)]<<4|d[l.charCodeAt(O+2)]>>2,A[k++]=255&b>>8,A[k++]=255&b),A}function o(l){return c[63&l>>18]+c[63&l>>12]+c[63&l>>6]+c[63&l]}function r(l,b,O){for(var S,C=[],L=b;L<O;L+=3)S=(16711680&l[L]<<16)+(65280&l[L+1]<<8)+(255&l[L+2]),C.push(o(S));return C.join("")}function s(l){for(var b,O=l.length,S=O%3,C=[],L=16383,A=0,k=O-S;A<k;A+=L)C.push(r(l,A,A+L>k?k:A+L));return S===1?(b=l[O-1],C.push(c[b>>2]+c[63&b<<4]+"==")):S===2&&(b=(l[O-2]<<8)+l[O-1],C.push(c[b>>10]+c[63&b>>4]+c[63&b<<2]+"=")),C.join("")}g.byteLength=function(l){var b=h(l),O=b[0],S=b[1];return 3*(O+S)/4-S},g.toByteArray=_,g.fromByteArray=s;for(var c=[],d=[],E=typeof Uint8Array>"u"?Array:Uint8Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,u=v.length;y<u;++y)c[y]=v[y],d[v.charCodeAt(y)]=y;d[45]=62,d[95]=63},{}],2:[function(){},{}],3:[function(p,w,g){(function(){(function(){var h=String.fromCharCode,m=Math.min;function _(f){if(2147483647<f)throw new RangeError('The value "'+f+'" is invalid for option "size"');var T=new Uint8Array(f);return T.__proto__=o.prototype,T}function o(f,T,R){if(typeof f=="number"){if(typeof T=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(f)}return r(f,T,R)}function r(f,T,R){if(typeof f=="string")return E(f,T);if(ArrayBuffer.isView(f))return v(f);if(f==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(Z(f,ArrayBuffer)||f&&Z(f.buffer,ArrayBuffer))return y(f,T,R);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var $=f.valueOf&&f.valueOf();if($!=null&&$!==f)return o.from($,T,R);var G=u(f);if(G)return G;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return o.from(f[Symbol.toPrimitive]("string"),T,R);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}function s(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(0>f)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function c(f,T,R){return s(f),0>=f||T===void 0?_(f):typeof R=="string"?_(f).fill(T,R):_(f).fill(T)}function d(f){return s(f),_(0>f?0:0|l(f))}function E(f,T){if((typeof T!="string"||T==="")&&(T="utf8"),!o.isEncoding(T))throw new TypeError("Unknown encoding: "+T);var R=0|b(f,T),$=_(R),G=$.write(f,T);return G!==R&&($=$.slice(0,G)),$}function v(f){for(var T=0>f.length?0:0|l(f.length),R=_(T),$=0;$<T;$+=1)R[$]=255&f[$];return R}function y(f,T,R){if(0>T||f.byteLength<T)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<T+(R||0))throw new RangeError('"length" is outside of buffer bounds');var $;return $=T===void 0&&R===void 0?new Uint8Array(f):R===void 0?new Uint8Array(f,T):new Uint8Array(f,T,R),$.__proto__=o.prototype,$}function u(f){if(o.isBuffer(f)){var T=0|l(f.length),R=_(T);return R.length===0||f.copy(R,0,0,T),R}return f.length===void 0?f.type==="Buffer"&&Array.isArray(f.data)?v(f.data):void 0:typeof f.length!="number"||et(f.length)?_(0):v(f)}function l(f){if(f>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|f}function b(f,T){if(o.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||Z(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);var R=f.length,$=2<arguments.length&&arguments[2]===!0;if(!$&&R===0)return 0;for(var G=!1;;)switch(T){case"ascii":case"latin1":case"binary":return R;case"utf8":case"utf-8":return it(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*R;case"hex":return R>>>1;case"base64":return ct(f).length;default:if(G)return $?-1:it(f).length;T=(""+T).toLowerCase(),G=!0}}function O(f,T,R){var $=!1;if((T===void 0||0>T)&&(T=0),T>this.length||((R===void 0||R>this.length)&&(R=this.length),0>=R)||(R>>>=0,T>>>=0,R<=T))return"";for(f||(f="utf8");;)switch(f){case"hex":return P(this,T,R);case"utf8":case"utf-8":return Y(this,T,R);case"ascii":return z(this,T,R);case"latin1":case"binary":return V(this,T,R);case"base64":return U(this,T,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,T,R);default:if($)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),$=!0}}function S(f,T,R){var $=f[T];f[T]=f[R],f[R]=$}function C(f,T,R,$,G){if(f.length===0)return-1;if(typeof R=="string"?($=R,R=0):2147483647<R?R=2147483647:-2147483648>R&&(R=-2147483648),R=+R,et(R)&&(R=G?0:f.length-1),0>R&&(R=f.length+R),R>=f.length){if(G)return-1;R=f.length-1}else if(0>R)if(G)R=0;else return-1;if(typeof T=="string"&&(T=o.from(T,$)),o.isBuffer(T))return T.length===0?-1:L(f,T,R,$,G);if(typeof T=="number")return T&=255,typeof Uint8Array.prototype.indexOf=="function"?G?Uint8Array.prototype.indexOf.call(f,T,R):Uint8Array.prototype.lastIndexOf.call(f,T,R):L(f,[T],R,$,G);throw new TypeError("val must be string, number or Buffer")}function L(f,T,R,$,G){function Q(Yt,ke){return ft===1?Yt[ke]:Yt.readUInt16BE(ke*ft)}var ft=1,gt=f.length,mt=T.length;if($!==void 0&&($=($+"").toLowerCase(),$==="ucs2"||$==="ucs-2"||$==="utf16le"||$==="utf-16le")){if(2>f.length||2>T.length)return-1;ft=2,gt/=2,mt/=2,R/=2}var _t;if(G){var yt=-1;for(_t=R;_t<gt;_t++)if(Q(f,_t)!==Q(T,yt===-1?0:_t-yt))yt!==-1&&(_t-=_t-yt),yt=-1;else if(yt===-1&&(yt=_t),_t-yt+1===mt)return yt*ft}else for(R+mt>gt&&(R=gt-mt),_t=R;0<=_t;_t--){for(var qt=!0,Rt=0;Rt<mt;Rt++)if(Q(f,_t+Rt)!==Q(T,Rt)){qt=!1;break}if(qt)return _t}return-1}function A(f,T,R,$){R=+R||0;var G=f.length-R;$?($=+$,$>G&&($=G)):$=G;var Q=T.length;$>Q/2&&($=Q/2);for(var ft,gt=0;gt<$;++gt){if(ft=parseInt(T.substr(2*gt,2),16),et(ft))return gt;f[R+gt]=ft}return gt}function k(f,T,R,$){return ht(it(T,f.length-R),f,R,$)}function x(f,T,R,$){return ht(ot(T),f,R,$)}function N(f,T,R,$){return x(f,T,R,$)}function M(f,T,R,$){return ht(ct(T),f,R,$)}function I(f,T,R,$){return ht(st(T,f.length-R),f,R,$)}function U(f,T,R){return T===0&&R===f.length?lt.fromByteArray(f):lt.fromByteArray(f.slice(T,R))}function Y(f,T,R){R=m(f.length,R);for(var $=[],G=T;G<R;){var Q=f[G],ft=null,gt=239<Q?4:223<Q?3:191<Q?2:1;if(G+gt<=R){var mt,_t,yt,qt;gt===1?128>Q&&(ft=Q):gt===2?(mt=f[G+1],(192&mt)==128&&(qt=(31&Q)<<6|63&mt,127<qt&&(ft=qt))):gt===3?(mt=f[G+1],_t=f[G+2],(192&mt)==128&&(192&_t)==128&&(qt=(15&Q)<<12|(63&mt)<<6|63&_t,2047<qt&&(55296>qt||57343<qt)&&(ft=qt))):gt===4&&(mt=f[G+1],_t=f[G+2],yt=f[G+3],(192&mt)==128&&(192&_t)==128&&(192&yt)==128&&(qt=(15&Q)<<18|(63&mt)<<12|(63&_t)<<6|63&yt,65535<qt&&1114112>qt&&(ft=qt)))}ft===null?(ft=65533,gt=1):65535<ft&&(ft-=65536,$.push(55296|1023&ft>>>10),ft=56320|1023&ft),$.push(ft),G+=gt}return nt($)}function nt(f){var T=f.length;if(T<=4096)return h.apply(String,f);for(var R="",$=0;$<T;)R+=h.apply(String,f.slice($,$+=4096));return R}function z(f,T,R){var $="";R=m(f.length,R);for(var G=T;G<R;++G)$+=h(127&f[G]);return $}function V(f,T,R){var $="";R=m(f.length,R);for(var G=T;G<R;++G)$+=h(f[G]);return $}function P(f,T,R){var $=f.length;(!T||0>T)&&(T=0),(!R||0>R||R>$)&&(R=$);for(var G="",Q=T;Q<R;++Q)G+=W(f[Q]);return G}function H(f,T,R){for(var $=f.slice(T,R),G="",Q=0;Q<$.length;Q+=2)G+=h($[Q]+256*$[Q+1]);return G}function F(f,T,R){if(f%1!=0||0>f)throw new RangeError("offset is not uint");if(f+T>R)throw new RangeError("Trying to access beyond buffer length")}function J(f,T,R,$,G,Q){if(!o.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(T>G||T<Q)throw new RangeError('"value" argument is out of bounds');if(R+$>f.length)throw new RangeError("Index out of range")}function j(f,T,R,$){if(R+$>f.length)throw new RangeError("Index out of range");if(0>R)throw new RangeError("Index out of range")}function q(f,T,R,$,G){return T=+T,R>>>=0,G||j(f,T,R,4),X.write(f,T,R,$,23,4),R+4}function K(f,T,R,$,G){return T=+T,R>>>=0,G||j(f,T,R,8),X.write(f,T,R,$,52,8),R+8}function B(f){if(f=f.split("=")[0],f=f.trim().replace(D,""),2>f.length)return"";for(;f.length%4!=0;)f+="=";return f}function W(f){return 16>f?"0"+f.toString(16):f.toString(16)}function it(f,T){T=T||1/0;for(var R,$=f.length,G=null,Q=[],ft=0;ft<$;++ft){if(R=f.charCodeAt(ft),55295<R&&57344>R){if(!G){if(56319<R){-1<(T-=3)&&Q.push(239,191,189);continue}else if(ft+1===$){-1<(T-=3)&&Q.push(239,191,189);continue}G=R;continue}if(56320>R){-1<(T-=3)&&Q.push(239,191,189),G=R;continue}R=(G-55296<<10|R-56320)+65536}else G&&-1<(T-=3)&&Q.push(239,191,189);if(G=null,128>R){if(0>(T-=1))break;Q.push(R)}else if(2048>R){if(0>(T-=2))break;Q.push(192|R>>6,128|63&R)}else if(65536>R){if(0>(T-=3))break;Q.push(224|R>>12,128|63&R>>6,128|63&R)}else if(1114112>R){if(0>(T-=4))break;Q.push(240|R>>18,128|63&R>>12,128|63&R>>6,128|63&R)}else throw new Error("Invalid code point")}return Q}function ot(f){for(var T=[],R=0;R<f.length;++R)T.push(255&f.charCodeAt(R));return T}function st(f,T){for(var R,$,G,Q=[],ft=0;ft<f.length&&!(0>(T-=2));++ft)R=f.charCodeAt(ft),$=R>>8,G=R%256,Q.push(G),Q.push($);return Q}function ct(f){return lt.toByteArray(B(f))}function ht(f,T,R,$){for(var G=0;G<$&&!(G+R>=T.length||G>=f.length);++G)T[G+R]=f[G];return G}function Z(f,T){return f instanceof T||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===T.name}function et(f){return f!==f}var lt=p("base64-js"),X=p("ieee754");g.Buffer=o,g.SlowBuffer=function(f){return+f!=f&&(f=0),o.alloc(+f)},g.INSPECT_MAX_BYTES=50,g.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var f=new Uint8Array(1);return f.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},f.foo()===42}catch{return!1}}(),o.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){return o.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return o.isBuffer(this)?this.byteOffset:void 0}}),typeof Symbol<"u"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(f,T,R){return r(f,T,R)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(f,T,R){return c(f,T,R)},o.allocUnsafe=function(f){return d(f)},o.allocUnsafeSlow=function(f){return d(f)},o.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==o.prototype},o.compare=function(f,T){if(Z(f,Uint8Array)&&(f=o.from(f,f.offset,f.byteLength)),Z(T,Uint8Array)&&(T=o.from(T,T.offset,T.byteLength)),!o.isBuffer(f)||!o.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===T)return 0;for(var R=f.length,$=T.length,G=0,Q=m(R,$);G<Q;++G)if(f[G]!==T[G]){R=f[G],$=T[G];break}return R<$?-1:$<R?1:0},o.isEncoding=function(f){switch((f+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(f,T){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return o.alloc(0);var R;if(T===void 0)for(T=0,R=0;R<f.length;++R)T+=f[R].length;var $=o.allocUnsafe(T),G=0;for(R=0;R<f.length;++R){var Q=f[R];if(Z(Q,Uint8Array)&&(Q=o.from(Q)),!o.isBuffer(Q))throw new TypeError('"list" argument must be an Array of Buffers');Q.copy($,G),G+=Q.length}return $},o.byteLength=b,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var f=this.length;if(f%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var T=0;T<f;T+=2)S(this,T,T+1);return this},o.prototype.swap32=function(){var f=this.length;if(f%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var T=0;T<f;T+=4)S(this,T,T+3),S(this,T+1,T+2);return this},o.prototype.swap64=function(){var f=this.length;if(f%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var T=0;T<f;T+=8)S(this,T,T+7),S(this,T+1,T+6),S(this,T+2,T+5),S(this,T+3,T+4);return this},o.prototype.toString=function(){var f=this.length;return f===0?"":arguments.length===0?Y(this,0,f):O.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(f){if(!o.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f||o.compare(this,f)===0},o.prototype.inspect=function(){var f="",T=g.INSPECT_MAX_BYTES;return f=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(f+=" ... "),"<Buffer "+f+">"},o.prototype.compare=function(f,T,R,$,G){if(Z(f,Uint8Array)&&(f=o.from(f,f.offset,f.byteLength)),!o.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(T===void 0&&(T=0),R===void 0&&(R=f?f.length:0),$===void 0&&($=0),G===void 0&&(G=this.length),0>T||R>f.length||0>$||G>this.length)throw new RangeError("out of range index");if($>=G&&T>=R)return 0;if($>=G)return-1;if(T>=R)return 1;if(T>>>=0,R>>>=0,$>>>=0,G>>>=0,this===f)return 0;for(var Q=G-$,ft=R-T,gt=m(Q,ft),mt=this.slice($,G),_t=f.slice(T,R),yt=0;yt<gt;++yt)if(mt[yt]!==_t[yt]){Q=mt[yt],ft=_t[yt];break}return Q<ft?-1:ft<Q?1:0},o.prototype.includes=function(f,T,R){return this.indexOf(f,T,R)!==-1},o.prototype.indexOf=function(f,T,R){return C(this,f,T,R,!0)},o.prototype.lastIndexOf=function(f,T,R){return C(this,f,T,R,!1)},o.prototype.write=function(f,T,R,$){if(T===void 0)$="utf8",R=this.length,T=0;else if(R===void 0&&typeof T=="string")$=T,R=this.length,T=0;else if(isFinite(T))T>>>=0,isFinite(R)?(R>>>=0,$===void 0&&($="utf8")):($=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var G=this.length-T;if((R===void 0||R>G)&&(R=G),0<f.length&&(0>R||0>T)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");$||($="utf8");for(var Q=!1;;)switch($){case"hex":return A(this,f,T,R);case"utf8":case"utf-8":return k(this,f,T,R);case"ascii":return x(this,f,T,R);case"latin1":case"binary":return N(this,f,T,R);case"base64":return M(this,f,T,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,f,T,R);default:if(Q)throw new TypeError("Unknown encoding: "+$);$=(""+$).toLowerCase(),Q=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(f,T){var R=this.length;f=~~f,T=T===void 0?R:~~T,0>f?(f+=R,0>f&&(f=0)):f>R&&(f=R),0>T?(T+=R,0>T&&(T=0)):T>R&&(T=R),T<f&&(T=f);var $=this.subarray(f,T);return $.__proto__=o.prototype,$},o.prototype.readUIntLE=function(f,T,R){f>>>=0,T>>>=0,R||F(f,T,this.length);for(var $=this[f],G=1,Q=0;++Q<T&&(G*=256);)$+=this[f+Q]*G;return $},o.prototype.readUIntBE=function(f,T,R){f>>>=0,T>>>=0,R||F(f,T,this.length);for(var $=this[f+--T],G=1;0<T&&(G*=256);)$+=this[f+--T]*G;return $},o.prototype.readUInt8=function(f,T){return f>>>=0,T||F(f,1,this.length),this[f]},o.prototype.readUInt16LE=function(f,T){return f>>>=0,T||F(f,2,this.length),this[f]|this[f+1]<<8},o.prototype.readUInt16BE=function(f,T){return f>>>=0,T||F(f,2,this.length),this[f]<<8|this[f+1]},o.prototype.readUInt32LE=function(f,T){return f>>>=0,T||F(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+16777216*this[f+3]},o.prototype.readUInt32BE=function(f,T){return f>>>=0,T||F(f,4,this.length),16777216*this[f]+(this[f+1]<<16|this[f+2]<<8|this[f+3])},o.prototype.readIntLE=function(f,T,R){f>>>=0,T>>>=0,R||F(f,T,this.length);for(var $=this[f],G=1,Q=0;++Q<T&&(G*=256);)$+=this[f+Q]*G;return G*=128,$>=G&&($-=a(2,8*T)),$},o.prototype.readIntBE=function(f,T,R){f>>>=0,T>>>=0,R||F(f,T,this.length);for(var $=T,G=1,Q=this[f+--$];0<$&&(G*=256);)Q+=this[f+--$]*G;return G*=128,Q>=G&&(Q-=a(2,8*T)),Q},o.prototype.readInt8=function(f,T){return f>>>=0,T||F(f,1,this.length),128&this[f]?-1*(255-this[f]+1):this[f]},o.prototype.readInt16LE=function(f,T){f>>>=0,T||F(f,2,this.length);var R=this[f]|this[f+1]<<8;return 32768&R?4294901760|R:R},o.prototype.readInt16BE=function(f,T){f>>>=0,T||F(f,2,this.length);var R=this[f+1]|this[f]<<8;return 32768&R?4294901760|R:R},o.prototype.readInt32LE=function(f,T){return f>>>=0,T||F(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},o.prototype.readInt32BE=function(f,T){return f>>>=0,T||F(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},o.prototype.readFloatLE=function(f,T){return f>>>=0,T||F(f,4,this.length),X.read(this,f,!0,23,4)},o.prototype.readFloatBE=function(f,T){return f>>>=0,T||F(f,4,this.length),X.read(this,f,!1,23,4)},o.prototype.readDoubleLE=function(f,T){return f>>>=0,T||F(f,8,this.length),X.read(this,f,!0,52,8)},o.prototype.readDoubleBE=function(f,T){return f>>>=0,T||F(f,8,this.length),X.read(this,f,!1,52,8)},o.prototype.writeUIntLE=function(f,T,R,$){if(f=+f,T>>>=0,R>>>=0,!$){var G=a(2,8*R)-1;J(this,f,T,R,G,0)}var Q=1,ft=0;for(this[T]=255&f;++ft<R&&(Q*=256);)this[T+ft]=255&f/Q;return T+R},o.prototype.writeUIntBE=function(f,T,R,$){if(f=+f,T>>>=0,R>>>=0,!$){var G=a(2,8*R)-1;J(this,f,T,R,G,0)}var Q=R-1,ft=1;for(this[T+Q]=255&f;0<=--Q&&(ft*=256);)this[T+Q]=255&f/ft;return T+R},o.prototype.writeUInt8=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,1,255,0),this[T]=255&f,T+1},o.prototype.writeUInt16LE=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,2,65535,0),this[T]=255&f,this[T+1]=f>>>8,T+2},o.prototype.writeUInt16BE=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,2,65535,0),this[T]=f>>>8,this[T+1]=255&f,T+2},o.prototype.writeUInt32LE=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,4,4294967295,0),this[T+3]=f>>>24,this[T+2]=f>>>16,this[T+1]=f>>>8,this[T]=255&f,T+4},o.prototype.writeUInt32BE=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,4,4294967295,0),this[T]=f>>>24,this[T+1]=f>>>16,this[T+2]=f>>>8,this[T+3]=255&f,T+4},o.prototype.writeIntLE=function(f,T,R,$){if(f=+f,T>>>=0,!$){var G=a(2,8*R-1);J(this,f,T,R,G-1,-G)}var Q=0,ft=1,gt=0;for(this[T]=255&f;++Q<R&&(ft*=256);)0>f&&gt===0&&this[T+Q-1]!==0&&(gt=1),this[T+Q]=255&(f/ft>>0)-gt;return T+R},o.prototype.writeIntBE=function(f,T,R,$){if(f=+f,T>>>=0,!$){var G=a(2,8*R-1);J(this,f,T,R,G-1,-G)}var Q=R-1,ft=1,gt=0;for(this[T+Q]=255&f;0<=--Q&&(ft*=256);)0>f&&gt===0&&this[T+Q+1]!==0&&(gt=1),this[T+Q]=255&(f/ft>>0)-gt;return T+R},o.prototype.writeInt8=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,1,127,-128),0>f&&(f=255+f+1),this[T]=255&f,T+1},o.prototype.writeInt16LE=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,2,32767,-32768),this[T]=255&f,this[T+1]=f>>>8,T+2},o.prototype.writeInt16BE=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,2,32767,-32768),this[T]=f>>>8,this[T+1]=255&f,T+2},o.prototype.writeInt32LE=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,4,2147483647,-2147483648),this[T]=255&f,this[T+1]=f>>>8,this[T+2]=f>>>16,this[T+3]=f>>>24,T+4},o.prototype.writeInt32BE=function(f,T,R){return f=+f,T>>>=0,R||J(this,f,T,4,2147483647,-2147483648),0>f&&(f=4294967295+f+1),this[T]=f>>>24,this[T+1]=f>>>16,this[T+2]=f>>>8,this[T+3]=255&f,T+4},o.prototype.writeFloatLE=function(f,T,R){return q(this,f,T,!0,R)},o.prototype.writeFloatBE=function(f,T,R){return q(this,f,T,!1,R)},o.prototype.writeDoubleLE=function(f,T,R){return K(this,f,T,!0,R)},o.prototype.writeDoubleBE=function(f,T,R){return K(this,f,T,!1,R)},o.prototype.copy=function(f,T,R,$){if(!o.isBuffer(f))throw new TypeError("argument should be a Buffer");if(R||(R=0),$||$===0||($=this.length),T>=f.length&&(T=f.length),T||(T=0),0<$&&$<R&&($=R),$===R||f.length===0||this.length===0)return 0;if(0>T)throw new RangeError("targetStart out of bounds");if(0>R||R>=this.length)throw new RangeError("Index out of range");if(0>$)throw new RangeError("sourceEnd out of bounds");$>this.length&&($=this.length),f.length-T<$-R&&($=f.length-T+R);var G=$-R;if(this===f&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(T,R,$);else if(this===f&&R<T&&T<$)for(var Q=G-1;0<=Q;--Q)f[Q+T]=this[Q+R];else Uint8Array.prototype.set.call(f,this.subarray(R,$),T);return G},o.prototype.fill=function(f,T,R,$){if(typeof f=="string"){if(typeof T=="string"?($=T,T=0,R=this.length):typeof R=="string"&&($=R,R=this.length),$!==void 0&&typeof $!="string")throw new TypeError("encoding must be a string");if(typeof $=="string"&&!o.isEncoding($))throw new TypeError("Unknown encoding: "+$);if(f.length===1){var G=f.charCodeAt(0);($==="utf8"&&128>G||$==="latin1")&&(f=G)}}else typeof f=="number"&&(f&=255);if(0>T||this.length<T||this.length<R)throw new RangeError("Out of range index");if(R<=T)return this;T>>>=0,R=R===void 0?this.length:R>>>0,f||(f=0);var Q;if(typeof f=="number")for(Q=T;Q<R;++Q)this[Q]=f;else{var ft=o.isBuffer(f)?f:o.from(f,$),gt=ft.length;if(gt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(Q=0;Q<R-T;++Q)this[Q+T]=ft[Q%gt]}return this};var D=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,p("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:9}],4:[function(p,w,g){(function(h){(function(){function m(){let o;try{o=g.storage.getItem("debug")}catch{}return!o&&typeof h<"u"&&"env"in h&&(o=h.env.DEBUG),o}g.formatArgs=function(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+w.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;o.splice(1,0,r,"color: inherit");let s=0,c=0;o[0].replace(/%[a-zA-Z%]/g,d=>{d==="%%"||(s++,d==="%c"&&(c=s))}),o.splice(c,0,r)},g.save=function(o){try{o?g.storage.setItem("debug",o):g.storage.removeItem("debug")}catch{}},g.load=m,g.useColors=function(){return!!(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},g.storage=function(){try{return localStorage}catch{}}(),g.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),g.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],g.log=console.debug||console.log||(()=>{}),w.exports=p("./common")(g);const{formatters:_}=w.exports;_.j=function(o){try{return JSON.stringify(o)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}}}).call(this)}).call(this,p("_process"))},{"./common":5,_process:12}],5:[function(p,w){w.exports=function(g){function h(o){function r(...d){if(!r.enabled)return;const E=r,v=+new Date,y=v-(s||v);E.diff=y,E.prev=s,E.curr=v,s=v,d[0]=h.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let u=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(b,O)=>{if(b==="%%")return"%";u++;const S=h.formatters[O];if(typeof S=="function"){const C=d[u];b=S.call(E,C),d.splice(u,1),u--}return b}),h.formatArgs.call(E,d),(E.log||h.log).apply(E,d)}let s,c=null;return r.namespace=o,r.useColors=h.useColors(),r.color=h.selectColor(o),r.extend=m,r.destroy=h.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:()=>c===null?h.enabled(o):c,set:d=>{c=d}}),typeof h.init=="function"&&h.init(r),r}function m(o,r){const s=h(this.namespace+(typeof r>"u"?":":r)+o);return s.log=this.log,s}function _(o){return o.toString().substring(2,o.toString().length-2).replace(/\.\*\?$/,"*")}return h.debug=h,h.default=h,h.coerce=function(o){return o instanceof Error?o.stack||o.message:o},h.disable=function(){const o=[...h.names.map(_),...h.skips.map(_).map(r=>"-"+r)].join(",");return h.enable(""),o},h.enable=function(o){h.save(o),h.names=[],h.skips=[];let r;const s=(typeof o=="string"?o:"").split(/[\s,]+/),c=s.length;for(r=0;r<c;r++)s[r]&&(o=s[r].replace(/\*/g,".*?"),o[0]==="-"?h.skips.push(new RegExp("^"+o.substr(1)+"$")):h.names.push(new RegExp("^"+o+"$")))},h.enabled=function(o){if(o[o.length-1]==="*")return!0;let r,s;for(r=0,s=h.skips.length;r<s;r++)if(h.skips[r].test(o))return!1;for(r=0,s=h.names.length;r<s;r++)if(h.names[r].test(o))return!0;return!1},h.humanize=p("ms"),h.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(g).forEach(o=>{h[o]=g[o]}),h.names=[],h.skips=[],h.formatters={},h.selectColor=function(o){let r=0;for(let s=0;s<o.length;s++)r=(r<<5)-r+o.charCodeAt(s),r|=0;return h.colors[n(r)%h.colors.length]},h.enable(h.load()),h}},{ms:11}],6:[function(p,w){function g(h,m){for(const _ in m)Object.defineProperty(h,_,{value:m[_],enumerable:!0,configurable:!0});return h}w.exports=function(h,m,_){if(!h||typeof h=="string")throw new TypeError("Please pass an Error to err-code");_||(_={}),typeof m=="object"&&(_=m,m=""),m&&(_.code=m);try{return g(h,_)}catch{_.message=h.message,_.stack=h.stack;const r=function(){};return r.prototype=Object.create(Object.getPrototypeOf(h)),g(new r,_)}}},{}],7:[function(p,w){function g(A){console&&console.warn&&console.warn(A)}function h(){h.init.call(this)}function m(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}function _(A){return A._maxListeners===void 0?h.defaultMaxListeners:A._maxListeners}function o(A,k,x,N){var M,I,U;if(m(x),I=A._events,I===void 0?(I=A._events=Object.create(null),A._eventsCount=0):(I.newListener!==void 0&&(A.emit("newListener",k,x.listener?x.listener:x),I=A._events),U=I[k]),U===void 0)U=I[k]=x,++A._eventsCount;else if(typeof U=="function"?U=I[k]=N?[x,U]:[U,x]:N?U.unshift(x):U.push(x),M=_(A),0<M&&U.length>M&&!U.warned){U.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+U.length+" "+(k+" listeners added. Use emitter.setMaxListeners() to increase limit"));Y.name="MaxListenersExceededWarning",Y.emitter=A,Y.type=k,Y.count=U.length,g(Y)}return A}function r(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(A,k,x){var N={fired:!1,wrapFn:void 0,target:A,type:k,listener:x},M=r.bind(N);return M.listener=x,N.wrapFn=M,M}function c(A,k,x){var N=A._events;if(N===void 0)return[];var M=N[k];return M===void 0?[]:typeof M=="function"?x?[M.listener||M]:[M]:x?y(M):E(M,M.length)}function d(A){var k=this._events;if(k!==void 0){var x=k[A];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}function E(A,k){for(var x=Array(k),N=0;N<k;++N)x[N]=A[N];return x}function v(A,k){for(;k+1<A.length;k++)A[k]=A[k+1];A.pop()}function y(A){for(var k=Array(A.length),x=0;x<k.length;++x)k[x]=A[x].listener||A[x];return k}function u(A,k,x){typeof A.on=="function"&&l(A,"error",k,x)}function l(A,k,x,N){if(typeof A.on=="function")N.once?A.once(k,x):A.on(k,x);else if(typeof A.addEventListener=="function")A.addEventListener(k,function M(I){N.once&&A.removeEventListener(k,M),x(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}var b,O=typeof Reflect=="object"?Reflect:null,S=O&&typeof O.apply=="function"?O.apply:function(A,k,x){return Function.prototype.apply.call(A,k,x)};b=O&&typeof O.ownKeys=="function"?O.ownKeys:Object.getOwnPropertySymbols?function(A){return Object.getOwnPropertyNames(A).concat(Object.getOwnPropertySymbols(A))}:function(A){return Object.getOwnPropertyNames(A)};var C=Number.isNaN||function(A){return A!==A};w.exports=h,w.exports.once=function(A,k){return new Promise(function(x,N){function M(U){A.removeListener(k,I),N(U)}function I(){typeof A.removeListener=="function"&&A.removeListener("error",M),x([].slice.call(arguments))}l(A,k,I,{once:!0}),k!=="error"&&u(A,M,{once:!0})})},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var L=10;Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return L},set:function(A){if(typeof A!="number"||0>A||C(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");L=A}}),h.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(A){if(typeof A!="number"||0>A||C(A))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+A+".");return this._maxListeners=A,this},h.prototype.getMaxListeners=function(){return _(this)},h.prototype.emit=function(A){for(var k=[],x=1;x<arguments.length;x++)k.push(arguments[x]);var N=A==="error",M=this._events;if(M!==void 0)N=N&&M.error===void 0;else if(!N)return!1;if(N){var I;if(0<k.length&&(I=k[0]),I instanceof Error)throw I;var U=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw U.context=I,U}var Y=M[A];if(Y===void 0)return!1;if(typeof Y=="function")S(Y,this,k);else for(var nt=Y.length,z=E(Y,nt),x=0;x<nt;++x)S(z[x],this,k);return!0},h.prototype.addListener=function(A,k){return o(this,A,k,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(A,k){return o(this,A,k,!0)},h.prototype.once=function(A,k){return m(k),this.on(A,s(this,A,k)),this},h.prototype.prependOnceListener=function(A,k){return m(k),this.prependListener(A,s(this,A,k)),this},h.prototype.removeListener=function(A,k){var x,N,M,I,U;if(m(k),N=this._events,N===void 0)return this;if(x=N[A],x===void 0)return this;if(x===k||x.listener===k)--this._eventsCount==0?this._events=Object.create(null):(delete N[A],N.removeListener&&this.emit("removeListener",A,x.listener||k));else if(typeof x!="function"){for(M=-1,I=x.length-1;0<=I;I--)if(x[I]===k||x[I].listener===k){U=x[I].listener,M=I;break}if(0>M)return this;M===0?x.shift():v(x,M),x.length===1&&(N[A]=x[0]),N.removeListener!==void 0&&this.emit("removeListener",A,U||k)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(A){var k,x,N;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[A]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete x[A]),this;if(arguments.length===0){var M,I=Object.keys(x);for(N=0;N<I.length;++N)M=I[N],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=x[A],typeof k=="function")this.removeListener(A,k);else if(k!==void 0)for(N=k.length-1;0<=N;N--)this.removeListener(A,k[N]);return this},h.prototype.listeners=function(A){return c(this,A,!0)},h.prototype.rawListeners=function(A){return c(this,A,!1)},h.listenerCount=function(A,k){return typeof A.listenerCount=="function"?A.listenerCount(k):d.call(A,k)},h.prototype.listenerCount=d,h.prototype.eventNames=function(){return 0<this._eventsCount?b(this._events):[]}},{}],8:[function(p,w){w.exports=function(){if(typeof globalThis>"u")return null;var g={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return g.RTCPeerConnection?g:null}},{}],9:[function(p,w,g){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */g.read=function(h,m,_,o,r){var s,c,d=8*r-o-1,E=(1<<d)-1,v=E>>1,y=-7,u=_?r-1:0,l=_?-1:1,b=h[m+u];for(u+=l,s=b&(1<<-y)-1,b>>=-y,y+=d;0<y;s=256*s+h[m+u],u+=l,y-=8);for(c=s&(1<<-y)-1,s>>=-y,y+=o;0<y;c=256*c+h[m+u],u+=l,y-=8);if(s===0)s=1-v;else{if(s===E)return c?NaN:(b?-1:1)*(1/0);c+=a(2,o),s-=v}return(b?-1:1)*c*a(2,s-o)},g.write=function(h,m,_,o,r,s){var c,d,E,v=Math.LN2,y=Math.log,u=8*s-r-1,l=(1<<u)-1,b=l>>1,O=r===23?a(2,-24)-a(2,-77):0,S=o?0:s-1,C=o?1:-1,L=0>m||m===0&&0>1/m?1:0;for(m=n(m),isNaN(m)||m===1/0?(d=isNaN(m)?1:0,c=l):(c=e(y(m)/v),1>m*(E=a(2,-c))&&(c--,E*=2),m+=1<=c+b?O/E:O*a(2,1-b),2<=m*E&&(c++,E/=2),c+b>=l?(d=0,c=l):1<=c+b?(d=(m*E-1)*a(2,r),c+=b):(d=m*a(2,b-1)*a(2,r),c=0));8<=r;h[_+S]=255&d,S+=C,d/=256,r-=8);for(c=c<<r|d,u+=r;0<u;h[_+S]=255&c,S+=C,c/=256,u-=8);h[_+S-C]|=128*L}},{}],10:[function(p,w){w.exports=typeof Object.create=="function"?function(g,h){h&&(g.super_=h,g.prototype=Object.create(h.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:function(g,h){if(h){g.super_=h;var m=function(){};m.prototype=h.prototype,g.prototype=new m,g.prototype.constructor=g}}},{}],11:[function(p,w){var g=Math.round;function h(r){if(r+="",!(100<r.length)){var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(s){var c=parseFloat(s[1]),d=(s[2]||"ms").toLowerCase();return d==="years"||d==="year"||d==="yrs"||d==="yr"||d==="y"?315576e5*c:d==="weeks"||d==="week"||d==="w"?6048e5*c:d==="days"||d==="day"||d==="d"?864e5*c:d==="hours"||d==="hour"||d==="hrs"||d==="hr"||d==="h"?36e5*c:d==="minutes"||d==="minute"||d==="mins"||d==="min"||d==="m"?6e4*c:d==="seconds"||d==="second"||d==="secs"||d==="sec"||d==="s"?1e3*c:d==="milliseconds"||d==="millisecond"||d==="msecs"||d==="msec"||d==="ms"?c:void 0}}}function m(r){var s=n(r);return 864e5<=s?g(r/864e5)+"d":36e5<=s?g(r/36e5)+"h":6e4<=s?g(r/6e4)+"m":1e3<=s?g(r/1e3)+"s":r+"ms"}function _(r){var s=n(r);return 864e5<=s?o(r,s,864e5,"day"):36e5<=s?o(r,s,36e5,"hour"):6e4<=s?o(r,s,6e4,"minute"):1e3<=s?o(r,s,1e3,"second"):r+" ms"}function o(r,s,c,d){return g(r/c)+" "+d+(s>=1.5*c?"s":"")}w.exports=function(r,s){s=s||{};var c=typeof r;if(c=="string"&&0<r.length)return h(r);if(c==="number"&&isFinite(r))return s.long?_(r):m(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))}},{}],12:[function(p,w){function g(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function m(O){if(d===setTimeout)return setTimeout(O,0);if((d===g||!d)&&setTimeout)return d=setTimeout,setTimeout(O,0);try{return d(O,0)}catch{try{return d.call(null,O,0)}catch{return d.call(this,O,0)}}}function _(O){if(E===clearTimeout)return clearTimeout(O);if((E===h||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(O);try{return E(O)}catch{try{return E.call(null,O)}catch{return E.call(this,O)}}}function o(){l&&y&&(l=!1,y.length?u=y.concat(u):b=-1,u.length&&r())}function r(){if(!l){var O=m(o);l=!0;for(var S=u.length;S;){for(y=u,u=[];++b<S;)y&&y[b].run();b=-1,S=u.length}y=null,l=!1,_(O)}}function s(O,S){this.fun=O,this.array=S}function c(){}var d,E,v=w.exports={};(function(){try{d=typeof setTimeout=="function"?setTimeout:g}catch{d=g}try{E=typeof clearTimeout=="function"?clearTimeout:h}catch{E=h}})();var y,u=[],l=!1,b=-1;v.nextTick=function(O){var S=Array(arguments.length-1);if(1<arguments.length)for(var C=1;C<arguments.length;C++)S[C-1]=arguments[C];u.push(new s(O,S)),u.length!==1||l||m(r)},s.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=c,v.addListener=c,v.once=c,v.off=c,v.removeListener=c,v.removeAllListeners=c,v.emit=c,v.prependListener=c,v.prependOnceListener=c,v.listeners=function(){return[]},v.binding=function(){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},{}],13:[function(p,w){(function(g){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let h;w.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window>"u"?g:window):m=>(h||(h=Promise.resolve())).then(m).catch(_=>setTimeout(()=>{throw _},0))}).call(this)}).call(this,typeof ve>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ve)},{}],14:[function(p,w){(function(g,h){(function(){var m=p("safe-buffer").Buffer,_=h.crypto||h.msCrypto;w.exports=_&&_.getRandomValues?function(o,r){if(o>4294967295)throw new RangeError("requested too many random bytes");var s=m.allocUnsafe(o);if(0<o)if(65536<o)for(var c=0;c<o;c+=65536)_.getRandomValues(s.slice(c,c+65536));else _.getRandomValues(s);return typeof r=="function"?g.nextTick(function(){r(null,s)}):s}:function(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}}).call(this)}).call(this,p("_process"),typeof ve>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ve)},{_process:12,"safe-buffer":30}],15:[function(p,w){function g(c,d){c.prototype=Object.create(d.prototype),c.prototype.constructor=c,c.__proto__=d}function h(c,d,E){function v(u,l,b){return typeof d=="string"?d:d(u,l,b)}E||(E=Error);var y=function(u){function l(b,O,S){return u.call(this,v(b,O,S))||this}return g(l,u),l}(E);y.prototype.name=E.name,y.prototype.code=c,s[c]=y}function m(c,d){if(Array.isArray(c)){var E=c.length;return c=c.map(function(v){return v+""}),2<E?"one of ".concat(d," ").concat(c.slice(0,E-1).join(", "),", or ")+c[E-1]:E===2?"one of ".concat(d," ").concat(c[0]," or ").concat(c[1]):"of ".concat(d," ").concat(c[0])}return"of ".concat(d," ").concat(c+"")}function _(c,d,E){return c.substr(!E||0>E?0:+E,d.length)===d}function o(c,d,E){return(E===void 0||E>c.length)&&(E=c.length),c.substring(E-d.length,E)===d}function r(c,d,E){return typeof E!="number"&&(E=0),!(E+d.length>c.length)&&c.indexOf(d,E)!==-1}var s={};h("ERR_INVALID_OPT_VALUE",function(c,d){return'The value "'+d+'" is invalid for option "'+c+'"'},TypeError),h("ERR_INVALID_ARG_TYPE",function(c,d,E){var v;typeof d=="string"&&_(d,"not ")?(v="must not be",d=d.replace(/^not /,"")):v="must be";var y;if(o(c," argument"))y="The ".concat(c," ").concat(v," ").concat(m(d,"type"));else{var u=r(c,".")?"property":"argument";y='The "'.concat(c,'" ').concat(u," ").concat(v," ").concat(m(d,"type"))}return y+=". Received type ".concat(typeof E),y},TypeError),h("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),h("ERR_METHOD_NOT_IMPLEMENTED",function(c){return"The "+c+" method is not implemented"}),h("ERR_STREAM_PREMATURE_CLOSE","Premature close"),h("ERR_STREAM_DESTROYED",function(c){return"Cannot call "+c+" after a stream was destroyed"}),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),h("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),h("ERR_STREAM_WRITE_AFTER_END","write after end"),h("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),h("ERR_UNKNOWN_ENCODING",function(c){return"Unknown encoding: "+c},TypeError),h("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),w.exports.codes=s},{}],16:[function(p,w){(function(g){(function(){function h(v){return this instanceof h?(r.call(this,v),s.call(this,v),this.allowHalfOpen=!0,void(v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",m))))):new h(v)}function m(){this._writableState.ended||g.nextTick(_,this)}function _(v){v.end()}var o=Object.keys||function(v){var y=[];for(var u in v)y.push(u);return y};w.exports=h;var r=p("./_stream_readable"),s=p("./_stream_writable");p("inherits")(h,r);for(var c,d=o(s.prototype),E=0;E<d.length;E++)c=d[E],h.prototype[c]||(h.prototype[c]=s.prototype[c]);Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=v,this._writableState.destroyed=v)}})}).call(this)}).call(this,p("_process"))},{"./_stream_readable":18,"./_stream_writable":20,_process:12,inherits:10}],17:[function(p,w){function g(m){return this instanceof g?void h.call(this,m):new g(m)}w.exports=g;var h=p("./_stream_transform");p("inherits")(g,h),g.prototype._transform=function(m,_,o){o(null,m)}},{"./_stream_transform":19,inherits:10}],18:[function(p,w){(function(g,h){(function(){function m(D){return H.from(D)}function _(D){return H.isBuffer(D)||D instanceof F}function o(D,f,T){return typeof D.prependListener=="function"?D.prependListener(f,T):void(D._events&&D._events[f]?Array.isArray(D._events[f])?D._events[f].unshift(T):D._events[f]=[T,D._events[f]]:D.on(f,T))}function r(D,f,T){nt=nt||p("./_stream_duplex"),D=D||{},typeof T!="boolean"&&(T=f instanceof nt),this.objectMode=!!D.objectMode,T&&(this.objectMode=this.objectMode||!!D.readableObjectMode),this.highWaterMark=ot(this,D,"readableHighWaterMark",T),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.destroyed=!1,this.defaultEncoding=D.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,D.encoding&&(!j&&(j=p("string_decoder/").StringDecoder),this.decoder=new j(D.encoding),this.encoding=D.encoding)}function s(D){if(nt=nt||p("./_stream_duplex"),!(this instanceof s))return new s(D);var f=this instanceof nt;this._readableState=new r(D,this,f),this.readable=!0,D&&(typeof D.read=="function"&&(this._read=D.read),typeof D.destroy=="function"&&(this._destroy=D.destroy)),P.call(this)}function c(D,f,T,R,$){z("readableAddChunk",f);var G=D._readableState;if(f===null)G.reading=!1,u(D,G);else{var Q;if($||(Q=E(G,f)),Q)lt(D,Q);else if(!(G.objectMode||f&&0<f.length))R||(G.reading=!1,O(D,G));else if(typeof f=="string"||G.objectMode||Object.getPrototypeOf(f)===H.prototype||(f=m(f)),R)G.endEmitted?lt(D,new et):d(D,G,f,!0);else if(G.ended)lt(D,new ht);else{if(G.destroyed)return!1;G.reading=!1,G.decoder&&!T?(f=G.decoder.write(f),G.objectMode||f.length!==0?d(D,G,f,!1):O(D,G)):d(D,G,f,!1)}}return!G.ended&&(G.length<G.highWaterMark||G.length===0)}function d(D,f,T,R){f.flowing&&f.length===0&&!f.sync?(f.awaitDrain=0,D.emit("data",T)):(f.length+=f.objectMode?1:T.length,R?f.buffer.unshift(T):f.buffer.push(T),f.needReadable&&l(D)),O(D,f)}function E(D,f){var T;return _(f)||typeof f=="string"||f===void 0||D.objectMode||(T=new ct("chunk",["string","Buffer","Uint8Array"],f)),T}function v(D){return 1073741824<=D?D=1073741824:(D--,D|=D>>>1,D|=D>>>2,D|=D>>>4,D|=D>>>8,D|=D>>>16,D++),D}function y(D,f){return 0>=D||f.length===0&&f.ended?0:f.objectMode?1:D===D?(D>f.highWaterMark&&(f.highWaterMark=v(D)),D<=f.length?D:f.ended?f.length:(f.needReadable=!0,0)):f.flowing&&f.length?f.buffer.head.data.length:f.length}function u(D,f){if(z("onEofChunk"),!f.ended){if(f.decoder){var T=f.decoder.end();T&&T.length&&(f.buffer.push(T),f.length+=f.objectMode?1:T.length)}f.ended=!0,f.sync?l(D):(f.needReadable=!1,!f.emittedReadable&&(f.emittedReadable=!0,b(D)))}}function l(D){var f=D._readableState;z("emitReadable",f.needReadable,f.emittedReadable),f.needReadable=!1,f.emittedReadable||(z("emitReadable",f.flowing),f.emittedReadable=!0,g.nextTick(b,D))}function b(D){var f=D._readableState;z("emitReadable_",f.destroyed,f.length,f.ended),!f.destroyed&&(f.length||f.ended)&&(D.emit("readable"),f.emittedReadable=!1),f.needReadable=!f.flowing&&!f.ended&&f.length<=f.highWaterMark,N(D)}function O(D,f){f.readingMore||(f.readingMore=!0,g.nextTick(S,D,f))}function S(D,f){for(;!f.reading&&!f.ended&&(f.length<f.highWaterMark||f.flowing&&f.length===0);){var T=f.length;if(z("maybeReadMore read 0"),D.read(0),T===f.length)break}f.readingMore=!1}function C(D){return function(){var f=D._readableState;z("pipeOnDrain",f.awaitDrain),f.awaitDrain&&f.awaitDrain--,f.awaitDrain===0&&V(D,"data")&&(f.flowing=!0,N(D))}}function L(D){var f=D._readableState;f.readableListening=0<D.listenerCount("readable"),f.resumeScheduled&&!f.paused?f.flowing=!0:0<D.listenerCount("data")&&D.resume()}function A(D){z("readable nexttick read 0"),D.read(0)}function k(D,f){f.resumeScheduled||(f.resumeScheduled=!0,g.nextTick(x,D,f))}function x(D,f){z("resume",f.reading),f.reading||D.read(0),f.resumeScheduled=!1,D.emit("resume"),N(D),f.flowing&&!f.reading&&D.read(0)}function N(D){var f=D._readableState;for(z("flow",f.flowing);f.flowing&&D.read()!==null;);}function M(D,f){if(f.length===0)return null;var T;return f.objectMode?T=f.buffer.shift():!D||D>=f.length?(T=f.decoder?f.buffer.join(""):f.buffer.length===1?f.buffer.first():f.buffer.concat(f.length),f.buffer.clear()):T=f.buffer.consume(D,f.decoder),T}function I(D){var f=D._readableState;z("endReadable",f.endEmitted),f.endEmitted||(f.ended=!0,g.nextTick(U,f,D))}function U(D,f){if(z("endReadableNT",D.endEmitted,D.length),!D.endEmitted&&D.length===0&&(D.endEmitted=!0,f.readable=!1,f.emit("end"),D.autoDestroy)){var T=f._writableState;(!T||T.autoDestroy&&T.finished)&&f.destroy()}}function Y(D,f){for(var T=0,R=D.length;T<R;T++)if(D[T]===f)return T;return-1}w.exports=s;var nt;s.ReadableState=r;var z;p("events").EventEmitter;var V=function(D,f){return D.listeners(f).length},P=p("./internal/streams/stream"),H=p("buffer").Buffer,F=h.Uint8Array||function(){},J=p("util");z=J&&J.debuglog?J.debuglog("stream"):function(){};var j,q,K,B=p("./internal/streams/buffer_list"),W=p("./internal/streams/destroy"),it=p("./internal/streams/state"),ot=it.getHighWaterMark,st=p("../errors").codes,ct=st.ERR_INVALID_ARG_TYPE,ht=st.ERR_STREAM_PUSH_AFTER_EOF,Z=st.ERR_METHOD_NOT_IMPLEMENTED,et=st.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;p("inherits")(s,P);var lt=W.errorOrDestroy,X=["error","close","destroy","pause","resume"];Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(D){this._readableState&&(this._readableState.destroyed=D)}}),s.prototype.destroy=W.destroy,s.prototype._undestroy=W.undestroy,s.prototype._destroy=function(D,f){f(D)},s.prototype.push=function(D,f){var T,R=this._readableState;return R.objectMode?T=!0:typeof D=="string"&&(f=f||R.defaultEncoding,f!==R.encoding&&(D=H.from(D,f),f=""),T=!0),c(this,D,f,!1,T)},s.prototype.unshift=function(D){return c(this,D,null,!0,!1)},s.prototype.isPaused=function(){return this._readableState.flowing===!1},s.prototype.setEncoding=function(D){j||(j=p("string_decoder/").StringDecoder);var f=new j(D);this._readableState.decoder=f,this._readableState.encoding=this._readableState.decoder.encoding;for(var T=this._readableState.buffer.head,R="";T!==null;)R+=f.write(T.data),T=T.next;return this._readableState.buffer.clear(),R!==""&&this._readableState.buffer.push(R),this._readableState.length=R.length,this},s.prototype.read=function(D){z("read",D),D=parseInt(D,10);var f=this._readableState,T=D;if(D!==0&&(f.emittedReadable=!1),D===0&&f.needReadable&&((f.highWaterMark===0?0<f.length:f.length>=f.highWaterMark)||f.ended))return z("read: emitReadable",f.length,f.ended),f.length===0&&f.ended?I(this):l(this),null;if(D=y(D,f),D===0&&f.ended)return f.length===0&&I(this),null;var R=f.needReadable;z("need readable",R),(f.length===0||f.length-D<f.highWaterMark)&&(R=!0,z("length less than watermark",R)),f.ended||f.reading?(R=!1,z("reading or ended",R)):R&&(z("do read"),f.reading=!0,f.sync=!0,f.length===0&&(f.needReadable=!0),this._read(f.highWaterMark),f.sync=!1,!f.reading&&(D=y(T,f)));var $;return $=0<D?M(D,f):null,$===null?(f.needReadable=f.length<=f.highWaterMark,D=0):(f.length-=D,f.awaitDrain=0),f.length===0&&(!f.ended&&(f.needReadable=!0),T!==D&&f.ended&&I(this)),$!==null&&this.emit("data",$),$},s.prototype._read=function(){lt(this,new Z("_read()"))},s.prototype.pipe=function(D,f){function T(Ae,Te){z("onunpipe"),Ae===_t&&Te&&Te.hasUnpiped===!1&&(Te.hasUnpiped=!0,$())}function R(){z("onend"),D.end()}function $(){z("cleanup"),D.removeListener("close",ft),D.removeListener("finish",gt),D.removeListener("drain",Yt),D.removeListener("error",Q),D.removeListener("unpipe",T),_t.removeListener("end",R),_t.removeListener("end",mt),_t.removeListener("data",G),ke=!0,yt.awaitDrain&&(!D._writableState||D._writableState.needDrain)&&Yt()}function G(Ae){z("ondata");var Te=D.write(Ae);z("dest.write",Te),Te===!1&&((yt.pipesCount===1&&yt.pipes===D||1<yt.pipesCount&&Y(yt.pipes,D)!==-1)&&!ke&&(z("false write response, pause",yt.awaitDrain),yt.awaitDrain++),_t.pause())}function Q(Ae){z("onerror",Ae),mt(),D.removeListener("error",Q),V(D,"error")===0&&lt(D,Ae)}function ft(){D.removeListener("finish",gt),mt()}function gt(){z("onfinish"),D.removeListener("close",ft),mt()}function mt(){z("unpipe"),_t.unpipe(D)}var _t=this,yt=this._readableState;switch(yt.pipesCount){case 0:yt.pipes=D;break;case 1:yt.pipes=[yt.pipes,D];break;default:yt.pipes.push(D)}yt.pipesCount+=1,z("pipe count=%d opts=%j",yt.pipesCount,f);var qt=(!f||f.end!==!1)&&D!==g.stdout&&D!==g.stderr,Rt=qt?R:mt;yt.endEmitted?g.nextTick(Rt):_t.once("end",Rt),D.on("unpipe",T);var Yt=C(_t);D.on("drain",Yt);var ke=!1;return _t.on("data",G),o(D,"error",Q),D.once("close",ft),D.once("finish",gt),D.emit("pipe",_t),yt.flowing||(z("pipe resume"),_t.resume()),D},s.prototype.unpipe=function(D){var f=this._readableState,T={hasUnpiped:!1};if(f.pipesCount===0)return this;if(f.pipesCount===1)return D&&D!==f.pipes?this:(D||(D=f.pipes),f.pipes=null,f.pipesCount=0,f.flowing=!1,D&&D.emit("unpipe",this,T),this);if(!D){var R=f.pipes,$=f.pipesCount;f.pipes=null,f.pipesCount=0,f.flowing=!1;for(var G=0;G<$;G++)R[G].emit("unpipe",this,{hasUnpiped:!1});return this}var Q=Y(f.pipes,D);return Q===-1?this:(f.pipes.splice(Q,1),f.pipesCount-=1,f.pipesCount===1&&(f.pipes=f.pipes[0]),D.emit("unpipe",this,T),this)},s.prototype.on=function(D,f){var T=P.prototype.on.call(this,D,f),R=this._readableState;return D==="data"?(R.readableListening=0<this.listenerCount("readable"),R.flowing!==!1&&this.resume()):D=="readable"&&!R.endEmitted&&!R.readableListening&&(R.readableListening=R.needReadable=!0,R.flowing=!1,R.emittedReadable=!1,z("on readable",R.length,R.reading),R.length?l(this):!R.reading&&g.nextTick(A,this)),T},s.prototype.addListener=s.prototype.on,s.prototype.removeListener=function(D,f){var T=P.prototype.removeListener.call(this,D,f);return D==="readable"&&g.nextTick(L,this),T},s.prototype.removeAllListeners=function(D){var f=P.prototype.removeAllListeners.apply(this,arguments);return(D==="readable"||D===void 0)&&g.nextTick(L,this),f},s.prototype.resume=function(){var D=this._readableState;return D.flowing||(z("resume"),D.flowing=!D.readableListening,k(this,D)),D.paused=!1,this},s.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},s.prototype.wrap=function(D){var f=this,T=this._readableState,R=!1;for(var $ in D.on("end",function(){if(z("wrapped end"),T.decoder&&!T.ended){var Q=T.decoder.end();Q&&Q.length&&f.push(Q)}f.push(null)}),D.on("data",function(Q){if(z("wrapped data"),T.decoder&&(Q=T.decoder.write(Q)),!(T.objectMode&&Q==null)&&(T.objectMode||Q&&Q.length)){var ft=f.push(Q);ft||(R=!0,D.pause())}}),D)this[$]===void 0&&typeof D[$]=="function"&&(this[$]=function(Q){return function(){return D[Q].apply(D,arguments)}}($));for(var G=0;G<X.length;G++)D.on(X[G],this.emit.bind(this,X[G]));return this._read=function(Q){z("wrapped _read",Q),R&&(R=!1,D.resume())},this},typeof Symbol=="function"&&(s.prototype[Symbol.asyncIterator]=function(){return q===void 0&&(q=p("./internal/streams/async_iterator")),q(this)}),Object.defineProperty(s.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(s.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(s.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(D){this._readableState&&(this._readableState.flowing=D)}}),s._fromList=M,Object.defineProperty(s.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(s.from=function(D,f){return K===void 0&&(K=p("./internal/streams/from")),K(s,D,f)})}).call(this)}).call(this,p("_process"),typeof ve>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ve)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/async_iterator":21,"./internal/streams/buffer_list":22,"./internal/streams/destroy":23,"./internal/streams/from":25,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,events:7,inherits:10,"string_decoder/":31,util:2}],19:[function(p,w){function g(v,y){var u=this._transformState;u.transforming=!1;var l=u.writecb;if(l===null)return this.emit("error",new s);u.writechunk=null,u.writecb=null,y!=null&&this.push(y),l(v);var b=this._readableState;b.reading=!1,(b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}function h(v){return this instanceof h?(E.call(this,v),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),void this.on("prefinish",m)):new h(v)}function m(){var v=this;typeof this._flush!="function"||this._readableState.destroyed?_(this,null,null):this._flush(function(y,u){_(v,y,u)})}function _(v,y,u){if(y)return v.emit("error",y);if(u!=null&&v.push(u),v._writableState.length)throw new d;if(v._transformState.transforming)throw new c;return v.push(null)}w.exports=h;var o=p("../errors").codes,r=o.ERR_METHOD_NOT_IMPLEMENTED,s=o.ERR_MULTIPLE_CALLBACK,c=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,d=o.ERR_TRANSFORM_WITH_LENGTH_0,E=p("./_stream_duplex");p("inherits")(h,E),h.prototype.push=function(v,y){return this._transformState.needTransform=!1,E.prototype.push.call(this,v,y)},h.prototype._transform=function(v,y,u){u(new r("_transform()"))},h.prototype._write=function(v,y,u){var l=this._transformState;if(l.writecb=u,l.writechunk=v,l.writeencoding=y,!l.transforming){var b=this._readableState;(l.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},h.prototype._read=function(){var v=this._transformState;v.writechunk===null||v.transforming?v.needTransform=!0:(v.transforming=!0,this._transform(v.writechunk,v.writeencoding,v.afterTransform))},h.prototype._destroy=function(v,y){E.prototype._destroy.call(this,v,function(u){y(u)})}},{"../errors":15,"./_stream_duplex":16,inherits:10}],20:[function(p,w){(function(g,h){(function(){function m(Z){var et=this;this.next=null,this.entry=null,this.finish=function(){I(et,Z)}}function _(Z){return z.from(Z)}function o(Z){return z.isBuffer(Z)||Z instanceof V}function r(){}function s(Z,et,lt){U=U||p("./_stream_duplex"),Z=Z||{},typeof lt!="boolean"&&(lt=et instanceof U),this.objectMode=!!Z.objectMode,lt&&(this.objectMode=this.objectMode||!!Z.writableObjectMode),this.highWaterMark=F(this,Z,"writableHighWaterMark",lt),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var X=Z.decodeStrings===!1;this.decodeStrings=!X,this.defaultEncoding=Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(D){O(et,D)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Z.emitClose!==!1,this.autoDestroy=!!Z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new m(this)}function c(Z){U=U||p("./_stream_duplex");var et=this instanceof U;return et||ht.call(c,this)?(this._writableState=new s(Z,this,et),this.writable=!0,Z&&(typeof Z.write=="function"&&(this._write=Z.write),typeof Z.writev=="function"&&(this._writev=Z.writev),typeof Z.destroy=="function"&&(this._destroy=Z.destroy),typeof Z.final=="function"&&(this._final=Z.final)),void nt.call(this)):new c(Z)}function d(Z,et){var lt=new ot;ct(Z,lt),g.nextTick(et,lt)}function E(Z,et,lt,X){var D;return lt===null?D=new it:typeof lt!="string"&&!et.objectMode&&(D=new j("chunk",["string","Buffer"],lt)),!D||(ct(Z,D),g.nextTick(X,D),!1)}function v(Z,et,lt){return Z.objectMode||Z.decodeStrings===!1||typeof et!="string"||(et=z.from(et,lt)),et}function y(Z,et,lt,X,D,f){if(!lt){var T=v(et,X,D);X!==T&&(lt=!0,D="buffer",X=T)}var R=et.objectMode?1:X.length;et.length+=R;var $=et.length<et.highWaterMark;if($||(et.needDrain=!0),et.writing||et.corked){var G=et.lastBufferedRequest;et.lastBufferedRequest={chunk:X,encoding:D,isBuf:lt,callback:f,next:null},G?G.next=et.lastBufferedRequest:et.bufferedRequest=et.lastBufferedRequest,et.bufferedRequestCount+=1}else u(Z,et,!1,R,X,D,f);return $}function u(Z,et,lt,X,D,f,T){et.writelen=X,et.writecb=T,et.writing=!0,et.sync=!0,et.destroyed?et.onwrite(new W("write")):lt?Z._writev(D,et.onwrite):Z._write(D,f,et.onwrite),et.sync=!1}function l(Z,et,lt,X,D){--et.pendingcb,lt?(g.nextTick(D,X),g.nextTick(N,Z,et),Z._writableState.errorEmitted=!0,ct(Z,X)):(D(X),Z._writableState.errorEmitted=!0,ct(Z,X),N(Z,et))}function b(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}function O(Z,et){var lt=Z._writableState,X=lt.sync,D=lt.writecb;if(typeof D!="function")throw new K;if(b(lt),et)l(Z,lt,X,et,D);else{var f=A(lt)||Z.destroyed;f||lt.corked||lt.bufferProcessing||!lt.bufferedRequest||L(Z,lt),X?g.nextTick(S,Z,lt,f,D):S(Z,lt,f,D)}}function S(Z,et,lt,X){lt||C(Z,et),et.pendingcb--,X(),N(Z,et)}function C(Z,et){et.length===0&&et.needDrain&&(et.needDrain=!1,Z.emit("drain"))}function L(Z,et){et.bufferProcessing=!0;var lt=et.bufferedRequest;if(Z._writev&&lt&&lt.next){var X=et.bufferedRequestCount,D=Array(X),f=et.corkedRequestsFree;f.entry=lt;for(var T=0,R=!0;lt;)D[T]=lt,lt.isBuf||(R=!1),lt=lt.next,T+=1;D.allBuffers=R,u(Z,et,!0,et.length,D,"",f.finish),et.pendingcb++,et.lastBufferedRequest=null,f.next?(et.corkedRequestsFree=f.next,f.next=null):et.corkedRequestsFree=new m(et),et.bufferedRequestCount=0}else{for(;lt;){var $=lt.chunk,G=lt.encoding,Q=lt.callback,ft=et.objectMode?1:$.length;if(u(Z,et,!1,ft,$,G,Q),lt=lt.next,et.bufferedRequestCount--,et.writing)break}lt===null&&(et.lastBufferedRequest=null)}et.bufferedRequest=lt,et.bufferProcessing=!1}function A(Z){return Z.ending&&Z.length===0&&Z.bufferedRequest===null&&!Z.finished&&!Z.writing}function k(Z,et){Z._final(function(lt){et.pendingcb--,lt&&ct(Z,lt),et.prefinished=!0,Z.emit("prefinish"),N(Z,et)})}function x(Z,et){et.prefinished||et.finalCalled||(typeof Z._final!="function"||et.destroyed?(et.prefinished=!0,Z.emit("prefinish")):(et.pendingcb++,et.finalCalled=!0,g.nextTick(k,Z,et)))}function N(Z,et){var lt=A(et);if(lt&&(x(Z,et),et.pendingcb===0&&(et.finished=!0,Z.emit("finish"),et.autoDestroy))){var X=Z._readableState;(!X||X.autoDestroy&&X.endEmitted)&&Z.destroy()}return lt}function M(Z,et,lt){et.ending=!0,N(Z,et),lt&&(et.finished?g.nextTick(lt):Z.once("finish",lt)),et.ended=!0,Z.writable=!1}function I(Z,et,lt){var X=Z.entry;for(Z.entry=null;X;){var D=X.callback;et.pendingcb--,D(lt),X=X.next}et.corkedRequestsFree.next=Z}w.exports=c;var U;c.WritableState=s;var Y={deprecate:p("util-deprecate")},nt=p("./internal/streams/stream"),z=p("buffer").Buffer,V=h.Uint8Array||function(){},P=p("./internal/streams/destroy"),H=p("./internal/streams/state"),F=H.getHighWaterMark,J=p("../errors").codes,j=J.ERR_INVALID_ARG_TYPE,q=J.ERR_METHOD_NOT_IMPLEMENTED,K=J.ERR_MULTIPLE_CALLBACK,B=J.ERR_STREAM_CANNOT_PIPE,W=J.ERR_STREAM_DESTROYED,it=J.ERR_STREAM_NULL_VALUES,ot=J.ERR_STREAM_WRITE_AFTER_END,st=J.ERR_UNKNOWN_ENCODING,ct=P.errorOrDestroy;p("inherits")(c,nt),s.prototype.getBuffer=function(){for(var Z=this.bufferedRequest,et=[];Z;)et.push(Z),Z=Z.next;return et},function(){try{Object.defineProperty(s.prototype,"buffer",{get:Y.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var ht;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ht=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(Z){return!!ht.call(this,Z)||this===c&&Z&&Z._writableState instanceof s}})):ht=function(Z){return Z instanceof this},c.prototype.pipe=function(){ct(this,new B)},c.prototype.write=function(Z,et,lt){var X=this._writableState,D=!1,f=!X.objectMode&&o(Z);return f&&!z.isBuffer(Z)&&(Z=_(Z)),typeof et=="function"&&(lt=et,et=null),f?et="buffer":!et&&(et=X.defaultEncoding),typeof lt!="function"&&(lt=r),X.ending?d(this,lt):(f||E(this,X,Z,lt))&&(X.pendingcb++,D=y(this,X,f,Z,et,lt)),D},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var Z=this._writableState;Z.corked&&(Z.corked--,!Z.writing&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&L(this,Z))},c.prototype.setDefaultEncoding=function(Z){if(typeof Z=="string"&&(Z=Z.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Z+"").toLowerCase())))throw new st(Z);return this._writableState.defaultEncoding=Z,this},Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(Z,et,lt){lt(new q("_write()"))},c.prototype._writev=null,c.prototype.end=function(Z,et,lt){var X=this._writableState;return typeof Z=="function"?(lt=Z,Z=null,et=null):typeof et=="function"&&(lt=et,et=null),Z!=null&&this.write(Z,et),X.corked&&(X.corked=1,this.uncork()),X.ending||M(this,X,lt),this},Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(Z){this._writableState&&(this._writableState.destroyed=Z)}}),c.prototype.destroy=P.destroy,c.prototype._undestroy=P.undestroy,c.prototype._destroy=function(Z,et){et(Z)}}).call(this)}).call(this,p("_process"),typeof ve>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ve)},{"../errors":15,"./_stream_duplex":16,"./internal/streams/destroy":23,"./internal/streams/state":27,"./internal/streams/stream":28,_process:12,buffer:3,inherits:10,"util-deprecate":32}],21:[function(p,w){(function(g){(function(){function h(C,L,A){return L in C?Object.defineProperty(C,L,{value:A,enumerable:!0,configurable:!0,writable:!0}):C[L]=A,C}function m(C,L){return{value:C,done:L}}function _(C){var L=C[d];if(L!==null){var A=C[b].read();A!==null&&(C[u]=null,C[d]=null,C[E]=null,L(m(A,!1)))}}function o(C){g.nextTick(_,C)}function r(C,L){return function(A,k){C.then(function(){return L[y]?void A(m(void 0,!0)):void L[l](A,k)},k)}}var s,c=p("./end-of-stream"),d=Symbol("lastResolve"),E=Symbol("lastReject"),v=Symbol("error"),y=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),b=Symbol("stream"),O=Object.getPrototypeOf(function(){}),S=Object.setPrototypeOf((s={get stream(){return this[b]},next:function(){var C=this,L=this[v];if(L!==null)return Promise.reject(L);if(this[y])return Promise.resolve(m(void 0,!0));if(this[b].destroyed)return new Promise(function(N,M){g.nextTick(function(){C[v]?M(C[v]):N(m(void 0,!0))})});var A,k=this[u];if(k)A=new Promise(r(k,this));else{var x=this[b].read();if(x!==null)return Promise.resolve(m(x,!1));A=new Promise(this[l])}return this[u]=A,A}},h(s,Symbol.asyncIterator,function(){return this}),h(s,"return",function(){var C=this;return new Promise(function(L,A){C[b].destroy(null,function(k){return k?void A(k):void L(m(void 0,!0))})})}),s),O);w.exports=function(C){var L,A=Object.create(S,(L={},h(L,b,{value:C,writable:!0}),h(L,d,{value:null,writable:!0}),h(L,E,{value:null,writable:!0}),h(L,v,{value:null,writable:!0}),h(L,y,{value:C._readableState.endEmitted,writable:!0}),h(L,l,{value:function(k,x){var N=A[b].read();N?(A[u]=null,A[d]=null,A[E]=null,k(m(N,!1))):(A[d]=k,A[E]=x)},writable:!0}),L));return A[u]=null,c(C,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var x=A[E];return x!==null&&(A[u]=null,A[d]=null,A[E]=null,x(k)),void(A[v]=k)}var N=A[d];N!==null&&(A[u]=null,A[d]=null,A[E]=null,N(m(void 0,!0))),A[y]=!0}),C.on("readable",o.bind(null,A)),A}}).call(this)}).call(this,p("_process"))},{"./end-of-stream":24,_process:12}],22:[function(p,w){function g(u,l){var b=Object.keys(u);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(u);l&&(O=O.filter(function(S){return Object.getOwnPropertyDescriptor(u,S).enumerable})),b.push.apply(b,O)}return b}function h(u){for(var l,b=1;b<arguments.length;b++)l=arguments[b]==null?{}:arguments[b],b%2?g(Object(l),!0).forEach(function(O){m(u,O,l[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(l)):g(Object(l)).forEach(function(O){Object.defineProperty(u,O,Object.getOwnPropertyDescriptor(l,O))});return u}function m(u,l,b){return l in u?Object.defineProperty(u,l,{value:b,enumerable:!0,configurable:!0,writable:!0}):u[l]=b,u}function _(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}function o(u,l){for(var b,O=0;O<l.length;O++)b=l[O],b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(u,b.key,b)}function r(u,l,b){return l&&o(u.prototype,l),b&&o(u,b),u}function s(u,l,b){d.prototype.copy.call(u,l,b)}var c=p("buffer"),d=c.Buffer,E=p("util"),v=E.inspect,y=v&&v.custom||"inspect";w.exports=function(){function u(){_(this,u),this.head=null,this.tail=null,this.length=0}return r(u,[{key:"push",value:function(l){var b={data:l,next:null};0<this.length?this.tail.next=b:this.head=b,this.tail=b,++this.length}},{key:"unshift",value:function(l){var b={data:l,next:this.head};this.length===0&&(this.tail=b),this.head=b,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.head=this.length===1?this.tail=null:this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var b=this.head,O=""+b.data;b=b.next;)O+=l+b.data;return O}},{key:"concat",value:function(l){if(this.length===0)return d.alloc(0);for(var b=d.allocUnsafe(l>>>0),O=this.head,S=0;O;)s(O.data,b,S),S+=O.data.length,O=O.next;return b}},{key:"consume",value:function(l,b){var O;return l<this.head.data.length?(O=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):l===this.head.data.length?O=this.shift():O=b?this._getString(l):this._getBuffer(l),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var b=this.head,O=1,S=b.data;for(l-=S.length;b=b.next;){var C=b.data,L=l>C.length?C.length:l;if(S+=L===C.length?C:C.slice(0,l),l-=L,l===0){L===C.length?(++O,this.head=b.next?b.next:this.tail=null):(this.head=b,b.data=C.slice(L));break}++O}return this.length-=O,S}},{key:"_getBuffer",value:function(l){var b=d.allocUnsafe(l),O=this.head,S=1;for(O.data.copy(b),l-=O.data.length;O=O.next;){var C=O.data,L=l>C.length?C.length:l;if(C.copy(b,b.length-l,0,L),l-=L,l===0){L===C.length?(++S,this.head=O.next?O.next:this.tail=null):(this.head=O,O.data=C.slice(L));break}++S}return this.length-=S,b}},{key:y,value:function(l,b){return v(this,h({},b,{depth:0,customInspect:!1}))}}]),u}()},{buffer:3,util:2}],23:[function(p,w){(function(g){(function(){function h(o,r){_(o,r),m(o)}function m(o){o._writableState&&!o._writableState.emitClose||o._readableState&&!o._readableState.emitClose||o.emit("close")}function _(o,r){o.emit("error",r)}w.exports={destroy:function(o,r){var s=this,c=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return c||d?(r?r(o):o&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,g.nextTick(_,this,o)):g.nextTick(_,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(E){!r&&E?s._writableState?s._writableState.errorEmitted?g.nextTick(m,s):(s._writableState.errorEmitted=!0,g.nextTick(h,s,E)):g.nextTick(h,s,E):r?(g.nextTick(m,s),r(E)):g.nextTick(m,s)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(o,r){var s=o._readableState,c=o._writableState;s&&s.autoDestroy||c&&c.autoDestroy?o.destroy(r):o.emit("error",r)}}}).call(this)}).call(this,p("_process"))},{_process:12}],24:[function(p,w){function g(r){var s=!1;return function(){if(!s){s=!0;for(var c=arguments.length,d=Array(c),E=0;E<c;E++)d[E]=arguments[E];r.apply(this,d)}}}function h(){}function m(r){return r.setHeader&&typeof r.abort=="function"}function _(r,s,c){if(typeof s=="function")return _(r,null,s);s||(s={}),c=g(c||h);var d=s.readable||s.readable!==!1&&r.readable,E=s.writable||s.writable!==!1&&r.writable,v=function(){r.writable||u()},y=r._writableState&&r._writableState.finished,u=function(){E=!1,y=!0,d||c.call(r)},l=r._readableState&&r._readableState.endEmitted,b=function(){d=!1,l=!0,E||c.call(r)},O=function(L){c.call(r,L)},S=function(){var L;return d&&!l?(r._readableState&&r._readableState.ended||(L=new o),c.call(r,L)):E&&!y?(r._writableState&&r._writableState.ended||(L=new o),c.call(r,L)):void 0},C=function(){r.req.on("finish",u)};return m(r)?(r.on("complete",u),r.on("abort",S),r.req?C():r.on("request",C)):E&&!r._writableState&&(r.on("end",v),r.on("close",v)),r.on("end",b),r.on("finish",u),s.error!==!1&&r.on("error",O),r.on("close",S),function(){r.removeListener("complete",u),r.removeListener("abort",S),r.removeListener("request",C),r.req&&r.req.removeListener("finish",u),r.removeListener("end",v),r.removeListener("close",v),r.removeListener("finish",u),r.removeListener("end",b),r.removeListener("error",O),r.removeListener("close",S)}}var o=p("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;w.exports=_},{"../../../errors":15}],25:[function(p,w){w.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],26:[function(p,w){function g(y){var u=!1;return function(){u||(u=!0,y.apply(void 0,arguments))}}function h(y){if(y)throw y}function m(y){return y.setHeader&&typeof y.abort=="function"}function _(y,u,l,b){b=g(b);var O=!1;y.on("close",function(){O=!0}),c===void 0&&(c=p("./end-of-stream")),c(y,{readable:u,writable:l},function(C){return C?b(C):(O=!0,void b())});var S=!1;return function(C){if(!O)return S?void 0:(S=!0,m(y)?y.abort():typeof y.destroy=="function"?y.destroy():void b(C||new v("pipe")))}}function o(y){y()}function r(y,u){return y.pipe(u)}function s(y){return y.length&&typeof y[y.length-1]=="function"?y.pop():h}var c,d=p("../../../errors").codes,E=d.ERR_MISSING_ARGS,v=d.ERR_STREAM_DESTROYED;w.exports=function(){for(var y=arguments.length,u=Array(y),l=0;l<y;l++)u[l]=arguments[l];var b=s(u);if(Array.isArray(u[0])&&(u=u[0]),2>u.length)throw new E("streams");var O,S=u.map(function(C,L){var A=L<u.length-1;return _(C,A,0<L,function(k){O||(O=k),k&&S.forEach(o),A||(S.forEach(o),b(O))})});return u.reduce(r)}},{"../../../errors":15,"./end-of-stream":24}],27:[function(p,w){function g(m,_,o){return m.highWaterMark==null?_?m[o]:null:m.highWaterMark}var h=p("../../../errors").codes.ERR_INVALID_OPT_VALUE;w.exports={getHighWaterMark:function(m,_,o,r){var s=g(_,r,o);if(s!=null){if(!(isFinite(s)&&e(s)===s)||0>s){var c=r?o:"highWaterMark";throw new h(c,s)}return e(s)}return m.objectMode?16:16384}}},{"../../../errors":15}],28:[function(p,w){w.exports=p("events").EventEmitter},{events:7}],29:[function(p,w,g){g=w.exports=p("./lib/_stream_readable.js"),g.Stream=g,g.Readable=g,g.Writable=p("./lib/_stream_writable.js"),g.Duplex=p("./lib/_stream_duplex.js"),g.Transform=p("./lib/_stream_transform.js"),g.PassThrough=p("./lib/_stream_passthrough.js"),g.finished=p("./lib/internal/streams/end-of-stream.js"),g.pipeline=p("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,"./lib/internal/streams/end-of-stream.js":24,"./lib/internal/streams/pipeline.js":26}],30:[function(p,w,g){function h(r,s){for(var c in r)s[c]=r[c]}function m(r,s,c){return o(r,s,c)}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var _=p("buffer"),o=_.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?w.exports=_:(h(_,g),g.Buffer=m),m.prototype=Object.create(o.prototype),h(o,m),m.from=function(r,s,c){if(typeof r=="number")throw new TypeError("Argument must not be a number");return o(r,s,c)},m.alloc=function(r,s,c){if(typeof r!="number")throw new TypeError("Argument must be a number");var d=o(r);return s===void 0?d.fill(0):typeof c=="string"?d.fill(s,c):d.fill(s),d},m.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return o(r)},m.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(r)}},{buffer:3}],31:[function(p,w,g){function h(S){if(!S)return"utf8";for(var C;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(C)return;S=(""+S).toLowerCase(),C=!0}}function m(S){var C=h(S);if(typeof C!="string"&&(b.isEncoding===O||!O(S)))throw new Error("Unknown encoding: "+S);return C||S}function _(S){this.encoding=m(S);var C;switch(this.encoding){case"utf16le":this.text=d,this.end=E,C=4;break;case"utf8":this.fillLast=c,C=4;break;case"base64":this.text=v,this.end=y,C=3;break;default:return this.write=u,void(this.end=l)}this.lastNeed=0,this.lastTotal=0,this.lastChar=b.allocUnsafe(C)}function o(S){return 127>=S?0:S>>5==6?2:S>>4==14?3:S>>3==30?4:S>>6==2?-1:-2}function r(S,C,L){var A=C.length-1;if(A<L)return 0;var k=o(C[A]);return 0<=k?(0<k&&(S.lastNeed=k-1),k):--A<L||k===-2?0:(k=o(C[A]),0<=k?(0<k&&(S.lastNeed=k-2),k):--A<L||k===-2?0:(k=o(C[A]),0<=k?(0<k&&(k===2?k=0:S.lastNeed=k-3),k):0))}function s(S,C){if((192&C[0])!=128)return S.lastNeed=0,"�";if(1<S.lastNeed&&1<C.length){if((192&C[1])!=128)return S.lastNeed=1,"�";if(2<S.lastNeed&&2<C.length&&(192&C[2])!=128)return S.lastNeed=2,"�"}}function c(S){var C=this.lastTotal-this.lastNeed,L=s(this,S);return L===void 0?this.lastNeed<=S.length?(S.copy(this.lastChar,C,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(S.copy(this.lastChar,C,0,S.length),void(this.lastNeed-=S.length)):L}function d(S,C){if((S.length-C)%2==0){var L=S.toString("utf16le",C);if(L){var A=L.charCodeAt(L.length-1);if(55296<=A&&56319>=A)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",C,S.length-1)}function E(S){var C=S&&S.length?this.write(S):"";if(this.lastNeed){var L=this.lastTotal-this.lastNeed;return C+this.lastChar.toString("utf16le",0,L)}return C}function v(S,C){var L=(S.length-C)%3;return L==0?S.toString("base64",C):(this.lastNeed=3-L,this.lastTotal=3,L==1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",C,S.length-L))}function y(S){var C=S&&S.length?this.write(S):"";return this.lastNeed?C+this.lastChar.toString("base64",0,3-this.lastNeed):C}function u(S){return S.toString(this.encoding)}function l(S){return S&&S.length?this.write(S):""}var b=p("safe-buffer").Buffer,O=b.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};g.StringDecoder=_,_.prototype.write=function(S){if(S.length===0)return"";var C,L;if(this.lastNeed){if(C=this.fillLast(S),C===void 0)return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<S.length?C?C+this.text(S,L):this.text(S,L):C||""},_.prototype.end=function(S){var C=S&&S.length?this.write(S):"";return this.lastNeed?C+"�":C},_.prototype.text=function(S,C){var L=r(this,S,C);if(!this.lastNeed)return S.toString("utf8",C);this.lastTotal=L;var A=S.length-(L-this.lastNeed);return S.copy(this.lastChar,0,A),S.toString("utf8",C,A)},_.prototype.fillLast=function(S){return this.lastNeed<=S.length?(S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),void(this.lastNeed-=S.length))}},{"safe-buffer":30}],32:[function(p,w){(function(g){(function(){function h(m){try{if(!g.localStorage)return!1}catch{return!1}var _=g.localStorage[m];return _!=null&&(_+"").toLowerCase()==="true"}w.exports=function(m,_){function o(){if(!r){if(h("throwDeprecation"))throw new Error(_);h("traceDeprecation")?console.trace(_):console.warn(_),r=!0}return m.apply(this,arguments)}if(h("noDeprecation"))return m;var r=!1;return o}}).call(this)}).call(this,typeof ve>"u"?typeof self>"u"?typeof window>"u"?{}:window:self:ve)},{}],"/":[function(p,w){function g(y){return y.replace(/a=ice-options:trickle\s\n/g,"")}function h(y){console.warn(y)}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const m=p("debug")("simple-peer"),_=p("get-browser-rtc"),o=p("randombytes"),r=p("readable-stream"),s=p("queue-microtask"),c=p("err-code"),{Buffer:d}=p("buffer"),E=65536;class v extends r.Duplex{constructor(u){if(u=Object.assign({allowHalfOpen:!1},u),super(u),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",u),this.channelName=u.initiator?u.channelName||o(20).toString("hex"):null,this.initiator=u.initiator||!1,this.channelConfig=u.channelConfig||v.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},v.config,u.config),this.offerOptions=u.offerOptions||{},this.answerOptions=u.answerOptions||{},this.sdpTransform=u.sdpTransform||(l=>l),this.streams=u.streams||(u.stream?[u.stream]:[]),this.trickle=u.trickle===void 0||u.trickle,this.allowHalfTrickle=u.allowHalfTrickle!==void 0&&u.allowHalfTrickle,this.iceCompleteTimeout=u.iceCompleteTimeout||5e3,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=u.wrtc&&typeof u.wrtc=="object"?u.wrtc:_(),!this._wrtc)throw c(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(l){return void this.destroy(c(l,"ERR_PC_CONSTRUCTOR"))}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=l=>{this._onIceCandidate(l)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(l=>{this.destroy(c(l,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=l=>{this._setupData(l)},this.streams&&this.streams.forEach(l=>{this.addStream(l)}),this._pc.ontrack=l=>{this._onTrack(l)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(u){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof u=="string")try{u=JSON.parse(u)}catch{u={}}this._debug("signal()"),u.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),u.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(u.transceiverRequest.kind,u.transceiverRequest.init)),u.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(u.candidate):this._pendingCandidates.push(u.candidate)),u.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(u)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(l=>{this._addIceCandidate(l)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(l=>{this.destroy(c(l,"ERR_SET_REMOTE_DESCRIPTION"))}),u.sdp||u.candidate||u.renegotiate||u.transceiverRequest||this.destroy(c(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(u){const l=new this._wrtc.RTCIceCandidate(u);this._pc.addIceCandidate(l).catch(b=>{!l.address||l.address.endsWith(".local")?h("Ignoring unsupported ICE candidate."):this.destroy(c(b,"ERR_ADD_ICE_CANDIDATE"))})}send(u){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(u)}}addTransceiver(u,l){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(u,l),this._needsNegotiation()}catch(b){this.destroy(c(b,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:u,init:l}})}}addStream(u){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),u.getTracks().forEach(l=>{this.addTrack(l,u)})}}addTrack(u,l){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const b=this._senderMap.get(u)||new Map;let O=b.get(l);if(!O)O=this._pc.addTrack(u,l),b.set(l,O),this._senderMap.set(u,b),this._needsNegotiation();else throw O.removed?c(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):c(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(u,l,b){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const O=this._senderMap.get(u),S=O?O.get(b):null;if(!S)throw c(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");l&&this._senderMap.set(l,O),S.replaceTrack==null?this.destroy(c(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK")):S.replaceTrack(l)}removeTrack(u,l){if(this.destroying)return;if(this.destroyed)throw c(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const b=this._senderMap.get(u),O=b?b.get(l):null;if(!O)throw c(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{O.removed=!0,this._pc.removeTrack(O)}catch(S){S.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(O):this.destroy(c(S,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(u){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),u.getTracks().forEach(l=>{this.removeTrack(l,u)})}}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,s(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw c(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(u){this._destroy(u,()=>{})}_destroy(u,l){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",u&&(u.message||u)),s(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",u&&(u.message||u)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,u&&this.emit("error",u),this.emit("close"),l()}))}_setupData(u){if(!u.channel)return this.destroy(c(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=u.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=E),this.channelName=this._channel.label,this._channel.onmessage=b=>{this._onChannelMessage(b)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=b=>{const O=b.error instanceof Error?b.error:new Error(`Datachannel error: ${b.message} ${b.filename}:${b.lineno}:${b.colno}`);this.destroy(c(O,"ERR_DATA_CHANNEL"))};let l=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(l&&this._onChannelClose(),l=!0):l=!1},5e3)}_read(){}_write(u,l,b){if(this.destroyed)return b(c(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(u)}catch(O){return this.destroy(c(O,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>E?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=b):b(null)}else this._debug("write before connect"),this._chunk=u,this._cb=b}_onFinish(){if(!this.destroyed){const u=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?u():this.once("connect",u)}}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(u=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(u.sdp=g(u.sdp)),u.sdp=this.sdpTransform(u.sdp);const l=()=>{if(!this.destroyed){const b=this._pc.localDescription||u;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp})}};this._pc.setLocalDescription(u).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?l():this.once("_iceComplete",l))}).catch(b=>{this.destroy(c(b,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(u=>{this.destroy(c(u,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(u=>{u.mid||!u.sender.track||u.requested||(u.requested=!0,this.addTransceiver(u.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(u=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(u.sdp=g(u.sdp)),u.sdp=this.sdpTransform(u.sdp);const l=()=>{if(!this.destroyed){const b=this._pc.localDescription||u;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(u).then(()=>{this.destroyed||(this.trickle||this._iceComplete?l():this.once("_iceComplete",l))}).catch(b=>{this.destroy(c(b,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(u=>{this.destroy(c(u,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(c(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const u=this._pc.iceConnectionState,l=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",u,l),this.emit("iceStateChange",u,l),(u==="connected"||u==="completed")&&(this._pcReady=!0,this._maybeReady()),u==="failed"&&this.destroy(c(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),u==="closed"&&this.destroy(c(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(u){const l=b=>(Object.prototype.toString.call(b.values)==="[object Array]"&&b.values.forEach(O=>{Object.assign(b,O)}),b);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(b=>{const O=[];b.forEach(S=>{O.push(l(S))}),u(null,O)},b=>u(b)):0<this._pc.getStats.length?this._pc.getStats(b=>{if(this.destroyed)return;const O=[];b.result().forEach(S=>{const C={};S.names().forEach(L=>{C[L]=S.stat(L)}),C.id=S.id,C.type=S.type,C.timestamp=S.timestamp,O.push(l(C))}),u(null,O)},b=>u(b)):u(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const u=()=>{this.destroyed||this.getStats((l,b)=>{if(this.destroyed)return;l&&(b=[]);const O={},S={},C={};let L=!1;b.forEach(k=>{(k.type==="remotecandidate"||k.type==="remote-candidate")&&(O[k.id]=k),(k.type==="localcandidate"||k.type==="local-candidate")&&(S[k.id]=k),(k.type==="candidatepair"||k.type==="candidate-pair")&&(C[k.id]=k)});const A=k=>{L=!0;let x=S[k.localCandidateId];x&&(x.ip||x.address)?(this.localAddress=x.ip||x.address,this.localPort=+x.port):x&&x.ipAddress?(this.localAddress=x.ipAddress,this.localPort=+x.portNumber):typeof k.googLocalAddress=="string"&&(x=k.googLocalAddress.split(":"),this.localAddress=x[0],this.localPort=+x[1]),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let N=O[k.remoteCandidateId];N&&(N.ip||N.address)?(this.remoteAddress=N.ip||N.address,this.remotePort=+N.port):N&&N.ipAddress?(this.remoteAddress=N.ipAddress,this.remotePort=+N.portNumber):typeof k.googRemoteAddress=="string"&&(N=k.googRemoteAddress.split(":"),this.remoteAddress=N[0],this.remotePort=+N[1]),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(b.forEach(k=>{k.type==="transport"&&k.selectedCandidatePairId&&A(C[k.selectedCandidatePairId]),(k.type==="googCandidatePair"&&k.googActiveConnection==="true"||(k.type==="candidatepair"||k.type==="candidate-pair")&&k.selected)&&A(k)}),!L&&(!Object.keys(C).length||Object.keys(S).length))return void setTimeout(u,100);if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(x){return this.destroy(c(x,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const k=this._cb;this._cb=null,k(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};u()}_onInterval(){this._cb&&this._channel&&!(this._channel.bufferedAmount>E)&&this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(u=>{this._pc.removeTrack(u),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(u){this.destroyed||(u.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:u.candidate.candidate,sdpMLineIndex:u.candidate.sdpMLineIndex,sdpMid:u.candidate.sdpMid}}):!u.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),u.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(u){if(this.destroyed)return;let l=u.data;l instanceof ArrayBuffer&&(l=d.from(l)),this.push(l)}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const u=this._cb;this._cb=null,u(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(u){this.destroyed||u.streams.forEach(l=>{this._debug("on track"),this.emit("track",u.track,l),this._remoteTracks.push({track:u.track,stream:l}),this._remoteStreams.some(b=>b.id===l.id)||(this._remoteStreams.push(l),s(()=>{this._debug("on stream"),this.emit("stream",l)}))})}_debug(){const u=[].slice.call(arguments);u[0]="["+this._id+"] "+u[0],m.apply(null,u)}}v.WEBRTC_SUPPORT=!!_(),v.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},v.channelConfig={},w.exports=v},{buffer:3,debug:4,"err-code":6,"get-browser-rtc":8,"queue-microtask":13,randombytes:14,"readable-stream":29}]},{},[])("/")})})(Qs);var Yc=Qs.exports;const Zc=Mi(Yc),oo=0,so=1,ta=2,ea=(i,t)=>{wt(i,oo);const e=Bu(t);zt(i,e)},na=(i,t,e)=>{wt(i,so),zt(i,Zi(t,e))},Jc=(i,t,e)=>na(t,e,Qt(i)),ra=(i,t,e)=>{try{Es(t,Qt(i),e)}catch(n){console.error("Caught error while handling a Yjs update",n)}},Xc=(i,t)=>{wt(i,ta),zt(i,t)},Qc=ra,tf=(i,t,e,n)=>{const a=St(i);switch(a){case oo:Jc(i,t,e);break;case so:ra(i,e,n);break;case ta:Qc(i,e,n);break;default:throw new Error("Unknown message type")}return a},yi=3e4;class ef extends hr{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const e=Ge();this.getLocalState()!==null&&yi/2<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const n=[];this.meta.forEach((a,p)=>{p!==this.clientID&&yi<=e-a.lastUpdated&&this.states.has(p)&&n.push(p)}),n.length>0&&Ci(this,n,"timeout")},Pe(yi/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const e=this.clientID,n=this.meta.get(e),a=n===void 0?0:n.clock+1,p=this.states.get(e);t===null?this.states.delete(e):this.states.set(e,t),this.meta.set(e,{clock:a,lastUpdated:Ge()});const w=[],g=[],h=[],m=[];t===null?m.push(e):p==null?t!=null&&w.push(e):(g.push(e),tr(p,t)||h.push(e)),(w.length>0||h.length>0||m.length>0)&&this.emit("change",[{added:w,updated:h,removed:m},"local"]),this.emit("update",[{added:w,updated:g,removed:m},"local"])}setLocalStateField(t,e){const n=this.getLocalState();n!==null&&this.setLocalState({...n,[t]:e})}getStates(){return this.states}}const Ci=(i,t,e)=>{const n=[];for(let a=0;a<t.length;a++){const p=t[a];if(i.states.has(p)){if(i.states.delete(p),p===i.clientID){const w=i.meta.get(p);i.meta.set(p,{clock:w.clock+1,lastUpdated:Ge()})}n.push(p)}}n.length>0&&(i.emit("change",[{added:[],updated:[],removed:n},e]),i.emit("update",[{added:[],updated:[],removed:n},e]))},Zr=(i,t,e=i.states)=>{const n=t.length,a=te();wt(a,n);for(let p=0;p<n;p++){const w=t[p],g=e.get(w)||null,h=i.meta.get(w).clock;wt(a,w),wt(a,h),je(a,JSON.stringify(g))}return Ut(a)},nf=(i,t,e)=>{const n=Fe(t),a=Ge(),p=[],w=[],g=[],h=[],m=St(n);for(let _=0;_<m;_++){const o=St(n);let r=St(n);const s=JSON.parse(We(n)),c=i.meta.get(o),d=i.states.get(o),E=c===void 0?0:c.clock;(E<r||E===r&&s===null&&i.states.has(o))&&(s===null?o===i.clientID&&i.getLocalState()!=null?r++:i.states.delete(o):i.states.set(o,s),i.meta.set(o,{clock:r,lastUpdated:a}),c===void 0&&s!==null?p.push(o):c!==void 0&&s===null?h.push(o):s!==null&&(tr(s,d)||g.push(o),w.push(o)))}(p.length>0||g.length>0||h.length>0)&&i.emit("change",[{added:p,updated:g,removed:h},e]),(p.length>0||w.length>0||h.length>0)&&i.emit("update",[{added:p,updated:w,removed:h},e])},rf=(i,t)=>{const e=_i(i).buffer,n=_i(t).buffer;return crypto.subtle.importKey("raw",e,"PBKDF2",!1,["deriveKey"]).then(a=>crypto.subtle.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]))},ia=(i,t)=>{if(!t)return zi(i);const e=crypto.getRandomValues(new Uint8Array(12));return crypto.subtle.encrypt({name:"AES-GCM",iv:e},t,i).then(n=>{const a=te();return je(a,"AES-GCM"),zt(a,e),zt(a,new Uint8Array(n)),Ut(a)})},of=(i,t)=>{const e=te();return jn(e,i),ia(Ut(e),t)},oa=(i,t)=>{if(!t)return zi(i);const e=Fe(i);We(e)!=="AES-GCM"&&du(Se("Unknown encryption algorithm"));const a=Qt(e),p=Qt(e);return crypto.subtle.decrypt({name:"AES-GCM",iv:a},t,p).then(w=>new Uint8Array(w))},sf=(i,t)=>oa(i,t).then(e=>In(Fe(new Uint8Array(e)))),we=Eu("y-webrtc"),Ln=0,sa=3,cr=1,ao=4,Jr=new Map,pn=new Map,aa=i=>{let t=!0;i.webrtcConns.forEach(e=>{e.synced||(t=!1)}),(!t&&i.synced||t&&!i.synced)&&(i.synced=t,i.provider.emit("synced",[{synced:t}]),we("synced ",ce,i.name,mn," with all peers"))},la=(i,t,e)=>{const n=Fe(t),a=te(),p=St(n);if(i===void 0)return null;const w=i.awareness,g=i.doc;let h=!1;switch(p){case Ln:{wt(a,Ln);const m=tf(n,a,g,i);m===so&&!i.synced&&e(),m===oo&&(h=!0);break}case sa:wt(a,cr),zt(a,Zr(w,Array.from(w.getStates().keys()))),h=!0;break;case cr:nf(w,Qt(n),i);break;case ao:{const m=vn(n)===1,_=We(n);if(_!==i.peerId&&(i.bcConns.has(_)&&!m||!i.bcConns.has(_)&&m)){const o=[],r=[];m?(i.bcConns.add(_),r.push(_)):(i.bcConns.delete(_),o.push(_)),i.provider.emit("peers",[{added:r,removed:o,webrtcPeers:Array.from(i.webrtcConns.keys()),bcPeers:Array.from(i.bcConns)}]),ua(i)}break}default:return console.error("Unable to compute message"),a}return h?a:null},af=(i,t)=>{const e=i.room;return we("received message from ",ce,i.remotePeerId,Vi," (",e.name,")",mn,ei),la(e,t,()=>{i.synced=!0,we("synced ",ce,e.name,mn," with ",ce,i.remotePeerId),aa(e)})},vi=(i,t)=>{we("send message to ",ce,i.remotePeerId,mn,Vi," (",i.room.name,")",ei);try{i.peer.send(Ut(t))}catch{}},lf=(i,t)=>{we("broadcast message in ",ce,i.name,mn),i.webrtcConns.forEach(e=>{try{e.peer.send(t)}catch{}})};class Ho{constructor(t,e,n,a){we("establishing connection to ",ce,n),this.room=a,this.remotePeerId=n,this.closed=!1,this.connected=!1,this.synced=!1,this.peer=new Zc({initiator:e,...a.provider.peerOpts}),this.peer.on("signal",p=>{lo(t,a,{to:n,from:a.peerId,type:"signal",signal:p})}),this.peer.on("connect",()=>{we("connected to ",ce,n),this.connected=!0;const w=a.provider.doc,g=a.awareness,h=te();wt(h,Ln),ea(h,w),vi(this,h);const m=g.getStates();if(m.size>0){const _=te();wt(_,cr),zt(_,Zr(g,Array.from(m.keys()))),vi(this,_)}}),this.peer.on("close",()=>{this.connected=!1,this.closed=!0,a.webrtcConns.has(this.remotePeerId)&&(a.webrtcConns.delete(this.remotePeerId),a.provider.emit("peers",[{removed:[this.remotePeerId],added:[],webrtcPeers:Array.from(a.webrtcConns.keys()),bcPeers:Array.from(a.bcConns)}])),aa(a),this.peer.destroy(),we("closed connection to ",ce,n),xi(a)}),this.peer.on("error",p=>{we("Error in connection to ",ce,n,": ",p),xi(a)}),this.peer.on("data",p=>{const w=af(this,p);w!==null&&vi(this,w)})}destroy(){this.peer.destroy()}}const en=(i,t)=>ia(t,i.key).then(e=>i.mux(()=>Wc(i.name,e))),zo=(i,t)=>{i.bcconnected&&en(i,t),lf(i,t)},xi=i=>{Jr.forEach(t=>{t.connected&&(t.send({type:"subscribe",topics:[i.name]}),i.webrtcConns.size<i.provider.maxConns&&lo(t,i,{type:"announce",from:i.peerId}))})},ua=i=>{if(i.provider.filterBcConns){const t=te();wt(t,ao),or(t,1),je(t,i.peerId),en(i,Ut(t))}};class uf{constructor(t,e,n,a){this.peerId=as(),this.doc=t,this.awareness=e.awareness,this.provider=e,this.synced=!1,this.name=n,this.key=a,this.webrtcConns=new Map,this.bcConns=new Set,this.mux=Gc(),this.bcconnected=!1,this._bcSubscriber=p=>oa(new Uint8Array(p),a).then(w=>this.mux(()=>{const g=la(this,w,()=>{});g&&en(this,Ut(g))})),this._docUpdateHandler=(p,w)=>{const g=te();wt(g,Ln),Xc(g,p),zo(this,Ut(g))},this._awarenessUpdateHandler=({added:p,updated:w,removed:g},h)=>{const m=p.concat(w).concat(g),_=te();wt(_,cr),zt(_,Zr(this.awareness,m)),zo(this,Ut(_))},this._beforeUnloadHandler=()=>{Ci(this.awareness,[t.clientID],"window unload"),pn.forEach(p=>{p.disconnect()})},typeof window<"u"?window.addEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.on("exit",this._beforeUnloadHandler)}connect(){this.doc.on("update",this._docUpdateHandler),this.awareness.on("update",this._awarenessUpdateHandler),xi(this);const t=this.name;$c(t,this._bcSubscriber),this.bcconnected=!0,ua(this);const e=te();wt(e,Ln),ea(e,this.doc),en(this,Ut(e));const n=te();wt(n,Ln),na(n,this.doc),en(this,Ut(n));const a=te();wt(a,sa),en(this,Ut(a));const p=te();wt(p,cr),zt(p,Zr(this.awareness,[this.doc.clientID])),en(this,Ut(p))}disconnect(){Jr.forEach(e=>{e.connected&&e.send({type:"unsubscribe",topics:[this.name]})}),Ci(this.awareness,[this.doc.clientID],"disconnect");const t=te();wt(t,ao),or(t,0),je(t,this.peerId),en(this,Ut(t)),Kc(this.name,this._bcSubscriber),this.bcconnected=!1,this.doc.off("update",this._docUpdateHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.webrtcConns.forEach(e=>e.destroy())}destroy(){this.disconnect(),typeof window<"u"?window.removeEventListener("beforeunload",this._beforeUnloadHandler):typeof process<"u"&&process.off("exit",this._beforeUnloadHandler)}}const cf=(i,t,e,n)=>{if(pn.has(e))throw Se(`A Yjs Doc connected to room "${e}" already exists!`);const a=new uf(i,t,e,n);return pn.set(e,a),a},lo=(i,t,e)=>{t.key?of(e,t.key).then(n=>{i.send({type:"publish",topic:t.name,data:is(n)})}):i.send({type:"publish",topic:t.name,data:e})};class ff extends Hc{constructor(t){super(t),this.providers=new Set,this.on("connect",()=>{we(`connected (${t})`);const e=Array.from(pn.keys());this.send({type:"subscribe",topics:e}),pn.forEach(n=>lo(this,n,{type:"announce",from:n.peerId}))}),this.on("message",e=>{switch(e.type){case"publish":{const n=e.topic,a=pn.get(n);if(a==null||typeof n!="string")return;const p=w=>{const g=a.webrtcConns,h=a.peerId;if(w==null||w.from===h||w.to!==void 0&&w.to!==h||a.bcConns.has(w.from))return;const m=g.has(w.from)?()=>{}:()=>a.provider.emit("peers",[{removed:[],added:[w.from],webrtcPeers:Array.from(a.webrtcConns.keys()),bcPeers:Array.from(a.bcConns)}]);switch(w.type){case"announce":g.size<a.provider.maxConns&&(fe(g,w.from,()=>new Ho(this,!0,w.from,a)),m());break;case"signal":w.to===h&&(fe(g,w.from,()=>new Ho(this,!1,w.from,a)).peer.signal(w.signal),m());break}};a.key?typeof e.data=="string"&&sf(os(e.data),a.key).then(p):p(e.data)}}}),this.on("disconnect",()=>we(`disconnect (${t})`))}}class hf extends hr{constructor(t,e,{signaling:n=["wss://y-webrtc-eu.fly.dev"],password:a=null,awareness:p=new ef(e),maxConns:w=20+Pe(fu()*15),filterBcConns:g=!0,peerOpts:h={}}={}){super(),this.roomName=t,this.doc=e,this.filterBcConns=g,this.awareness=p,this.shouldConnect=!1,this.signalingUrls=n,this.signalingConns=[],this.maxConns=w,this.peerOpts=h,this.key=a?rf(a,t):zi(null),this.room=null,this.key.then(m=>{this.room=cf(e,this,t,m),this.shouldConnect?this.room.connect():this.room.disconnect()}),this.connect(),this.destroy=this.destroy.bind(this),e.on("destroy",this.destroy)}get connected(){return this.room!==null&&this.shouldConnect}connect(){this.shouldConnect=!0,this.signalingUrls.forEach(t=>{const e=fe(Jr,t,()=>new ff(t));this.signalingConns.push(e),e.providers.add(this)}),this.room&&this.room.connect()}disconnect(){this.shouldConnect=!1,this.signalingConns.forEach(t=>{t.providers.delete(this),t.providers.size===0&&(t.destroy(),Jr.delete(t.url))}),this.room&&this.room.disconnect()}destroy(){this.doc.off("destroy",this.destroy),this.key.then(()=>{this.room.destroy(),pn.delete(this.roomName)}),super.destroy()}}const Nr=(i,t,e,n,a)=>{try{if(t&&t.cursor&&e!==n.clientID){const p=t.user||{},w=p.color||"#ffa500",g=p.name||`User: ${e}`;i.createCursor(e.toString(),g,w);const h=Lo(Ro(t.cursor.anchor),n),m=Lo(Ro(t.cursor.head),n);h&&m&&h.type===a&&i.moveCursor(e.toString(),{index:h.index,length:m.index-h.index})}else i.removeCursor(e.toString())}catch(p){console.error(p)}};class df{constructor(t,e,n){const a=t.doc;this.type=t,this.doc=a,this.quill=e;const p=e.getModule("cursors")||null;this.quillCursors=p,this._negatedUsedFormats={},this.awareness=n,this._awarenessChange=({added:w,removed:g,updated:h})=>{const m=n.getStates();w.forEach(_=>{Nr(p,m.get(_),_,a,t)}),h.forEach(_=>{Nr(p,m.get(_),_,a,t)}),g.forEach(_=>{p.removeCursor(_.toString())})},this._typeObserver=w=>{if(w.transaction.origin!==this){const g=w.delta,h=[];for(let m=0;m<g.length;m++){const _=g[m];_.insert!==void 0?h.push(Object.assign({},_,{attributes:Object.assign({},this._negatedUsedFormats,_.attributes||{})})):h.push(_)}e.updateContents(h,this)}},t.observe(this._typeObserver),this._quillObserver=(w,g,h,m)=>{if(g&&g.ops){const _=g.ops;_.forEach(o=>{if(o.attributes!==void 0)for(let r in o.attributes)this._negatedUsedFormats[r]===void 0&&(this._negatedUsedFormats[r]=!1)}),m!==this&&a.transact(()=>{t.applyDelta(_)},this)}if(n&&p){const _=e.getSelection(),o=n.getLocalState();if(_===null)n.getLocalState()!==null&&n.setLocalStateField("cursor",null);else{const r=No(t,_.index),s=No(t,_.index+_.length);(!o||!o.cursor||!Do(r,o.cursor.anchor)||!Do(s,o.cursor.head))&&n.setLocalStateField("cursor",{anchor:r,head:s})}n.getStates().forEach((r,s)=>{Nr(p,r,s,a,t)})}},e.on("editor-change",this._quillObserver),e.setContents(t.toDelta(),this),p!==null&&n&&(n.getStates().forEach((w,g)=>{Nr(p,w,g,a,t)}),n.on("change",this._awarenessChange))}destroy(){this.type.unobserve(this._typeObserver),this.quill.off("editor-change",this._quillObserver),this.awareness&&this.awareness.off("change",this._awarenessChange)}}const On=i=>Pn((t,e)=>{i.onerror=n=>e(new Error(n.target.error)),i.onsuccess=n=>t(n.target.result)}),pf=(i,t)=>Pn((e,n)=>{const a=indexedDB.open(i);a.onupgradeneeded=p=>t(p.target.result),a.onerror=p=>n(Se(p.target.error)),a.onsuccess=p=>{const w=p.target.result;w.onversionchange=()=>{w.close()},typeof addEventListener<"u"&&addEventListener("unload",()=>w.close()),e(w)}}),gf=i=>On(indexedDB.deleteDatabase(i)),yf=(i,t)=>t.forEach(e=>i.createObjectStore.apply(i,e)),Jn=(i,t,e="readwrite")=>{const n=i.transaction(t,e);return t.map(a=>Of(n,a))},ca=(i,t)=>On(i.count(t)),vf=(i,t)=>On(i.get(t)),fa=(i,t)=>On(i.delete(t)),mf=(i,t,e)=>On(i.put(t,e)),Ri=(i,t)=>On(i.add(t)),bf=(i,t,e)=>On(i.getAll(t,e)),_f=(i,t,e)=>{let n=null;return Sf(i,t,a=>(n=a,!1),e).then(()=>n)},wf=(i,t=null)=>_f(i,t,"prev"),Ef=(i,t)=>Pn((e,n)=>{i.onerror=n,i.onsuccess=async a=>{const p=a.target.result;if(p===null||await t(p)===!1)return e();p.continue()}}),Sf=(i,t,e,n="next")=>Ef(i.openKeyCursor(t,n),a=>e(a.key)),Of=(i,t)=>i.objectStore(t),kf=(i,t)=>IDBKeyRange.upperBound(i,t),Af=(i,t)=>IDBKeyRange.lowerBound(i,t),mi="custom",ha="updates",da=500,pa=(i,t=()=>{},e=()=>{})=>{const[n]=Jn(i.db,[ha]);return bf(n,Af(i._dbref,!1)).then(a=>{i._destroyed||(t(n),jt(i.doc,()=>{a.forEach(p=>Es(i.doc,p))},i,!1),e(n))}).then(()=>wf(n).then(a=>{i._dbref=a+1})).then(()=>ca(n).then(a=>{i._dbsize=a})).then(()=>n)},Tf=(i,t=!0)=>pa(i).then(e=>{(t||i._dbsize>=da)&&Ri(e,Zi(i.doc)).then(()=>fa(e,kf(i._dbref,!0))).then(()=>ca(e).then(n=>{i._dbsize=n}))});class Cf extends hr{constructor(t,e){super(),this.doc=e,this.name=t,this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=pf(t,n=>yf(n,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=Pn(n=>this.on("synced",()=>n(this))),this._db.then(n=>{this.db=n,pa(this,w=>Ri(w,Zi(e)),()=>{if(this._destroyed)return this;this.synced=!0,this.emit("synced",[this])})}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(n,a)=>{if(this.db&&a!==this){const[p]=Jn(this.db,[ha]);Ri(p,n),++this._dbsize>=da&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{Tf(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},e.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),e.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(t=>{t.close()})}clearData(){return this.destroy().then(()=>{gf(this.name)})}get(t){return this._db.then(e=>{const[n]=Jn(e,[mi],"readonly");return vf(n,t)})}set(t,e){return this._db.then(n=>{const[a]=Jn(n,[mi]);return mf(a,e,t)})}del(t){return this._db.then(e=>{const[n]=Jn(e,[mi]);return fa(n,t)})}}class xf{constructor(t,e,n){this.ydoc=new zn;const a=this.ydoc.getText("quill");this.provider=new hf(e,this.ydoc,{signaling:["wss://y-webrtc-ckynwnzncc.now.sh","ws://localhost:4444"]}),this.provider.on("status",p=>{console.log("WebsocketProvider Status ",p.status),p.status==="disconnect"&&(this.persistence=new Cf(e,this.ydoc))}),new df(a,t.quill,this.createAwareness(n))}createAwareness(t){let{awareness:e}=this.provider,n=Vo().unix().toString(),a="#"+Math.random().toString(16).split(".")[1].slice(0,6);return e.setLocalStateField("user",{name:t||`用户：${n.slice(6,9)}`,color:a}),e}}const Rf=[[{icon:"icon-chexiao",title:"撤销"},{icon:"icon-zhongzuo",title:"重做"},{icon:"icon-cachu",title:"清空"},{icon:"icon-anjianfengexian",title:""},{icon:"icon-cuti",title:"粗体"},{icon:"icon-italic",title:"斜体"},{icon:"icon-strikethrough",title:"删除线"},{icon:"icon-zitixiahuaxian",title:"下划线"}],[{icon:"icon-anjianfengexian",title:""},{icon:"icon-tupian",title:"插入图片"},{icon:"icon-baocun",title:"每10分钟自动保存"}],[{icon:"icon-24gl-fullScreenEnter2",title:"进入全屏"}]];const Nf={class:"toolbar"},Lf={class:"toolbar-left"},Df=["title","onClick"],Mf={class:"iconfont icon-zitiyanse"},If={class:"colorBox"},jf=["title","onClick"],Pf={class:"iconfont icon-emoji emoji",title:"emoji"},qf={class:"emoji-box"},Bf=["onClick"],Ff={class:"toolbar-right"},Uf=["title","onClick"],Hf={__name:"tabbar",setup(i){let t=nr({});const e=on("");let n=on("");va(n,o=>t.format("color",o));const a=nr(Rf),p=o=>{switch(o){case"icon-chexiao":t.undo();break;case"icon-zhongzuo":t.redo();break;case"icon-cachu":t.clear();break;case"icon-cuti":case"icon-italic":case"icon-strikethrough":case"icon-zitixiahuaxian":t.format(o);break;case"icon-baocun":w(JSON.stringify(t.getDetail()));break;case"icon-tupian":e.value.click();break;case"icon-24gl-fullScreenEnter2":document.querySelector(".header").style.display="none",a[2].pop(),a[2].push({icon:"icon-a-122-tuichuquanping",title:"退出全屏"});break;case"icon-a-122-tuichuquanping":document.querySelector(".header").style.display="flex",a[2].pop(),a[2].push({icon:"icon-24gl-fullScreenEnter2",title:"进入全屏"});break}},w=async o=>{let r=sl(JSON.stringify(JSON.parse(o).ops).toString()),s=Dn.currentRoute.value.params.fileid,{userid:c}=JSON.parse(sessionStorage.getItem("user")),d=await Oa({fileid:s,userid:c,content:r});if(d.code!==200)return Xn.error(d.msg);Xn.success(d.msg)},g=o=>t.insertText(o),h=async o=>{let r="http://localhost:5000",{files:s}=o.target,c=new FormData;c.append("file",s[0]);let d=await ka(c);if(d.code!==200)return Xn.error(d.msg);t.insertEmbed(null,"image",r+d.data)},m=async o=>{let{ops:r}=t.getDetail();if(r[0].insert!==`
`)return;let s=await Aa({fileid:o});s.code===200&&t.init(s.data)},_=o=>{o.code==="KeyS"&&o.keyCode===83&&(o.preventDefault(),o.returnValue=!1,w(JSON.stringify(t.getDetail())))};return Ni(()=>{let{fileid:o}=Dn.currentRoute.value.params,{username:r}=JSON.parse(sessionStorage.getItem("user"));t=new ll("#edit"),t.focus(),setTimeout(()=>m(o),100),new xf(t,o,r),window.addEventListener("keydown",_)}),(o,r)=>{const s=be("el-scrollbar");return Bt(),Wt("div",Nf,[Ot("div",Lf,[(Bt(!0),Wt(fn,null,hn(a[0],c=>(Bt(),Wt("i",{key:c.icon,class:Dr(["iconfont",c.icon]),title:c.title,onClick:d=>p(c.icon)},null,10,Df))),128)),Ot("i",Mf,[Ot("div",If,[$o(Ot("input",{"onUpdate:modelValue":r[0]||(r[0]=c=>Ko(n)?n.value=c:n=c),type:"color"},null,512),[[ma,ne(n)]])])]),(Bt(!0),Wt(fn,null,hn(a[1],c=>(Bt(),Wt("i",{key:c.icon,class:Dr(["iconfont",c.icon]),title:c.title,onClick:d=>p(c.icon)},null,10,jf))),128)),Ot("i",Pf,[Ot("div",qf,[_e(s,{height:"150px"},{default:me(()=>[(Bt(!0),Wt(fn,null,hn(ne(nl),c=>(Bt(),Wt("span",{onClick:d=>g(c),key:c},gn(c),9,Bf))),128))]),_:1})])])]),Ot("div",Ff,[(Bt(!0),Wt(fn,null,hn(a[2],c=>(Bt(),Wt("i",{key:c.icon,class:Dr(["iconfont",c.icon]),title:c.title,onClick:d=>p(c.icon)},null,10,Uf))),128))]),Ot("input",{onChange:h,type:"file",style:{display:"none"},name:"file",id:"file",ref_key:"uploadRef",ref:e,accept:"image/*"},null,544)])}}},zf=Un(Hf,[["__scopeId","data-v-21a55a4d"]]);const Vf=i=>(Li("data-v-e95d0dd3"),i=i(),Di(),i),$f={class:"edit"},Kf=Vf(()=>Ot("div",{id:"edit"},null,-1)),Wf={__name:"index",setup(i){return(t,e)=>(Bt(),Wt("div",$f,[_e(zf),Kf]))}},Gf=Un(Wf,[["__scopeId","data-v-e95d0dd3"]]),Yf=(i,t,e)=>{i&&Object.keys(i).forEach(n=>{n!=="subscribe"&&n!=="unsubscribe"&&e.emitter.addListener(n,i[n],t)})},Zf=(i,t,e)=>{i&&Object.keys(i).forEach(n=>{e.emitter.removeListener(n,t)})};const Jf=i=>(Li("data-v-e68bf8bc"),i=i(),Di(),i),Xf={class:"editbox"},Qf={class:"editbox-left"},th={class:"editbox-right"},eh=Jf(()=>Ot("div",{class:"editbox-right-top"},"文档交流区",-1)),nh={class:"editbox-right-main"},rh=["innerHTML"],ih={class:"item-info"},oh={class:"item-info-username"},sh={class:"item-info-content"},ah={class:"editbox-right-footer"},lh={__name:"index",setup(i){let t=on(!1),e=()=>(t.value=!t.value,m.value=0),n=JSON.parse(sessionStorage.getItem("user")),a=on(""),p=ba("socket"),{proxy:w}=_a();var g=nr([]);let h=nr([]),m=on(0),_={join:s=>{g.splice(0),s.forEach(c=>g.push(c))},message:s=>{console.log("# message #",s),h.push(s),t.value?m.value=0:m.value++,console.log(m.value)}},o=()=>{let{fileid:s}=Dn.currentRoute.value.query,{userimg:c,userid:d,username:E}=JSON.parse(sessionStorage.getItem("user")),v={userimg:c,userid:d,username:E,time:Vo().unix(),content:a.value};p.io.emit("send",{fileid:s,content:v}),a.value=""};const r=(s,c)=>{p.io.connect(),p.io.emit("init",{user:c,fileid:s})};return Ni(()=>{let{fileid:s}=Dn.currentRoute.value.query,c=JSON.parse(sessionStorage.getItem("user"));r(s,c),Yf(_,w,p)}),wa(()=>{Zf(_,w,p)}),(s,c)=>{const d=be("el-scrollbar"),E=be("el-input");return Bt(),Wt("div",Xf,[Ot("div",Qf,[_e(el,{onOpen:ne(e),socketuserlist:ne(g),unread:ne(m)},null,8,["onOpen","socketuserlist","unread"]),_e(Gf)]),$o(Ot("div",th,[eh,Ot("div",nh,[_e(d,{height:"100%"},{default:me(()=>[(Bt(!0),Wt(fn,null,hn(ne(h),v=>(Bt(),Wt("div",{key:v.userid,class:Dr(["item",v.userid===ne(n).userid?"my":""])},[Ot("div",{class:"userimg_svg",innerHTML:v.userimg},null,8,rh),Ot("div",ih,[Ot("div",oh,gn(v.username),1),Ot("div",sh,gn(v.content),1)])],2))),128))]),_:1})]),Ot("div",ah,[_e(E,{modelValue:ne(a),"onUpdate:modelValue":c[0]||(c[0]=v=>Ko(a)?a.value=v:a=v),onKeydown:Sa(ne(o),["enter"])},null,8,["modelValue","onKeydown"])])],512),[[Ea,ne(t)]])])}}},dh=Un(lh,[["__scopeId","data-v-e68bf8bc"]]);export{dh as default};
